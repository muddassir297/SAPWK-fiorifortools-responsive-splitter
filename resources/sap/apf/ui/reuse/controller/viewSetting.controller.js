/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
(function(){'use strict';var s,v;function _(S){var e=[];e.push(new sap.ui.model.Sorter(S.property,S.descending));s.oTableRepresentation.getBinding("rows").sort(e);}function a(e){s.resetPaginationForTable();s.oApi.updatePath(function(S,f){if(S===s.oApi.getActiveStep()){s.oTableRepresentation.getModel().setData({tableData:s.aDataResponse});e();}});}function b(p){var S={},i;if(s.orderby&&s.orderby.length){S=s.orderby[0].property;i=!s.orderby[0].ascending;}else{S=v.getSortItems()[0];i=false;}if(p!==undefined){S=p.oSortProperty;i=p.isDescending;}v.setSelectedSortItem(S);v.setSortDescending(i);}function c(S){var i=true;var p={property:S.oSource._oPreviousState.sortItem.getKey(),descending:S.oSource._oPreviousState.sortDescending};var C={property:S.getParameters().sortItem.getKey(),descending:S.getParameters().sortDescending};if(p.property===C.property&&p.descending===C.descending){i=false;}return i;}function d(){s.markSelectionInTable();s.oTableRepresentation.getParent().setBusy(false);}sap.ui.controller("sap.apf.ui.reuse.controller.viewSetting",{onInit:function(){var C=this;v=C.getView().getContent()[0];s=C.getView().getViewData().oTableInstance;var S=C.getView().getViewData().oSelectedSortItem?C.getView().getViewData().oSelectedSortItem:undefined;b(S);},handleConfirmForSort:function(S){if(!c(S)){return;}var C={property:S.getParameters().sortItem.getKey(),descending:S.getParameters().sortDescending};s.oTableRepresentation.getParent().setBusy(true);if(C.property){if(s.oParameter.isAlternateRepresentation){_(C);d();}else{a(function(){d();});}}}});}());

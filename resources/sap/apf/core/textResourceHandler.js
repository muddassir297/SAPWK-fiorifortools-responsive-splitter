/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.apf.core.textResourceHandler");jQuery.sap.require("sap.apf.utils.hashtable");jQuery.sap.require("jquery.sap.resources");(function(){'use strict';sap.apf.core.TextResourceHandler=function(I){var m=I.instances.messageHandler;var c=I.instances.coreApi;var r;var h=new sap.apf.utils.Hashtable(m);var H=new sap.apf.utils.Hashtable(m);var o=new sap.apf.utils.Hashtable(m);var a={};this.getTextNotHtmlEncoded=function(L,p){var t;var d;var k;if(typeof L==="string"){d=L;}else{m.check((L!==undefined&&L.kind!==undefined&&L.kind==="text"&&L.key!==undefined),"Error - oLabel is not compatible");d=L.key;}k=JSON.stringify({textKey:d,parameters:p});if(h.hasItem(k)){return h.getItem(k);}t=b(d,p);h.setItem(k,t);return t;};this.getTextHtmlEncoded=function(L,p){return jQuery.sap.encodeHTML(this.getTextNotHtmlEncoded(L,p));};this.getMessageText=function(R,p){l();return r.getResourceBundle().getText(R,p,false);};this.loadTextElements=function(t){var i,d;d=t.length;for(i=0;i<d;i++){H.setItem(t[i].TextElement,t[i].TextElementDescription);}};this.registerTextWithKey=function(k,t){a[k]=t;};function l(){if(!r){var A=c.getResourceLocation(sap.apf.core.constants.resourceLocation.apfUiTextBundle);var s=c.getResourceLocation(sap.apf.core.constants.resourceLocation.applicationUiTextBundle);var d=c.getResourceLocation(sap.apf.core.constants.resourceLocation.applicationMessageTextBundle);r=new sap.ui.model.resource.ResourceModel({bundleUrl:A});if(s!==undefined&&s!=""){r.enhance({bundleUrl:s});}if(d!==undefined&&d!==""){r.enhance({bundleUrl:d});}}}function b(k,p){if(k===sap.apf.core.constants.textKeyForInitialText){return"";}else if(a[k]){return jQuery.sap.formatMessage(a[k],p);}else if(H.hasItem(k)){return H.getItem(k);}else if(o.hasItem(k)){return o.getItem(k);}l();var t=r.getResourceBundle().getText(k,p,true);if(typeof t==="string"){return t;}m.putMessage(m.createMessageObject({code:"3001",aParameters:[k],oCallingObject:this}));var e="# text not available: "+k;o.setItem(k,e);return e;}};}());

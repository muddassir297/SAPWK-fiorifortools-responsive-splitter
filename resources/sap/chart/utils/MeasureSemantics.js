/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";var C=['sapUiChartPaletteQualitativeHue1','sapUiChartPaletteQualitativeHue2','sapUiChartPaletteQualitativeHue3','sapUiChartPaletteQualitativeHue4','sapUiChartPaletteQualitativeHue5','sapUiChartPaletteQualitativeHue6','sapUiChartPaletteQualitativeHue7','sapUiChartPaletteQualitativeHue8','sapUiChartPaletteQualitativeHue9','sapUiChartPaletteQualitativeHue10','sapUiChartPaletteQualitativeHue11'],D=[['sapUiChartPaletteSequentialHue1','sapUiChartPaletteSequentialHue1Light2','sapUiChartPaletteSequentialHue1Dark1'],['sapUiChartPaletteSequentialHue2','sapUiChartPaletteSequentialHue2Light2','sapUiChartPaletteSequentialHue2Dark1']],S='sapUiChartPaletteSequentialNeutralDark2',L={actual:'solid',projected:'dash',reference:'dot'},P={projected:'diagonalLightStripe',reference:'noFill'};function r(M){var R={};if(M.getSemanticallyRelatedMeasures){var o=M.getSemanticallyRelatedMeasures();if(o){if(o.projectedValueMeasure){R.projected=o.projectedValueMeasure;}if(o.referenceValueMeasure){R.reference=o.referenceValueMeasure;}return R;}}return R;}function c(M){var a=M.reduce(function(a,o){a[o.getName()]={msr:o,sem:(o.getSemantics&&o.getSemantics())||"actual",rel:r(o)};return a;},{});jQuery.each(a,function(s,o){if(o.sem==="actual"){jQuery.each(o.rel,function(b,t){if(a[t]&&a[t].sem!==b){delete o.rel[b];}else{jQuery.sap.log.warning("Analytical Chart","Related measures don't match its semantic role.");}});}});return a;}function m(M,s){var t=[],i=0;jQuery.each(M.slice().sort(function(a,b){var d=s[a.getName()].sem,e=s[b.getName()].sem;if(d<e){return-1;}else if(d>e){return 1;}else{return M.indexOf(a)-M.indexOf(b);}}),function(a,o){var n=o.getName();if(!s[n]){return;}var b=s[n];var T={};var l;T[b.sem]=n;if(o.getLabel){l=o.getLabel();if(l){T.labels={};T.labels[b.sem]=l;}}T.index=i++;if(b.sem==="actual"){if(b.rel.projected&&s[b.rel.projected]){T.projected=b.rel.projected;if(s[b.rel.projected].msr.getLabel){l=s[b.rel.projected].msr.getLabel();if(l){T.labels=jQuery.extend(true,T.labels,{projected:l});}}delete s[b.rel.projected];}if(b.rel.reference&&s[b.rel.reference]){T.reference=b.rel.reference;if(s[b.rel.reference].msr.getLabel){l=s[b.rel.reference].msr.getLabel();if(l){T.labels=jQuery.extend(true,T.labels,{reference:l});}}delete s[b.rel.reference];}delete s[n];}t.push(T);});return t;}var g=function(a,s){var b={dataPointStyle:null,seriesStyle:null};if(s){var h=s.some(function(t){return t.projectedValueStartTime;}),d=(s.filter(function(t){return t.reference;}).length===1);var e=function(k){if(!b.dataPointStyle){b=jQuery.extend(true,b,{"dataPointStyle":{"rules":[],others:null}});}b.dataPointStyle.rules.push(k);};var f=function(k){if(!b.seriesStyle){b=jQuery.extend(true,b,{"seriesStyle":{"rules":[]}});}b.seriesStyle.rules.push(k);};var j=function(x,y){var z,A;if(a.indexOf('dual')===-1){A=C;z=C.length;}else{var B=(y==='valueAxis')?0:1;A=D[B];z=A.length;}return{actual:A[x%z],projected:A[x%z],reference:A[x%z]};};var t,k,l,n,o,p=function(x,y,z){return function(A){return(A.measureNames===z)&&(new Date(A[x]).getTime()>=y);};},q=function(x,y,z){return function(A){return(A.measureNames===z)&&(new Date(A[x]).getTime()<y);};},u=s.length,v,w;for(var i=0;i<u;i++){t=s[i];l=j(t.index,t.valueAxisID);if(h){if(t.projectedValueStartTime&&t.timeAxis){o={};w=(t.labels&&t.labels.actual)?t.labels.actual:t.actual;o[t.semanticMsrName]=w;e({"callback":q(t.timeAxis,t.projectedValueStartTime,t.semanticMsrName),"properties":{"lineType":L.actual,"color":l.actual,"lineColor":l.actual},"displayName":w,"dataName":o});o={};w=(t.labels&&t.labels.projected)?t.labels.projected:t.projected;o[t.semanticMsrName]=w;e({"callback":p(t.timeAxis,t.projectedValueStartTime,t.semanticMsrName),"properties":{"lineType":L.projected,"pattern":P.projected,"color":l.projected,"lineColor":l.projected},"displayName":w,"dataName":o});if(t.reference){k={};k[t.reference]='*';n=d?S:l.reference;w=(t.labels&&t.labels.reference)?t.labels.reference:t.reference;e({"dataContext":[k],"properties":{"lineType":L.reference,"color":n,"lineColor":n,"pattern":P.reference},"displayName":w});}}else{for(v in t){if(t.hasOwnProperty(v)&&v!=='valueAxisID'&&v!=='index'){k={};k[t[v]]='*';w=(t.labels&&t.labels[v])?t.labels[v]:t[v];n=(d&&v==='reference')?S:l[v];e({"dataContext":[k],"properties":{"lineType":L[v],"color":n,"lineColor":n,"pattern":P[v]},"displayName":w});}}}}else if(a&&a.indexOf('bullet')===-1){for(v in t){if(t.hasOwnProperty(v)&&v!=='valueAxisID'&&v!=='index'){k={};k[t[v]]='*';n=(d&&v==='reference')?S:l[v];f({"dataContext":[k],"properties":{"dataPoint":{"color":n,"pattern":P[v]},"line":{"type":L[v],"color":n}},"displayName":t[v]});}}}}}return{"plotArea":b};};return{getTuples:function(M){return m(M,c(M));},getSemanticVizProperties:g};});

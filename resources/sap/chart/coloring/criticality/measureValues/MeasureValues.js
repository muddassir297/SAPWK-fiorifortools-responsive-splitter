sap.ui.define(['sap/chart/coloring/ColoringUtils','sap/chart/coloring/ColorPalette','sap/chart/coloring/criticality/measureValues/MeasureUtils','sap/chart/ChartLog'],function(C,a,M,b){"use strict";var t=jQuery.type;var c={};c.validate=function(d,m,D,A){if(A.length>1){var o={};d.forEach(function(e){if(e.type==="Static"){var s=e.settings.Static;if(o[s]){throw new b('error','Colorings.Criticality.Static','Measures using Static method must have different Criticality Type');}else{o[s]=true;}}else{throw new b('error','Colorings.Criticality','Only support multiple active measures using Static method');}});}else if(A.length<1){if(d.length>1){throw new b('error','Colorings.Criticality.MeasureValues','Multiple measures are defined, please resolve by activeColoring property');}}};c.qualify=function(o,m,d,s,A,e){var f=[];var g=d.map(function(D){return D.getName();}).sort().join(",");var h=[];var j=[];if(A&&A.parameters&&A.parameters.measure){j=(t(A.parameters.measure)==="array")?A.parameters.measure:[A.parameters.measure];var k=j.every(function(i){return C.find(i,m);});if(!k){throw new b('error','Colorings','Active Dimensions/Measures should be visible');}}jQuery.each(o,function(l,S){var n=Object.keys(S);var p=C.find(l,m);var E=n.filter(function(v){return v!=="Legend";});if(j.length&&j.indexOf(l)===-1){return;}if(E.length!==1){throw new b('error','Colorings.Criticality.MeasureValues','One and only one of "Static", "Calculated", "DynamicThresholds", or "ConstantThresholds" is required');}if(!p){return;}var K=E[0];f.sMethod=K;if(K==="ConstantThresholds"){var q=null;for(var i=0;i<S[K].AggregationLevels.length;i++){var r=S[K].AggregationLevels[i].VisibleDimensions.sort().join(",");if(r===g){q=S[K].AggregationLevels[i];break;}}if(q){f.push({type:K,msr:p,settings:S,byAggregation:q});h.push(p.getName());}}else{f.push({type:K,msr:p,settings:S});h.push(p.getName());}});if(f.length){c.validate(f,m,d,j);if(e.bMBC&&f[0].type!="ConstantThresholds"){throw new b('error','Colorings','Heatmap only support Criticality.MeasureValues.ConstantThresholds');}if(e.bShowUnmentionedMsr){var u=m.filter(function(i){return h.indexOf(i.getName())===-1;});if(u.length&&u.length<=5){f.push({type:"Unmentioned",settings:u});}else if(u.length>5){throw new b("warning",'Colorings.Criticality.MeasureValues',"Too many unmentioned measures (the maximum number is 5)");}}}return f;};c.parse=function(o,m,d,i,s,O,l){var e=O.bMBC;var I=O.bIsPie;var f={aMsrs:m,aDims:d,oStatus:s};var p={msr:o.msr,callbacks:{},additionalMeasures:[],additionalDimensions:[],legend:{}};if(i.length){throw new b('error','colorings.Criticality.MeasureValues','Semantic coloring could not be applied if inResult Dimensions exist');}var h=d.some(function(D){return D._getFixedRole()==="series";});if(h||(I&&d.length)){throw new b('error','colorings.Criticality.MeasureValues','Semantic coloring could not be applied if chart already has coloring');}M[o.type].parse(o,f,p,e,l);return p;};c.getContextHandler=function(s,d,m,l){if(M[s].getContextHandler){return M[s].getContextHandler(d,m,l);}else{return null;}};return c;});

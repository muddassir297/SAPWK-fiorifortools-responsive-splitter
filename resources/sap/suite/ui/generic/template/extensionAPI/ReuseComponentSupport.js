/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/extensionAPI/extensionAPI"],function(q,U,J,e){"use strict";var R={},j="sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport";function a(c){c.attachEvent("modelContextChange",function(){var d=c.getBindingContext(),M=c.getModel(),b=d&&d.getPath();q.sap.log.debug(c.getId()+":"+c.getMetadata().getName()+": modelAvailable="+!!M+" : context="+b,j);if(M&&b&&c._stContext.lastBindingContextPath!==b){c._stContext.lastBindingContextPath=b;var C=(c._stContext.firstTime&&c.stStart)||c.stRefresh;if(C){c._stContext.extensionAPIPromise=c._stContext.extensionAPIPromise||e.getExtensionAPIPromise(c.oContainer);c._stContext.extensionAPIPromise.then(C.bind(c,M,d));}c._stContext.firstTime=false;}});}function m(c,C){c._stContext={lastBindingContextPath:"",firstTime:true};if(c.stRefresh||c.stStart){a(c);}if(C){var p=c.getMetadata().getProperties();var M={};for(var P in p){M[P]=c.getProperty(P);}var o=new J(M);c.setModel(o,C);var s=c.setProperty||q.noop;c.setProperty=function(n,v){s.apply(this,arguments);o.setProperty("/"+n,v);q.sap.log.debug(this.getId()+":"+this.getMetadata().getName()+": setProperty "+n+"="+v,j);};c.getComponentModel=c.getComponentModel||function(){return o;};}}R.mixInto=function(c,C){if(!(c instanceof U)){throw new Error("Reuse component must be an instance of sap.ui.core.UIComponent");}m(c,C);};return R;});

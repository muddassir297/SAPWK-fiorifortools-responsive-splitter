sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/ui/core/routing/HashChanger","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/table/AnalyticalTable","sap/ui/comp/smarttable/SmartTable","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/MessageButtonHelper","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/core/mvc/ViewType"],function(q,B,D,H,M,a,F,S,A,b,c,d,t,E,J,f,V){"use strict";function I(s){return s.data("inlineCreate")==="true";}return{getMethods:function(v,T,C){var s={aUnsavedDataCheckFunctions:[]};var g;var h;var l;var m;var L;function o(){if(T.oServices.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Activation of object suppressed, since App is currently busy");return;}q.sap.log.info("Activate object");var e=T.oServices.oCRUDManager.activateDraftEntity();e.then(function(j){T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(j&&j.context){T.oServices.oViewDependencyHelper.setAllPagesDirty([C.getOwnerComponent().getId()]);T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());T.oServices.oNavigationController.navigateToContext(j.context,undefined,true);}});var i={activationPromise:e};T.oComponentUtils.fire(C,"AfterActivate",i);}function n(){T.oServices.oApplication.performAfterSideEffectExecution(o);}function p(i){var e=C.getView().getModel("ui");e.setProperty("/editable",i);if(g&&!T.oCommonUtils.isDraftEnabled()){T.oComponentUtils.setEditableNDC(i);}}function r(e){if(I(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=new F({path:"HasActiveEntity",operator:"EQ",value1:false});i.filters=[new F({filters:[new F(i.filters),j],and:false,bAnd:false})];}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function(q1){var r1=q1.getObject();if(r1.IsActiveEntity||r1.HasActiveEntity){var s1=q.extend({},k(q1));s1.key=s1.key.charAt(0)==="ยง"?"ยง"+s1.key:s1.key;return s1;}return{key:"ยง",text:T.oCommonUtils.getText("NEW_ENTRY_GROUP")};};i.sorter.unshift(new S("HasActiveEntity",false,x));}}function O(e,i){var j=e;if(i){j=j+" - "+i;}sap.m.URLHelper.triggerEmail(null,j,document.URL);}function u(e,i){var j=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:e+" "+i}}});j.open();}function w(){var e=C.byId("objectPage");return e.getHeaderTitle();}function y(e){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.fragments.ShareSheet",{shareEmailPressed:function(){var j=i.getModel("share");O(j.getProperty("/objectTitle"),j.getProperty("/objectSubtitle"));},shareJamPressed:function(){var j=i.getModel("share");u(j.getProperty("/objectTitle"),j.getProperty("/objectSubtitle"));}},"share",function(x,j){var q1=sap.ui.getCore().getLibraryResourceBundle("sap.m");j.setProperty("/emailButtonText",q1.getText("SEMANTIC_CONTROL_SEND_EMAIL"));j.setProperty("/jamButtonText",q1.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));j.setProperty("/bookmarkButtonText",q1.getText("SEMANTIC_CONTROL_SAVE_AS_TILE"));var r1=q.sap.getObject("sap.ushell.Container.getUser");j.setProperty("/jamVisible",!!r1&&r1().isJamActive());});var j=i.getModel("share");var k=w();j.setProperty("/objectTitle",k.getProperty("objectTitle"));j.setProperty("/objectSubtitle",k.getProperty("objectSubtitle"));j.setProperty("/bookmarkCustomUrl",document.URL);i.openBy(e.getSource());}function z(){var e=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(i){var j=i.getSource();var k=j.getBindingContext("buttons");var x=k.getProperty("link");var q1=k.getProperty("param");var r1=x.intent;var s1=r1.split('#')[1].split('-')[0];var t1=r1.split('-')[1].split('?')[0].split('~')[0];var u1={target:{semanticObject:s1,action:t1},params:q1};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(u1);}},"buttons");return e;}function N(){if(L){T.oServices.oNavigationController.navigateToContext(L,"",true);}else{T.oServices.oNavigationController.navigateToRoot(true);}}function G(){var e=C.getOwnerComponent();var i=e.getNavigationProperty();var j=T.oCommonUtils;var k=C.byId("objectPageHeader");if(k.getProperty("objectTitle")!==""){if(k.getProperty("objectSubtitle")!==""){var x=[" ",k.getProperty("objectTitle").trim(),k.getProperty("objectSubtitle")];var q1=j.getText("DELETE_WITH_OBJECTINFO",x);}else{var x=[k.getProperty("objectTitle").trim()];var q1=j.getText("DELETE_WITH_OBJECTTITLE",x);}}else{var q1=j.getText("ST_GENERIC_DELETE_SELECTED");}M.show(q1,{icon:M.Icon.WARNING,styleClass:T.oCommonUtils.getContentDensityClass(),title:j.getText("DELETE"),actions:[M.Action.DELETE,M.Action.CANCEL],onClose:function(r1){if(r1===M.Action.DELETE){var s1=T.oServices.oCRUDManager.deleteEntity();s1.then(function(){T.oServices.oViewDependencyHelper.setParentToDirty(e,i);T.oServices.oViewDependencyHelper.unbindChildren(e,true);N();});var t1={deleteEntityPromise:s1};T.oComponentUtils.fire(C,"AfterDelete",t1);}}});}function K(e){var i,j;if(e){j=e.context||e;if(T.oServices.oDraftController.getDraftContext().hasDraft(j)){T.oServices.oViewDependencyHelper.setRootPageToDirty();i=e.context&&e.context.context||e.context||e;}}if(i){if(h){h(i);}else{T.oServices.oNavigationController.navigateToContext(i,undefined,true,2);}}else{var n1=T.oComponentUtils.getTemplatePrivateModel();n1.setProperty("/objectPage/displayMode",2);}p(true);}var P;function Q(e){T.oServices.oCRUDManager.editEntity(e).then(function(i){if(i.draftAdministrativeData){P(i.draftAdministrativeData.CreatedByUserDescription||i.draftAdministrativeData.CreatedByUser);}else{K(i.context);}});}function R(e){var k=function(e,i){var j=i.dependent.propertyRef[0].name;var y1=e.getParameters().originalId;var z1=C.getView().byId(y1);if(z1&&z1.mProperties.fieldName===j){return true;}if(!z1){var A1=q("#"+y1.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(A1){z1=A1.control(0);if(z1&&z1.mProperties.fieldName===j){return true;}}}return false;};var x=function(e){var q1,u1,v1,y1,z1,A1,B1;u1=e.getSource().getModel().getMetaModel();v1=u1.getODataEntitySet(e.getSource().getEntitySet());y1=u1.getODataEntityType(v1.entityType);if(!y1||!y1.navigationProperty){return;}for(var i=0;i<y1.navigationProperty.length;i++){z1=y1.navigationProperty[i];if(z1.name==="SiblingEntity"||z1.name==="DraftAdministrativeData"){continue;}var C1=z1.relationship;var D1=C1.lastIndexOf(".");var E1=C1.slice(0,D1);var F1=C1.slice(D1+1);var G1=u1.getObject("/dataServices/schema");var H1;for(var j in G1){if(G1[j].namespace===E1){H1=G1[j];break;}}var I1=H1.association;var J1;for(var j in I1){if(I1[j].name===F1){J1=I1[j];break;}}var K1=J1.referentialConstraint;if(K1&&K1.dependent&&K1.dependent.propertyRef){var L1=k(e,K1);if(L1){A1=u1.getODataAssociationEnd(y1,z1.name);B1=u1.getODataEntityType(A1.type);if(B1["com.sap.vocabularies.UI.v1.QuickViewFacets"]){var M1=u1.getODataEntityContainer();var N1="";var O1="";for(var j=0;j<M1.entitySet.length;j++){if(M1.entitySet[j].entityType===B1.entityType){N1=M1.entitySet[j].name;O1=M1.entitySet[j].entityType;break;}}var P1=u1.getODataEntityType(O1,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";q1={navigation:z1.name,entitySet:N1,quickViewFacetODataPath:P1};return q1;}}}}return q1;};var q1=x(e);var r1=e.getParameters();if(q1){var s1=C.getOwnerComponent();var t1=s1.getModel();var u1=t1.getMetaModel();var v1=u1.getODataEntitySet(s1.getEntitySet());var w1=new J({fieldsEnabled:false,navigationPath:q1.navigation});w1.setDefaultBindingMode("OneWay");var x1=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{meta:u1.createBindingContext(u1.getODataEntityType(v1.entityType,true)),entitySet:u1.createBindingContext(u1.getODataEntitySet(q1.entitySet,true)),facetCollection:u1.createBindingContext(q1.quickViewFacetODataPath,true)},models:{quickView:w1,meta:u1,entitySet:u1,facetCollection:u1},preprocessorsData:T.oComponentUtils.getPreprocessorsData()}},type:V.XML,viewName:"sap.suite.ui.generic.template.ObjectPage.view.QuickViewSmartForm",height:"100%"});r1.show(undefined,undefined,undefined,x1);}else{r1.show();}}P=function(e){var i=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();Q(true);},onCancel:function(){i.close();}},"Dialog");var j=i.getModel("Dialog");var k=T.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[e]);j.setProperty("/unsavedChangesQuestion",k);i.open();};var U;function W(){U=U||T.oCommonUtils.getText("NEW_OBJECT");return U;}var X;function Y(){return X||H.getInstance();}function Z(e,i,j){if(!e.getContent){return;}e.getContent().forEach(function(k){if(k instanceof b){if(j||i[k.getTableBindingPath()]){if(k.isInitialised()){k.rebindTable(j);}else{k.attachInitialise(function(){k.rebindTable(j);});}if(!j){T.oServices.oApplicationController.executeSideEffects(C.getOwnerComponent().getBindingContext(),[],[k.getTableBindingPath()]);}}}});}function $(e){var i=sap.ui.getCore().byId(w().getId()+"-lock");i.setVisible(e);}function _(){var j="{\"SelectionVariantID\":\"\"}";var k=C.getOwnerComponent();var q1=k.getEntitySet();var r1=k.getModel();var s1=r1.getMetaModel();var t1=s1.getODataEntitySet(q1);var u1=s1.getODataEntityType(t1.entityType);var v1=u1.property;var w1=[];for(var x in v1){var x1=v1[x]["sap:field-control"];if(x1&&w1.indexOf(x1)<0){w1.push(v1[x]["sap:field-control"]);}}var y1=C.getView().getBindingContext();var z1=y1.getObject();var A1=new c();for(var i in v1){var B1=v1[i].type;var C1=v1[i].name;var D1=z1[v1[i].name];if(w1.indexOf(C1)>-1){continue;}if(C1&&(D1||B1==="Edm.Boolean")){if(B1==="Edm.Time"&&D1.ms!==undefined){D1=D1.ms;}if(typeof D1!=="string"){try{D1=D1.toString();}catch(e){D1=D1+"";}}A1.addParameter(C1,D1);}}j=A1.toJSONString();return j;}function a1(e,i){var j=true;var k=i.getModel();var x=T.oCommonUtils.getDeleteRestrictions(i);var q1=x&&x.Deletable&&x.Deletable.Path;if(q1){j=k.getProperty(q1,e);}return j;}function b1(e){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getSource();var x=T.oCommonUtils.getOwnerControl(k);var q1=T.oCommonUtils.getSelectedContexts(x);if(q1.length===0){M.error(T.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:T.oCommonUtils.getContentDensityClass()});return;}var r1=[];var s1=[];for(var i=0;i<q1.length;i++){if(a1(q1[i],x)){r1.push(q1[i].getPath());}else{s1.push(q1[i]);}}if(s1.length>0){M.error(T.oCommonUtils.getText("ST_GENERIC_DELETE_UNDELETABLE_SUBITEMS",[s1.length,q1.length]),{styleClass:T.oCommonUtils.getContentDensityClass()});}var t1=T.oServices.oCRUDManager.deleteEntities(r1);j.setBusy(t1);t1.then(function(){T.oServices.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());x.getTable().attachEventOnce("updateFinished",function(){T.oCommonUtils.setEnabledToolbarButtons(x);});x.rebindTable();});}function c1(){var i=C.byId("imageDialog")||T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");return i;}function d1(){var e=C.getOwnerComponent();var n1=e.getModel("_templPriv");var o1=n1.getProperty("/generic/viewLevel")-1;return"/generic/paginatorInfo/"+o1;}function e1(){var e=C.getOwnerComponent();var i=e.getModel("_templPrivGlobal");var j=i.getProperty(d1());return j;}function f1(){var e=C.getOwnerComponent();var n1=e.getModel("_templPriv");var i=e.getModel("_templPrivGlobal");var j=e1();var k=!!j&&(!l||i.getProperty("/generic/FCL/isLogicallyFullScreen"));var x=k&&(j.selectedRelativeIndex!==(j.listBinding.getLength()-1));var q1=k&&j.selectedRelativeIndex>0;n1.setProperty("/objectPage/navButtons/navUpEnabled",q1);n1.setProperty("/objectPage/navButtons/navDownEnabled",x);n1.setProperty("/objectPage/navButtons/navBtnsVisible",x||q1);}function g1(){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var i=T.oCommonUtils.isDraftEnabled();if(g&&!i){p(false);}T.oServices.oNavigationController.navigateBack();},q.noop,s);}function h1(e){C.oComponent=C.getOwnerComponent()||C.getView().getViewData().component;var i=C.getView();i.setModel(C.oComponent.getModel());C.sEntitySet=C.oComponent.getEntitySet();C.oDraftController=C.oComponent.getAppComponent().getTransactionController().getDraftController();C.bDraftEnabled=C.oDraftController.getDraftContext().isDraftEnabled(C.sEntitySet);if(C.bDraftEnabled){var j=e.getBindingContext();var k=C.oComponent.getAppComponent().getApplicationController();if(!k.getTransactionController().getDraftController().getDraftContext().hasDraft(j)){return Promise.resolve();}var x=C.getOwnerComponent().getRouter();var q1=x.oHashChanger.getHash();return k.propertyChanged(q1,j);}}function i1(e){var i=e.getSource();T.oServices.oApplication.performAfterSideEffectExecution(function(){var j=T.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=C.getView().getModel("ui");k.setProperty("/enabled",false);var x=h1(i).then(function(q1){var r1=C.getOwnerComponent().getModel("_templPrivGlobal");if(!l||r1.getProperty("/generic/FCL/isLogicallyFullScreen")){N();T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("ST_CHANGES_APPLIED"));}},function(){j.getUnbusy().then(function(q1){k.setProperty("/enabled",true);T.oCommonUtils.processDataLossTechnicalErrorConfirmation(function(){N();},q.noop,s);});});j.setBusy(x);});}function j1(e,i){var n1=T.oComponentUtils.getTemplatePrivateModel();var o1=n1.getProperty("/generic/viewLevel");var j=o1>1?T.oCommonUtils.getTableBinding(i).path:null;T.oServices.oNavigationController.navigateToContext(e,j,true);}function k1(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.m");var n1=T.oComponentUtils.getTemplatePrivateModel();n1.setProperty("/objectPage/navButtons",{navDownTooltip:e.getText("FACETFILTER_NEXT"),navUpTooltip:e.getText("FACETFILTER_PREVIOUS"),navDownEnabled:false,navUpEnabled:false,navBtnsVisible:false});}v.refreshFacets=function(e,i){C.byId("objectPage").getSections().forEach(function(j){j.getSubSections().forEach(function(k){k.getBlocks().forEach(function(x){Z(x,e,i);});k.getMoreBlocks().forEach(function(x){Z(x,e,i);});});});};function l1(){var n1=T.oComponentUtils.getTemplatePrivateModel();var e=n1.getProperty("/generic/viewLevel")-1;var j=e?T.oServices.oApplication.getHierarchySectionsFromCurrentHash():[];var k=w();var x=k&&k.getBreadCrumbsLinks();X=Y();L="";var q1="";for(var i=0;i<e;i++){var r1=j[i];L=L+q1+r1;q1="/";var s1=m[i];var t1=r1.split("(");if(t1&&t1[1]){var u1=x&&x[i];if(u1){var v1=X.hrefForAppSpecificHash?X.hrefForAppSpecificHash(L):"#/"+L;v1=T.oServices.oApplication.adaptBreadCrumbUrl(v1,i+1);var w1="/"+s1+"("+t1[1];u1.setHref(v1);u1.bindElement(w1);}}}}v.onComponentActivate=function(e){s.messageButtonHelper.adaptToContext(e);f1();T.oComponentUtils.setBackNavigation(g1);l1();};v.draftResume=function(e,j,k){var x=e.getObject();if(!x||!x.hasOwnProperty("IsActiveEntity")||x.IsActiveEntity!==false){return;}var q1=C.getView().getModel();var r1=q1.getMetaModel();var s1=r1.getODataEntitySet(C.getOwnerComponent().getEntitySet());var t1=r1.getODataEntityType(s1.entityType);var u1="";var v1="";var w1=t1["com.sap.vocabularies.Common.v1.SemanticKey"];for(var i in w1){var x1=w1[i];if(v1===""){v1=j[x1.PropertyPath];}else{v1=v1+"-"+j[x1.PropertyPath];}}var y1="-";if(k&&k.LastChangeDateTime!==null){var z1=D.getDateTimeInstance({pattern:"MMMM d, yyyy HH:mm",style:"long"});y1=z1.format(k.LastChangeDateTime);}var A1=[u1,v1,y1];var B1=T.oCommonUtils.getText("DRAFT_FOUND_RESUME",A1);var C1;var D1=T.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.DraftResumeDialog",{onDraftResume:function(){D1.close();T.oServices.oNavigationController.navigateToContext(C1.getProperty("/siblingContext"),null,true);},onDraftDiscard:function(){D1.close();C.getView().getModel("ui").setProperty("/enabled",true);T.oServices.oCRUDManager.deleteEntity(true);$(false);C1.getProperty("/activeEntity").HasDraftEntity=false;T.oServices.oViewDependencyHelper.setAllPagesDirty();},onResumeDialogClosed:function(){C1.setProperty("/siblingContext",null);C1.setProperty("/activeEntity",null);}},"Dialog");C1=D1.getModel("Dialog");C1.setProperty("/draftResumeText",B1);C1.setProperty("/siblingContext",e);C1.setProperty("/activeEntity",j);D1.open();};var Q=t.testable(Q,"editEntity");var Y=t.testable(Y,"getHashChangerInstance");var a1=t.testable(a1,"isEntryDeletable");var l1=t.testable(l1,"adaptLinksToUpperLevels");var m1={onInit:function(){k1();T.oCommonUtils.executeGlobalSideEffect();s.messageButtonHelper=new d(T.oCommonUtils,C);T.oServices.oTemplateCapabilities.oMessageButtonHelper=s.messageButtonHelper;v.isDraftEnabled=T.oCommonUtils.isDraftEnabled;m=T.oServices.oApplication.getSections(C.getOwnerComponent().getEntitySet(),true);},handlers:{addEntry:function(e){var i=e.getSource();var j=T.oCommonUtils.getOwnerControl(i);var k=I(j);if(!i.data("CrossNavigation")&&k){T.oCommonEventHandlers.addEntry(i,true);return;}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){T.oCommonEventHandlers.addEntry(i,false);},q.noop,s);},deleteEntries:b1,onSelectionChange:function(e){T.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onBack:g1,applyAndUp:i1,onCancel:function(){var e="Proceed";if(T.oComponentUtils.isNonDraftCreate()||!g){e="LeavePage";}T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){if(g){p(false);}if(T.oComponentUtils.isNonDraftCreate()||!g){T.oServices.oNavigationController.navigateBack();}},q.noop,s,e);},onContactDetails:function(e){T.oCommonEventHandlers.onContactDetails(e);},onPressDraftInfo:function(e){var i=C.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));T.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:y,onRelatedApps:function(e){var x,q1,r1,s1,t1,u1,v1;var w1,x1,y1,z1,A1;x=e.getSource();y1=sap.ushell&&sap.ushell.Container;q1=y1&&y1.getService("URLParsing");r1=q1.parseShellHash(document.location.hash);z1=r1.semanticObject;A1=r1.action;s1=C.getView&&C.getView().getBindingContext();var B1=C.getOwnerComponent().getModel().getMetaModel();var C1=s1.getObject();var D1=C1.__metadata.type;var E1=B1.getODataEntityType(D1);var F1=E1["com.sap.vocabularies.Common.v1.SemanticKey"];var G1={};if(F1&&F1.length>0){for(var j=0;j<F1.length;j++){var H1=F1[j].PropertyPath;if(!G1[H1]){G1[H1]=[];G1[H1].push(C1[H1]);}}}else{for(var k in E1.key.propertyRef){var I1=E1.key.propertyRef[k].name;if(!G1[I1]){G1[I1]=[];G1[I1].push(C1[I1]);}}}t1=C.getOwnerComponent().getAppComponent();u1=y1&&y1.getService("CrossApplicationNavigation");v1=u1.getLinks({semanticObject:z1,params:G1,ui5Component:t1});w1=z();x1=w1.getModel("buttons");x1.setProperty("/buttons",[]);w1.openBy(x);v1.done(function(J1){var K1=[];for(var i=0;i<J1.length;i++){var L1=J1[i];var M1=L1.intent;var N1=M1.split("-")[1].split("?")[0];if(N1!=A1){K1.push({enabled:true,text:L1.text,link:L1,param:G1});}}if(K1.length===0){K1.push({enabled:false,text:T.oCommonUtils.getText("NO_RELATED_APPS")});}x1.setProperty("/buttons",K1);});},onSemanticObjectLinkPopoverLinkPressed:function(e){T.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,s);},handleShowNextObject:function(e){var i=T.oServices.oApplication.getBusyHelper();if(i.isBusy()){return;}var j=e1();var k=j.listBinding;var x=j.endIndex;var q1=j.selectedRelativeIndex+1;var r1=j.objectPageNavigationContexts;var s1=j.growingThreshold;var t1=C.getOwnerComponent().getModel("_templPrivGlobal");var u1=d1();if(q1&&r1){var v1=r1[q1];if(v1){t1.setProperty(u1+"/selectedRelativeIndex",q1);j1(v1,j.tableNavFrom);}else{var w1=new Promise(function(x1,y1){var z1=x+1+s1;var A1=function(B1){var C1=B1.getSource().getContexts(0,z1);t1.setProperty(u1+"/objectPageNavigationContexts",C1);t1.setProperty(u1+"/endIndex",z1);v1=C1[q1];k.detachDataReceived(A1);t1.setProperty(u1+"/selectedRelativeIndex",q1);j1(v1,j.tableNavFrom);x1();};k.attachDataReceived(A1);k.loadData(0,z1);});i.setBusy(w1);}}},handleShowPrevObject:function(e){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}var i=e1();var j=i.selectedRelativeIndex-1;var k=i.objectPageNavigationContexts;var x=C.getOwnerComponent();var q1=x.getModel("_templPrivGlobal");if(k){var r1=k[j];if(r1&&r1.getPath){q1.setProperty(d1()+"/selectedRelativeIndex",j);j1(r1,i.tableNavFrom);}}},onShowMessages:function(){s.messageButtonHelper.toggleMessagePopover();},onEdit:function(e){var i=e.getSource();if(i.data("CrossNavigation")){T.oCommonEventHandlers.onEditNavigateIntent(i);return;}g=true;Q();},onSave:function(){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}var e=C.getView().getBindingContext();var i=C.getView().getModel().getPendingChanges();i=i&&i[e.getPath().replace("/","")]||{};var j=Object.keys(i)||[];var k=T.oComponentUtils.isNonDraftCreate();var x=j.indexOf("__metadata");if(x>-1){j.splice(x,1);}var q1=T.oServices.oCRUDManager.saveEntity();q1.then(function(s1){if(!T.oCommonUtils.isDraftEnabled()&&g){p(false);}else if(T.oCommonUtils.isDraftEnabled()){p(false);}if(k){if(s1&&s1.getPath()!=="/undefined"){T.oServices.oNavigationController.navigateToContext(s1,undefined,true);}else{p(false);T.oServices.oNavigationController.navigateBack();}T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_CREATED"));}else{T.oServices.oApplication.showMessageToast(T.oCommonUtils.getText("OBJECT_SAVED"));if(!T.oCommonUtils.isDraftEnabled()&&!g){T.oServices.oNavigationController.navigateBack();}}if(j.length>0){T.oServices.oApplicationController.executeSideEffects(e,j);}});var r1={saveEntityPromise:q1};T.oComponentUtils.fire(C,"AfterSave",r1);},onActivate:n,onSmartFieldUrlPressed:function(e){T.oCommonEventHandlers.onSmartFieldUrlPressed(e,s);},onBreadCrumbUrlPressed:function(e){T.oCommonEventHandlers.onBreadCrumbUrlPressed(e,s);},onDiscardDraft:function(e){T.oCommonEventHandlers.onDiscardDraft(e);},onDiscardSubItem:function(e){T.oCommonEventHandlers.onDiscardSubItem(e);},onDelete:function(e){if(T.oServices.oApplication.getBusyHelper().isBusy()){return;}G();},onCallActionFromToolBar:function(e){T.oCommonEventHandlers.onCallActionFromToolBar(e,s);},onCallAction:function(e){var i=C.getOwnerComponent();var j=i.getNavigationProperty();var k=T.oCommonUtils.getCustomData(e);var x=[];x.push(C.getView().getBindingContext());if(x[0]&&k.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var q1={functionImportPath:k.Action,contexts:x,sourceControl:"",label:k.Label,operationGrouping:k.InvocationGrouping,navigationProperty:C.getOwnerComponent().getNavigationProperty()};T.oServices.oCRUDManager.callAction(q1).then(function(r1){var s1=r1&&r1[0];if(s1&&s1.response&&s1.response.context&&(!s1.actionContext||s1.actionContext&&s1.response.context.getPath()!==s1.actionContext.getPath())){T.oServices.oViewDependencyHelper.setParentToDirty(i,j);}});},q.noop,s,"Proceed");}},onDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,s);},onDataFieldWithIntentBasedNavigation:function(e){T.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,s);},onChartInit:function(e){var i=e.getSource().getChart();var j=C._templateEventHandlers.onSelectionChange;i.attachSelectData(j).attachDeselectData(j);},onBeforeRebindDetailTable:function(e){T.oCommonEventHandlers.onBeforeRebindTable(e);C.onBeforeRebindTableExtension(e);r(e);if(e.getSource().getTable()instanceof A){var i=e.getParameter("bindingParams");i.parameters.entitySet=e.getSource().getEntitySet();}},onShowDetails:function(e){T.oCommonEventHandlers.onShowDetails(e.getSource(),s);},onListNavigate:function(e){T.oCommonEventHandlers.onListNavigate(e.getSource(),s);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();T.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var j=T.oCommonUtils.getNavigationHandler();if(j){var k=_();j.processBeforeSmartLinkPopoverOpens(i,k);}else{i.open();}},q.noop,s,q.noop);},onSemanticObjectLinkNavigationTargetObtained:function(e){R(e);},onHeaderImagePress:function(e){var i=c1();var j=e.getSource().getId();i.addAriaLabelledBy(j);var k=i.getModel("headerImage");k.setProperty("/src",e.getSource().getSrc());if(sap.ui.Device.system.phone){i.setProperty("stretch",true);}i.open();},onInlineDataFieldForAction:function(e){var i=e.getSource();var j=T.oCommonUtils.getElementCustomData(i);var k=T.oCommonUtils.getOwnerControl(i);var x=k.getParent().getTableBindingPath();var q1=[i.getBindingContext()];T.oCommonUtils.triggerAction(q1,x,j,i,s);},onInlineDataFieldForIntentBasedNavigation:function(e){T.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),s);},onDeterminingDataFieldForAction:function(e){var i=[this.getView().getBindingContext()];var j=e.getSource();var k=T.oCommonUtils.getElementCustomData(j);var x=this.getView().getBindingPath();T.oCommonUtils.triggerAction(i,x,k);},onBeforeRebindChart:function(e){var i=e.getSource();i.oModels=i.getChart().oPropagatedProperties.oModels;},onTableInit:function(e){var i=e.getSource();var n1=C.getOwnerComponent().getModel("_templPriv");T.oCommonUtils.checkToolbarIntentsSupported(i,n1);}},formatters:{formatDefaultObjectTitle:function(e,i){if(i||!e){return;}var j=C.getView().getBindingContext();var k=j&&j.getObject();if(e&&k&&(k.IsActiveEntity===undefined||k.IsActiveEntity===false||k.HasActiveEntity===false)){return W();}}},extensionAPI:new E(T,C,s)};var n1=T.oComponentUtils.getTemplatePrivateModel();var o1=n1.getProperty("/generic/viewLevel");var p1=T.oServices.oApplication.getFclProxy(o1);if(p1.oActionButtonHandlers){m1.handlers.fclActionButtonHandlers=p1.oActionButtonHandlers;l=true;}h=p1.navigateToDraft;return m1;}};});

sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/lib/testableHelper"],function(B,A,t){"use strict";function g(T){function s(E){E=E||[];for(var i in T.componentRegistry){if(E.indexOf(i)===-1){var C=T.componentRegistry[i];C.oComponent.setIsRefreshRequired(true);}}}function a(C,n,N){var S,p,P,r,m=T.componentRegistry;var M=C.getId();S=C.getComponentContainer().getSettings();var R=S&&S.routeConfig;if(R){if(R.viewLevel===0){return false;}else{for(var f in m){if(f!==M){p=m[f].oComponent.getComponentContainer().getSettings();if(p&&p.routeConfig&&p.routeConfig.viewLevel===(R.viewLevel-1)&&(R.viewLevel===1||p.routeConfig.entitySet===R.parentEntitySet)){P=m[f].oComponent;if(n){r=m[f].oGenericData.mRefreshInfos;r[n]=true;}else{if(typeof P.setIsRefreshRequired==="function"){P.setIsRefreshRequired(true);}}break;}}}}}}function b(C,n){if(n){var r=T.componentRegistry[C.getId()].oGenericData.mRefreshInfos;r[n]=true;}else{if(typeof C.setIsRefreshRequired==="function"){C.setIsRefreshRequired(true);}}}function c(C){var f=[];var S=C.getComponentContainer().getSettings();for(var o in T.componentRegistry){var O=T.componentRegistry[o];var h=O.oComponent.getComponentContainer().getSettings();if(S.routeConfig.viewLevel+1===h.routeConfig.viewLevel&&S.routeConfig.entitySet===h.routeConfig.parentEntitySet){f.push(O.oComponent);}}return f;}function d(C){var S=[];var f=c(C);for(var i=0;i<f.length;i++){S=S.concat(d(f[i]));}return S.concat(f);}function u(C,f){var S=d(C);for(var i=0;i<S.length;i++){T.componentRegistry[S[i].getId()].oComponent.getComponentContainer().unbindElement();}if(f){C.getComponentContainer().unbindElement();}}function e(){if(T.rootContainer){var i=T.rootContainer.getComponentInstance();if(i&&typeof i.setIsRefreshRequired==="function"){i.setIsRefreshRequired(true);}}}var a=t.testable(a,"setParentToDirty");return{setAllPagesDirty:s,setParentToDirty:a,setMeToDirty:b,unbindChildren:u,setRootPageToDirty:e};}return B.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(T){jQuery.extend(this,g(T));}});});

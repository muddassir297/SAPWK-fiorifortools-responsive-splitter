/*!
 * 
 * 		SAP UI development toolkit for HTML5 (SAPUI5)
 * 		(c) Copyright 2009-2015 SAP SE. All rights reserved
 * 	
 */
jQuery.sap.declare("sap.suite.ui.commons.TimelineRenderer");sap.ui.define("sap.suite.ui.commons.TimelineRenderer",["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/TimelineAxisOrientation","sap/suite/ui/commons/TimelineScrollingFadeout"],function(H,T,S){"use strict";var a={},r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");a.render=function(R,t){var m=this._getHtmlModel(t);m.getRenderer().render(R);};a._getHtmlModel=function(t){if(t.getAxisOrientation()===T.Horizontal){return this._getHorizontalTimelineElement(t);}else{return this._getVerticalTimelineElement(t);}};a._getScrollerIcon=function(t,i,d){var e=new H("div"),n="scrollerIcon"+d,g="getScrollerIcon"+d;e.addClass("sapSuiteUiCommonsTimelineScrollerIconWrapper sapSuiteUiCommonsTimelineScrollerIconWrapper"+d);t._objects.register(n,function(){return new sap.ui.core.Icon({src:"sap-icon://step"});});e.addChild(t._objects[g]());return e;};a._setWidthAndHeight=function(t,e){var h=t.getHeight(),w=t.getWidth();if(h&&!t._isVertical()){e.addStyle("height",h);}if(w){e.addStyle("width",w);}};a._getHorizontalTimelineElement=function(t){var I=t.getEnableDoubleSided(),b=t._isLeftAlignment(),c=t._outputItem,g=0,d=true,o,p,e,f,n,h;var j=new H("div"),k=new H("div"),l=new H("div"),m=new H("div"),q=new H("div"),s=new H("ul"),u=new H("div"),v=new H("ul"),w=new H("div"),x=new H("ul"),y=new H("div"),z=new H("div");j.addControlData(t);j.addClass("sapSuiteUiCommonsTimelineH");this._addAccessibilityTags(j,t);this._setWidthAndHeight(t,j);if(I){j.addClass("sapSuiteUiCommonsTimelineDblSidedH");}else{j.addClass(b?"sapSuiteUiCommonsTimelineRight":"sapSuiteUiCommonsTimelineLeft");}if(t._isGrouped()){j.addClass("sapSuiteUiCommonsTimelineGrouped");}j.addChild(t._objects.getHeaderBar());t._setMessageBars(j);k.setId(t.getId()+"-contentH");k.addClass("sapSuiteUiCommonsTimelineContentsH");j.addChild(k);l.setId(t.getId()+"-scrollH");l.addClass("sapSuiteUiCommonsTimelineScrollH");k.addChild(l);q.addClass("sapSuiteUiCommonsTimelineHorizontalTopLine");u.addClass("sapSuiteUiCommonsTimelineHorizontalMiddleLine");u.addChild(v);w.addClass("sapSuiteUiCommonsTimelineHorizontalBottomLine");if(I||b){q.addChild(s);}if(I||!b){w.addChild(x);}s.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");x.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");v.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");if(c.length>0){if(t._scrollingFadeout()){j.addChild(y);j.addChild(z);y.addClass("sapSuiteUiCommonsTimelineHorizontalLeftScroller sapSuiteUiCommonsTimelineHorizontalScroller");z.addClass("sapSuiteUiCommonsTimelineHorizontalRightScroller sapSuiteUiCommonsTimelineHorizontalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){y.addChild(this._getScrollerIcon(t,"_scollerIconLeft","Left"));z.addChild(this._getScrollerIcon(t,"_scollerIconRight","Right"));}}m.addClass("sapSuiteUiCommonsTimelineHorizontalScrollContainer");l.addChild(m);m.addChild(q);m.addChild(u);m.addChild(w);v.addChild(this._getFirstHorizontalDelimiterLine(c[0]));for(var i=0;i<c.length;i++){o=c[i];p=b?"top":"bottom";e=(g%2);f=o.getText()==="GroupHeader";n=c[i+1];h=b?s:x;if(I){h=s;if(!f){h=e?x:s;}p=e?"bottom":"top";}if(f){g=0;d=true;p="top";}else if(e){o._isFirstGroupEvenItem=d;d=false;}o._index=i;o._orientation="H";o._placementLine=p;h.addChild(o);var D=this._getHorizontalDelimiterLine(t,o,g,n);if(D){v.addChild(D);}if(!f){g++;}}}else{l.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){v.addChild(this._getShowMoreElement(t));}return j;};a._getFirstHorizontalDelimiterLine=function(t){var e=new H("li"),b=new H("div"),c=new H("div"),d=new H("div"),i=t._isGroupHeader;d.addClass("sapSuiteUiCommonsTimelineItemBarH");c.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");c.addChild(d);b.addChild(c);b.addClass("sapSuiteUiCommonsTimelineItemBarDivWrapper");e.addChild(b);e.addClass("sapSuiteUiCommonsTimelineItemFirstBar");if(i){e.addClass(t._isGroupCollapsed()?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");}return e;};a._getHorizontalDelimiterLine=function(t,o,i,n){var I=(i%2),b=o.getText()==="GroupHeader",s=b?"sapSuiteUiCommonsTimelineItemGroupHeaderH":"sapSuiteUiCommonsTimelineItemBaseLength",B="sapSuiteUiCommonsTimelineItemBarH",c=n!=null&&n._isGroupHeader,d=n===null,e=o._getStatusColorClass(),f=new H("li"),g=new H("div"),h=new H("div"),j=new H("div"),k=new H("div"),l=new H("div"),m=new H("div");f.setId(o.getId()+"-line");if(b&&!o._isGroupCollapsed()){f.addStyle("display","none");}if(o._groupID){f.setAttribute("groupid",o._groupID);}if(b){B="sapSuiteUiCommonsTimelineItemGroupHeaderBar";f.setAttribute("nodeType","GroupHeaderBar");}else if(t.getEnableDoubleSided()){if((!c||I)&&!d){s=I?"sapSuiteUiCommonsTimelineItemHOdd":"sapSuiteUiCommonsTimelineItemHEven";}}f.addClass(s);j.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");h.addClass("sapSuiteUiCommonsTimelineItemBarH");h.addClass(B);g.addStyle("display","flex");g.addStyle("height","100%");if(t.getShowIcons()){g.addChild(k);if(!b){if(e){k.addClass(e);}k.addClass("sapSuiteUiCommonsTimelineItemIconWrapper");}else{k.addClass("sapSuiteUiCommonsTimelineItemGroupBarIconWrapper");}k.addChild(o._getLineIcon());}else{m.addChild(l);m.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");l.addClass("sapSuiteUiCommonsTimelineItemNoIcon");if(e){l.addClass(e);}g.addClass("sapSuiteUiCommonsTimelineItemWrapper");g.addChild(m);}g.addChild(j);j.addChild(h);if(t._collapsedGroups[o._groupID]){if(b){f.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}else{f.addStyle("display","none");}}f.addChild(g);return f;};a._getVerticalTimelineElement=function(t){var I=t._renderDblSided,e=new H("div"),b=new H("div"),c=new H("div"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),j=new H("div"),l,o,n,m,N,C=function(){var l=new H("ul");l.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");return l;};e.addControlData(t);e.addClass("sapSuiteUiCommonsTimeline");this._addAccessibilityTags(e,t);g.addClass("sapSuiteUiCommonsTimelineContentWrapper");if(t._isGrouped()){e.addClass("sapSuiteUiCommonsTimelineGrouped");}if(t._scrollingFadeout()){g.addChild(b);g.addChild(c);b.addClass("sapSuiteUiCommonsTimelineTopScroller sapSuiteUiCommonsTimelineVerticalScroller");c.addClass("sapSuiteUiCommonsTimelineBottomScroller sapSuiteUiCommonsTimelineVerticalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){b.addChild(this._getScrollerIcon(t,"_scollerIconTop","Top"));c.addChild(this._getScrollerIcon(t,"_scrollerIconBottom","Bottom"));}}this._setWidthAndHeight(t,e);e.addChild(t._objects.getHeaderBar());t._setMessageBars(e);if((t.getMessageStrip()!==null)&&(t.getMessageStrip()!==undefined)&&t.getMessageStrip().getText()!==""){e.addChild(t._objects.getMessageStrip());}e.addChild(g);g.addChild(d);d.setId(t.getId()+"-content");d.setAttribute("data-sap-ui-fastnavgroup","true");d.addClass("sapSuiteUiCommonsTimelineContents");d.addClass("sapSuiteUiCommonsTimelineScrollV");d.addClass("sapSuiteUiCommonsTimelineScroll");d.addChild(f);f.setId(t.getId()+"-scroll");f.addClass("sapSuiteUiCommonsTimelineScroll");l=C();var p=t._outputItem;if(p.length>0){f.addChild(l);for(var i=0;i<p.length;i++){o=p[i];n=p[i+1];m=o._isGroupHeader;o._orientation="V";o._position=t.getAlignment();o._additionalBarClass="";o._index=i;if(o._isGroupHeader&&o._isGroupCollapsed()){for(var k=i+1;k<p.length;k++){N=p[k];if(N._isGroupHeader){if(!N._isGroupCollapsed()){o._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}break;}}}if(n&&n._isGroupHeader&&!n._isGroupCollapsed()){o._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}if(m&&(i!=0)){l=C();f.addChild(l);}l.addChild(o);}}else{f.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){h.addClass("sapSuiteUiCommonsTimelineShowMoreWrapper");h.addChild(this._getShowMoreElement(t));f.addChild(h);}else{j.setAttribute("tabindex","0");f.addChild(j);}return e;};a._getEmptyTimelineElement=function(t){var e=new H("div"),b=new H("span");e.addClass("sapSuiteUiCommonsTimelineNoTextWrapper");e.addChild(b);b.addChildEscaped(t.getNoDataText());return e;};a._getShowMoreElement=function(t){var e=t._isVertical()?new H("div"):new H("li"),c="sapSuiteUiCommonsTimelineItemGetMoreButtonV",i="sap-icon://drill-down";if(t.getAxisOrientation()===T.Horizontal){i="sap-icon://process";c="sapSuiteUiCommonsTimelineItemGetMoreButtonH";}t._objects.register("moreButton",function(){var m=new sap.m.Button({icon:i,tooltip:r.getText("TIMELINE_MORE"),press:function(){t._loadMore();}});m.addEventDelegate({onAfterRendering:function(){this.$().attr("tabindex",0);}},m);return m;});e.addClass("sapSuiteUiCommonsTimelineItemGetMoreButton");e.addClass(c);e.setId(t.getId()+"-showMoreWrapper");e.setAttribute("data-sap-ui-fastnavgroup",true);e.setAttribute("tabindex",-1);e.addChild(t._objects.getMoreButton());return e;};a._addAccessibilityTags=function(e,t){var l=[t._objects.getAccessibilityTitle().getId(),t._objects.getFilterMessageText().getId()];e.setAttribute("role","list");e.addChild(t._objects.getAccessibilityTitle());e.setAttribute("aria-labelledby",l.join(" "));e.setAttribute("aria-live","assertive");};return a;},true);

/*!
 * ${copyright}
 */
sap.ui.define(['sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ushell/library','sap/ushell/resources'],function(C,P,l,r){"use strict";var V=C.extend("sap.ushell.ui.launchpad.ViewPortContainer",{metadata:{library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultState:{type:"sap.ushell.ui.launchpad.ViewPortState",group:"Appearance",defaultValue:sap.ushell.ui.launchpad.ViewPortState.Center}},aggregations:{leftViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"leftViewPort"},centerViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"centerViewPort"},rightViewPort:{type:"sap.ui.core.Control",multiple:true,singularName:"rightViewPort"}},associations:{initialCenterViewPort:{type:"sap.ui.core.Control",multiple:false},initialRightViewPort:{type:"sap.ui.core.Control",multiple:false},initialLeftViewPort:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{},afterSwitchState:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterSwitchStateAnimationFinished:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},to:{type:"sap.ui.core.Control"}}}}}});V.prototype.init=function(){this.bShiftCenterTransition=true;this.bShiftCenterTransitionEnabled=false;var c=sap.ui.getCore().getConfiguration();this.bIsRTL=!jQuery.isEmptyObject(c)&&c.getRTL?c.getRTL():false;this._oViewPortsNavigationHistory={leftViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},centerViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null},rightViewPort:{visitedControls:[],indexOfCurrentlyDisplayedControl:null}};this._states={Left:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"leftClass",isActive:true}]},Center:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"centerClass",isActive:true}]},Right:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"rightClass",isActive:true}]},LeftCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'leftViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backLeft",isActive:false}]},CenterLeft:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontLeft",isActive:true},{viewPortId:'leftViewPort',className:"back",isActive:false}]},RightCenter:{translateX:'',visibleViewPortsData:[{viewPortId:'rightViewPort',className:"front",isActive:true},{viewPortId:'centerViewPort',className:"backRight",isActive:false}]},CenterRight:{translateX:'',visibleViewPortsData:[{viewPortId:'centerViewPort',className:"frontRight",isActive:true},{viewPortId:'rightViewPort',className:"back",isActive:false}]}};sap.ui.Device.media.attachHandler(this._handleSizeChange.bind(this),null,sap.ui.Device.media.RANGESETS.SAP_STANDARD);sap.ui.Device.orientation.attachHandler(this._handleSizeChange,this);jQuery(window).bind("resize",function(){this._handleSizeChange();}.bind(this));};V.prototype.removeCenterViewPort=function(c,s){this.removeAggregation('centerViewPort',c,s);this._popFromViewPortNavigationHistory('centerViewPort',c);};V.prototype.setApplicationFullWidth=function(f){var j=jQuery("#"+this._sCurrentControlId);j.toggleClass("sapUShellApplicationContainerLimitedWidth",!f);};V.prototype._popFromViewPortNavigationHistory=function(v,c){var n=this._oViewPortsNavigationHistory[v],a=n?n.visitedControls:[],i=a.indexOf(c);if(a.length>0){n.visitedControls=a.slice(i+1,n.visitedControls.length);n.indexOfCurrentlyDisplayedControl=n.visitedControls.length-1;}};V.prototype.addCenterViewPort=function(c){jQuery.sap.measure.start("FLP:ViewPortContainer.addCenterViewPort","addCenterViewPort","FLP");var i=this._isInCenterViewPort(c);c.toggleStyleClass("hidden",true);c.addStyleClass("sapUshellViewPortItemSlideFrom");if(!i){this.addAggregation('centerViewPort',c,true);}if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}jQuery.sap.measure.end("FLP:ViewPortContainer.addCenterViewPort");};V.prototype.addLeftViewPort=function(c){c.toggleStyleClass("hidden",true);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'leftViewPort');}this.addAggregation('leftViewPort',c,true);};V.prototype.addRightViewPort=function(c){c.toggleStyleClass("hidden",true);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'rightViewPort');}this.addAggregation('rightViewPort',c,true);};V.prototype.setInitialCenterViewPort=function(c){var s=this._getCurrentlyDispalyedControl('centerViewPort'),i=this._isInCenterViewPort(c);c.addStyleClass("sapUshellViewPortItemSlideFrom");if(this.domRef&&!i){this.getRenderer().renderViewPortPart(c,this.domRef,'centerViewPort');}this._setCurrentlyDisplayedControl('centerViewPort',c);if(!i){this.addAggregation('centerViewPort',c,true);}this.setAssociation('initialCenterViewPort',c,true);if(s&&s!==c.getId()){this.fireAfterNavigate({fromId:s,from:sap.ui.getCore().byId(s),to:sap.ui.getCore().byId(c),toId:c.getId()});}};V.prototype.setInitialLeftViewPort=function(c){var s=this._getCurrentlyDispalyedControl('leftViewPort');this.addAggregation('leftViewPort',c,true);this._setCurrentlyDisplayedControl('leftViewPort',c);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'leftViewPort');}this.setAssociation('initialLeftViewPort',c,true);if(s&&s!==c.getId()){this.fireAfterNavigate({fromId:s,from:sap.ui.getCore().byId(s),to:sap.ui.getCore().byId(c),toId:c.getId()});}};V.prototype.setInitialRightViewPort=function(c){var s=this._getCurrentlyDispalyedControl('rightViewPort');this.addAggregation('rightViewPort',c,true);this._setCurrentlyDisplayedControl('rightViewPort',c);if(this.domRef){this.getRenderer().renderViewPortPart(c,this.domRef,'rightViewPort');}this.setAssociation('initialRightViewPort',c,true);if(s&&s!==c.getId()){this.fireAfterNavigate({fromId:s,from:sap.ui.getCore().byId(s),to:sap.ui.getCore().byId(c),toId:c.getId()});}};V.prototype._isInViewPort=function(v,c){var a=this.getAggregation(v),i=a?a.indexOf(c)>-1:false;return i;};V.prototype._isInCenterViewPort=function(c){return this._isInViewPort('centerViewPort',c);};V.prototype._isInLeftViewPort=function(c){return this._isInViewPort('leftViewPort',c);};V.prototype._isInRightViewPort=function(c){return this._isInViewPort('rightViewPort',c);};V.prototype.getCurrentCenterPage=function(){return this._getCurrentlyDispalyedControl('centerViewPort');};V.prototype.getCurrentRightPage=function(){return this._getCurrentlyDispalyedControl('rightViewPort');};V.prototype.getCurrentLeftPage=function(){return this._getCurrentlyDispalyedControl('leftViewPort');};V.prototype.navTo=function(v,c,t,d,T){jQuery.sap.measure.start("FLP:ShellController.navTo","navTo","FLP");var s=this._getCurrentlyDispalyedControl(v),a=this.getAggregation(v),b=a.some(function(e,i){if(e.getId()===c){return true;}});if(!b){jQuery.sap.log.error("ViewPort Container Error: Couldn't find target control");}else if(!s||s!==c){var o=sap.ui.getCore().byId(c);o.toggleStyleClass("hidden",false);var O=function(){this.fireAfterNavigate({toId:c,to:c?sap.ui.getCore().byId(c):null,fromId:s,from:s?sap.ui.getCore().byId(s):null});}.bind(this);this._setCurrentlyDisplayedControl(v,o,t,O);}jQuery.sap.measure.end("FLP:ShellController.navTo");};V.prototype._getCurrentlyDispalyedControl=function(v){var n=this._oViewPortsNavigationHistory[v];return n.visitedControls[n.indexOfCurrentlyDisplayedControl];};V.prototype._setCurrentlyDisplayedControl=function(v,c,t,o){jQuery.sap.measure.start("FLP:ViewPortContainer._setCurrentlyDisplayedControl","_setCurrentlyDisplayedControl","FLP");var n=this._oViewPortsNavigationHistory[v],a=n.visitedControls,s=this._getCurrentlyDispalyedControl(v),b=s?sap.ui.getCore().byId(s):null,T=(v==='centerViewPort'&&t)?t:'show';a.push(c.getId());n.indexOfCurrentlyDisplayedControl=jQuery.isNumeric(n.indexOfCurrentlyDisplayedControl)?n.indexOfCurrentlyDisplayedControl+1:0;this._handleViewPortTransition(v,T,c,b,o);if(v==="rightViewPort"&&T==="show"){this._setStateVisibility("rightViewPort","start");}this._sCurrentControlId=c.getId();this._updateTranslateXvalues();jQuery.sap.measure.end("FLP:ViewPortContainer._setCurrentlyDisplayedControl");};V.prototype._handleSizeChange=function(){this._updateTranslateXvalues();var t=this._getTranslateXValue(this.sCurrentState),c=this._getTranslateXValue("Center"),f=c.replace("-","");if(this.getDomRef()){jQuery(this.getDomRef()).css(this.bIsRTL?'right':'left',t);}var p=this.bIsRTL?'right':'left';if(jQuery(window).width()<600){jQuery(".sapUshellViewPortWrapper").css(p,f);}else{jQuery(".sapUshellViewPortWrapper").css(p,'');}this.fixViewportScrollbars();};V.prototype._applyTransitionToViewPort=function(j,t,T){var d=jQuery.Deferred();if(!j||t===undefined||T===undefined){d.resolve();return;}var o={'transform':"translateX("+T+") translateY(0) translateZ(0)",'transition':t?"transform "+t+"s":"initial"};if(t!==0){j.on('transitionend',function(e){if(e.target!==j.get(0)){return;}j.off('transitionend');d.resolve();});}else{d.resolve();}o.offsetHeight;j.css(o);if(sap.ui.Device.browser.internet_explorer){setTimeout(function(){j.trigger('transitionend');},300);}return d.promise();};V.prototype._updateTranslateXvalues=function(){var t=P,L,R;if(window.matchMedia('(min-width: 1920px)').matches){L=t.get('sapUshellLeftViewPortWidthLarge');R=t.get('sapUshellRightViewPortWidthXXXLarge');}else if(window.matchMedia('(min-width: 1600px)').matches){L=t.get('sapUshellLeftViewPortWidthMedium');R=t.get('sapUshellRightViewPortWidthXXLarge');}else if(window.matchMedia('(min-width: 1440px)').matches){L=t.get('sapUshellLeftViewPortWidthMedium');R=t.get('sapUshellRightViewPortWidthXLarge');}else if(window.matchMedia('(min-width: 1280px)').matches){L=t.get('sapUshellLeftViewPortWidthMedium');R=t.get('sapUshellRightViewPortWidthLarge');}else if(window.matchMedia('(min-width: 1024px)').matches){L=t.get('sapUshellLeftViewPortWidthSmall');R=t.get('sapUshellRightViewPortWidthMedium');}else if(window.matchMedia('(min-width: 601px)').matches){L=t.get('sapUshellLeftViewPortWidthSmall');R=t.get('sapUshellRightViewPortWidthSmall');}else if(window.matchMedia('(max-width : 600px)').matches){L=jQuery(window).width()/parseFloat(jQuery("body").css("font-size"));R=jQuery(window).width()/parseFloat(jQuery("body").css("font-size"));}this._updateStatesWithTranslateXvalues(L,R);};V.prototype._updateStatesWithTranslateXvalues=function(L,R){var t=0,i;if(L!==null&&R!==null){this._states.Center.translateX='-'+parseFloat(L)+'rem';this._states.LeftCenter.translateX="0";t=-1*(parseFloat(L)+parseFloat(R));this._states.RightCenter.translateX=t.toString()+'rem';i=this._calculateRightViewPortLeftPosotion();jQuery(".sapUshellViewPortRight").css("left",i);}};V.prototype._calculateRightViewPortLeftPosotion=function(){var L=0,w,i,b=jQuery(".sapUshellViewPortLeft").hasClass("sapUshellShellHidden");w=jQuery(window).width();jQuery(".sapUshellViewPortLeft").removeClass("sapUshellShellHidden");i=jQuery(".sapUshellViewPortLeft").width();if(b){jQuery(".sapUshellViewPortLeft").addClass("sapUshellShellHidden");}L=w+i;return L;};V.prototype._handleViewPortTransition=function(v,t,T,c,o){var a=this;if(v!=='centerViewPort'){return;}if(!c){t='show';}switch(t){case'show':T.toggleStyleClass("hidden",false);if(c){c.toggleStyleClass("hidden");}if(o){o();}break;case'slide':T.toggleStyleClass("hidden",false);var j=jQuery(T);a._applyTransitionToViewPort(j,0.4,"-100%").then(function(){return a._applyTransitionToViewPort(j,0,0);}).then(function(){c.toggleStyleClass("hidden",true);if(o){o();}});break;case'slideBack':var b=jQuery('#'+this.getCurrentCenterPage());a._applyTransitionToViewPort(b,0.7,"100%").then(function(){T.toggleStyleClass("hidden",false);}).then(function(){if(c){return a._applyTransitionToViewPort(b,0,0);}}).then(function(){c.toggleStyleClass("hidden",true);}).done(function(){c.toggleStyleClass("hidden",true);if(o){o();}});break;case'fade':var j=jQuery(T);if(c){var d=jQuery(c.getDomRef());d.fadeToggle(250);}j.fadeIn(500,o?o:null);break;}};V.prototype.onAfterRendering=function(){this.domRef=this.getDomRef();if(this.sCurrentState.indexOf("Center")==0){var a=this._states["Right"].visibleViewPortsData[0].viewPortId;jQuery(document.getElementById(a)).css("display","none");}this._handleSizeChange;};V.prototype.onBeforeRendering=function(){this._updateTranslateXvalues();};V.prototype.setDefaultState=function(s){this.setCurrentState(s);this.setProperty("defaultState",s,true);};V.prototype.endOfAnimationEventHandler=function(){var t=this._states[this.sTargetState].translateX,j=jQuery(this.domRef);this._setStateVisibility(this.sTargetState,"end");return this._applyTransitionToViewPort(j,0,0).then(function(){j.css(this.bIsRTL?'right':'left',t);}.bind(this));};V.prototype.switchState=function(s){var a,t=[],f=[],b;this.sTargetState=s;if(s!==this.sCurrentState){this._setStateVisibility(s,"start");var T=this._getTranslateXValue(s),v=this._states[this.sCurrentState].visibleViewPortsData,c=this._states[s].visibleViewPortsData,j=jQuery(this.domRef),d=this;if(s.indexOf("Right")==0){var g=c[0].viewPortId;jQuery(document.getElementById(g)).css("display","block");}v.forEach(function(e){j.find('#'+e.viewPortId).removeClass(e.className);});if(this.bIsRTL){T=(-1*parseInt(T,10)).toString()+"rem";}this._handleCenterViewPortAnimation(s);this._applyTransitionToViewPort(j,0.47,T).then(function(){return d.endOfAnimationEventHandler();}).then(function(){for(b=0;b<d._states[d.sCurrentState].visibleViewPortsData.length;b++){f.push(d._states[d.sCurrentState].visibleViewPortsData[b].viewPortId);}for(b=0;b<d._states[s].visibleViewPortsData.length;b++){t.push(d._states[s].visibleViewPortsData[b].viewPortId);}}).then(function(){var e=0,n;if(d.sCurrentState.indexOf("Center")==0){var g=d._states["Right"].visibleViewPortsData[0].viewPortId;jQuery(document.getElementById(g)).css("display","none");}for(n=0;n<f.length;n++){a=d.getAggregation(f[n]);for(e=0;e<a.length;e++){if(a[e].onViewStateHide){a[e].onViewStateHide();}}}d.fixViewportScrollbars();for(n=0;n<t.length;n++){a=d.getAggregation(t[n]);for(e=0;e<a.length;e++){if(a[e].onViewStateShow){a[e].onViewStateShow();}}}c.forEach(function(o){j.find('#'+o.viewPortId).addClass(o.className);});d.fireAfterSwitchStateAnimationFinished({to:s,from:d.sCurrentState});});jQuery('#'+v[0].viewPortId).removeClass("active");var S=function(){this.switchState('Center');}.bind(this);var h=function(e){var n=parseInt(window.getComputedStyle(e.currentTarget).width,10);if(e.offsetX>n){this.switchState('Center');}}.bind(this);var i=jQuery(this.domRef).find('.sapUshellViewPortWrapper');var k=jQuery(this.domRef).find('.sapUshellViewPortLeft');var m=jQuery(this.domRef).find('.sapUshellViewPortCursorPointerArea');if(s!=='Center'){if(s==='LeftCenter'){m.on('click',S);}else if(s==='RightCenter'){i.on('click',S);i.addClass('sapUshellViewPortWrapperClickable');}k.on('click',h);}else{if(this.sCurrentState==='LeftCenter'){m.off('click',h);}else if(this.sCurrentState==='RightCenter'){i.off('click',S);i.removeClass('sapUshellViewPortWrapperClickable');}k.off('click',h);}this.setCurrentState(s);}};V.prototype._setStateVisibility=function(s,t){var e=["leftViewPort","rightViewPort"],v;v=s!=="Center";if((t==="start"&&v)||(t==="end"&&!v)){for(var i=0;i<e.length;i++){jQuery("#"+e[i]).toggleClass("sapUshellShellHidden",!v);}}};V.prototype.fixViewportScrollbars=function(){var a=this.getCurrentState(),v=this._states[a].visibleViewPortsData;jQuery('#'+v[0].viewPortId).css("height","100%");if(v[0].viewPortId==="leftViewPort"){if(this.bIsRTL){var p=window.innerWidth-jQuery("#leftViewPort").width();jQuery("#leftViewPort").css("padding-left",p);jQuery("#viewPortCursorPointerArea").css("width",p);jQuery("#viewPortCursorPointerArea").css("left","0");}else{var b=window.innerWidth-jQuery("#leftViewPort").width();jQuery("#leftViewPort").css("padding-right",b);jQuery("#viewPortCursorPointerArea").css("width",b);jQuery("#viewPortCursorPointerArea").css("right","0");}}jQuery('#'+v[0].viewPortId).addClass("active");};V.prototype.setCurrentState=function(s){var f=this.sCurrentState;this.sCurrentState=s;this.fireAfterSwitchState({to:s,from:f});};V.prototype.getCurrentState=function(){return this.sCurrentState;};V.prototype.getViewPortControl=function(v,d){var a=this.getAggregation(v),i;if(a){for(i=0;i<a.length;i++){if(a[i]&&(a[i].getId()===d)){return a[i];}}}return null;};V.prototype.getViewPort=function(p){var a=this.getCenterViewPort(),i;for(i=0;i<a.length;i++){if(a[i]&&(a[i].getId()===p)){return a[i];}}return null;};V.prototype._handleCenterViewPortAnimation=function(n){var m=this.getModel();if(m){var a=m.getProperty('/animationMode');var a=a||'full';if(a!=='full'){return;}}var c=this._getCenterViewPortJQueryObject(),s=this._shiftCenterTransition();if(this.sCurrentState==="Center"){if(n==="RightCenter"){if(s===true){c.addClass('sapUshellScaledShiftedCenterWhenInRightViewPort');}else{c.addClass('sapUshellScaledCenterWhenInRightViewPort');}}else if(n==="LeftCenter"){c.addClass('sapUshellScaledCenterWhenInLeftViewPort');}}else if(n==="Center"){if(this.sCurrentState==="RightCenter"){c.removeClass('sapUshellScaledCenterWhenInRightViewPort');c.removeClass('sapUshellScaledShiftedCenterWhenInRightViewPort');}else if(this.sCurrentState==="LeftCenter"){c.removeClass('sapUshellScaledCenterWhenInLeftViewPort');}}else if((this.sCurrentState==="LeftCenter")&&(n==="RightCenter")){if(s===true){c.addClass('sapUshellScaledShiftedCenterWhenInRightViewPort');}else{c.addClass('sapUshellScaledCenterWhenInRightViewPort');}c.removeClass('sapUshellScaledCenterWhenInLeftViewPort');}else if((this.sCurrentState==="RightCenter")&&(n==="LeftCenter")){c.addClass('sapUshellScaledCenterWhenInLeftViewPort');c.removeClass('sapUshellScaledCenterWhenInRightViewPort');c.removeClass('sapUshellScaledShiftedCenterWhenInRightViewPort');}};V.prototype.shiftCenterTransitionEnabled=function(e){this.bShiftCenterTransitionEnabled=e;};V.prototype.shiftCenterTransition=function(s){this.bShiftCenterTransition=s;};V.prototype._shiftCenterTransition=function(){return sap.ushell.Container.getService("Notifications").isEnabled()&&this.bShiftCenterTransitionEnabled&&this.bShiftCenterTransition;};V.prototype._getCenterViewPortJQueryObject=function(){var j=jQuery(this.domRef),c=this._states.Center.visibleViewPortsData[0].viewPortId,a=j.find('#'+c);return a;};V.prototype._getTranslateXValue=function(t,g){var T=this._states[t].translateX,c,i,a;if(g!==undefined){c=this._states[g].translateX;}else{c=this._states[this.sCurrentState].translateX;}a=parseInt(c,10);i=parseInt(T,10);if(!g&&(t===this.sCurrentState)){return T;}return(i-a).toString()+"rem";};V.transitions=V.transitions||{};return V;});

(function(g){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchLogger');var m=sap.ushell.renderers.fiori2.search.SearchLogger={};jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchConfiguration');var S=sap.ushell.renderers.fiori2.search.SearchConfiguration;m.NavigationEvent=function(){this.init.apply(this,arguments);};m.NavigationEvent.prototype={init:function(p){var c=S.getInstance();this.sina=c.getSina();},_createUserHistoryEntry:function(t){function a(p){var n=p;for(var i=0,q=n.length;i<q;i++){var r=n[i];if(r.indexOf("sap-system")!==-1){var v=r.split("=");return{"System":v[1].slice(4,7),"Client":v[1].slice(8,-1)};}}}function b(H){return H.split("-")[0];}function c(H){return H.split("-")[1].split("&")[0];}function d(p){var n=p;var q=[];for(var i=0,r=n.length;i<r;i++){var v=n[i];if(v.indexOf("sap-system")!==-1){continue;}var w=v.split("=")[0];var x=v.split("=")[1];q.push({"Name":w,Value:x});}return q;}var u={"NavigationEventList":[{"SourceApplication":{"SemanticObjectType":"","Intent":"","ParameterList":[]}},{"TargetApplication":{"SemanticObjectType":"","Intent":"","ParameterList":[]}}]};var h=window.hasher.getHashAsArray();var s=b(h[0]);u.NavigationEventList[0].SourceApplication.SemanticObjectType=s;var e=c(h[0]);u.NavigationEventList[0].SourceApplication.Intent=e;var f=d(h[1].split("&"));u.NavigationEventList[0].SourceApplication.ParameterList=f;h=t.split("?");var j=b(h[0]).split("#")[1];u.NavigationEventList[1].TargetApplication.SemanticObjectType=j;var k=c(h[0]);u.NavigationEventList[1].TargetApplication.Intent=k;var l=d(h[1].split("&"));u.NavigationEventList[1].TargetApplication.ParameterList=l;var o=a(h[1].split("&"));u.NavigationEventList[1].TargetApplication=jQuery.extend(u.NavigationEventList[1].TargetApplication,o);return u;},addUserHistoryEntry:function(t){if(!t){return;}if(t.indexOf("#")===-1){return;}var s=this.sina.getSystem().getServices();if(s.PersonalizedSearch&&s.PersonalizedSearch.capabilities&&s.PersonalizedSearch.capabilities.SetUserStatus){var u=this._createUserHistoryEntry(t);this.sina.addUserHistoryEntry(u).done(function(d){}).fail(function(e){});}}};}(window));

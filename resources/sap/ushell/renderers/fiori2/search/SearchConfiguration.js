(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchConfiguration');var D='sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandler';jQuery.sap.require(D);var a=jQuery.sap.getObject(D);var u={multiSelect:{type:'bool'},odataProvider:{type:'bool'},searchBusinessObjects:{type:'bool'},charts:{type:'bool'},maps:{type:'bool'},newpie:{type:'bool'},personalizationStorage:{type:'string'}};var S=sap.ushell.renderers.fiori2.search.SearchConfiguration=function(){this.init.apply(this,arguments);};S.prototype={init:function(p){try{var c=window['sap-ushell-config'].renderers.fiori2.componentData.config.esearch;jQuery.extend(true,this,c);}catch(e){}this.handleOutdatedConfigurationParameters();this.setDefaults();this.readUrlParameters();this.setModulePaths();},setModulePaths:function(){if(!this.modulePaths){return;}for(var i=0;i<this.modulePaths.length;++i){var m=this.modulePaths[i];jQuery.sap.registerModulePath(m.moduleName,m.urlPrefix);}},handleOutdatedConfigurationParameters:function(){try{var c=window['sap-ushell-config'].renderers.fiori2.componentData.config;if(c.searchBusinessObjects!==undefined&&this.searchBusinessObjects===undefined){if(c.searchBusinessObjects==='hidden'||c.searchBusinessObjects===false){this.searchBusinessObjects=false;}else{this.searchBusinessObjects=true;}}if(c.enableSearch!==undefined&&this.enableSearch===undefined){this.enableSearch=c.enableSearch;}}catch(e){}},setDefaults:function(){if(this.searchBusinessObjects===undefined){this.searchBusinessObjects=true;}if(this.odataProvider===undefined){this.odataProvider=false;}if(this.multiSelect===undefined){this.multiSelect=true;}if(this.charts===undefined){this.charts=true;}if(this.maps===undefined){this.maps=false;}if(this.newpie===undefined){this.newpie=false;}if(this.dataSources===undefined){this.dataSources={};}if(this.enableSearch===undefined){this.enableSearch=true;}if(this.personalizationStorage===undefined){this.personalizationStorage='auto';}},readUrlParameters:function(){var p=this.parseUrlParameters();for(var b in p){if(b==='demoMode'){this.searchBusinessObjects=true;this.enableSearch=true;continue;}var c=u[b];if(!c){continue;}var v=p[b];switch(c.type){case'bool':v=(v==='true'||v==='');break;default:}this[b]=v;}},parseUrlParameters:function(){var U=sap.ushell.Container.getService("URLParsing");var p=U.parseParameters(window.location.search);var n={};for(var k in p){var v=p[k];if(v.length!==1){continue;}v=v[0];if(typeof v!=='string'){continue;}n[k]=v;}return n;},getDataSourceConfig:function(d){var c;var b=d.semanticObjectType;if(!b&&d.semanticObjectTypes&&d.semanticObjectTypes.length==1){b=d.semanticObjectTypes[0];}if(this.semanticObjects&&b){c=this.semanticObjects[b];}if(!c&&d.semanticObjectType==='fileprocessorurl'){try{c={searchResultListItem:'sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument'};jQuery.sap.require(c.searchResultListItem);c.searchResultListItemControl=jQuery.sap.getObject(c.searchResultListItem);}catch(e){c=undefined;}}if(!c){if(!this._defaultConfig){this._defaultConfig={searchResultListItemContent:undefined,searchResultListItemContentControl:undefined,searchResultListSelectionHandler:D,searchResultListSelectionHandlerControl:a};}c=this._defaultConfig;if(b){this.semanticObjects=this.semanticObjects||[];this.semanticObjects[b]=c;}}if(c.searchResultListItemContent&&!c.searchResultListItemContentControl){try{jQuery.sap.require(c.searchResultListItemContent);c.searchResultListItemContentControl=jQuery.sap.getObject(c.searchResultListItemContent);}catch(e){}}c.searchResultListSelectionHandler=c.searchResultListSelectionHandler||D;try{if(!c.searchResultListSelectionHandlerControl){jQuery.sap.require(c.searchResultListSelectionHandler);c.searchResultListSelectionHandlerControl=jQuery.sap.getObject(c.searchResultListSelectionHandler);}}catch(e){}return c;},isLaunchpad:function(){try{return!!sap.ushell.Container.getService("CrossApplicationNavigation");}catch(e){return false;}},getSina:function(){jQuery.sap.require("sap.ushell.renderers.fiori2.search.esh.api.release.sina");if(!this.isSinaRegistered){if(!this.odataProvider&&this.isLaunchpad()){sap.ushell.Container.addRemoteSystem(new sap.ushell.System({alias:"ENTERPRISE_SEARCH",platform:"abap",baseUrl:"/ENTERPRISE_SEARCH"}));this.sina=window.sina.getSina();}else{this.sina=window.sina.getSina({'impl_type':"odata2"});}}this.isSinaRegistered=true;return this.sina;}};var s;S.getInstance=function(){if(s){return s}s=new S();return s;}})();

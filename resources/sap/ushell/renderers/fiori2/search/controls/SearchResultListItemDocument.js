(function(){"use strict";jQuery.sap.require('sap.ushell.renderers.fiori2.search.controls.SearchResultListItem');jQuery.sap.require('sap.ushell.renderers.fiori2.search.controls.SearchText');var S=sap.ushell.renderers.fiori2.search.controls.SearchText;var n='\u2013';sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument",{renderer:function(r,c){c._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var a=t.getTitleUrl();var b=t.getAggregation("_titleLink");b.setHref(a);b.setText(t.getTitle());if(a.length==0){b.setEnabled(false);}r.renderControl(b);var c=t.getAggregation("_typeText");c.setText(t.getType());r.renderControl(c);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderThumbnailContainer:function(r){var t=this;if(!t.getImageUrl()){return;}r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer">');r.write('<img class="sapUshellSearchResultListItemDoc-Thumbnail" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write('</div>');},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailSnippetContainer">');this._renderThumbnailContainer(r);this._renderSnippetContainer(r);r.write('</div>');},_renderSnippetContainer:function(r){var a=this.getAttributes();for(var i=0;i<a.length;i++){var b=a[i];if(b.longtext){var v=new S();v.setText(b.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,a){var t=this;var b;var l;var v;var c;var i=0,j=0;var d=8;if(t.getImageUrl()){d--;}t.destroyAggregation("_attributeValues");for(;j<d&&i<a.length;i++){b=a[i];if(b.isTitle||b.longtext){continue;}l=b.name;v=b.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}c=new S();c.setText(v);c.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");r.renderControl(c);t.addAggregation("_attributeValues",c,true);j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var a=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var b=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var c=false;if(b.css("display")==="none"){b.css("display","block");c=true;}var d=a.height();var e=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(c){b.css("display","");}var f=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var j=$(this);if(j.css("order")>2){f.push(this);}});var g=200;var h=g/10;var i={resultListItem:r,attributesExpandContainer:a,currentHeight:d,expandedHeight:e,elementsToFadeInOrOut:f,expandAnimationDuration:g,fadeInOrOutAnimationDuration:h,relatedObjectsToolbar:b};return i;},hideDetails:function(a){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var b=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var d=e.attributesExpandContainer.animate({"height":b},{"duration":e.expandAnimationDuration,"progress":function(c,p,f){if(!s&&f<=e.fadeInOrOutAnimationDuration){s=true;var g=$(e.elementsToFadeInOrOut).animate({"opacity":0},e.fadeInOrOutAnimationDuration).promise();jQuery.when(d,g).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var h=t.getAggregation("_expandButton");h.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));h.setIcon(i);h.rerender();});}}}).promise();}});})();

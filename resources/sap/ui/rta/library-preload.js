/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/rta/RuntimeAuthoring',['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/rta/ui/ToolsMenu','sap/ui/dt/ElementUtil','sap/ui/dt/DesignTime','sap/ui/dt/OverlayRegistry','sap/ui/dt/Overlay','sap/ui/rta/command/Stack','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/LREPSerializer','sap/ui/rta/plugin/Rename','sap/ui/rta/plugin/DragDrop','sap/ui/rta/plugin/RTAElementMover','sap/ui/rta/plugin/CutPaste','sap/ui/rta/plugin/Remove','sap/ui/rta/plugin/CreateContainer','sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin','sap/ui/rta/plugin/additionalElements/AddElementsDialog','sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer','sap/ui/rta/plugin/Combine','sap/ui/rta/plugin/Split','sap/ui/rta/plugin/Selection','sap/ui/rta/plugin/MultiSelection','sap/ui/rta/plugin/Settings','sap/ui/dt/plugin/ContextMenu','sap/ui/dt/plugin/TabHandling','sap/ui/fl/FlexControllerFactory','sap/ui/rta/ui/SettingsDialog','./Utils','sap/ui/fl/transport/Transports','sap/ui/fl/transport/TransportSelection','sap/ui/fl/Utils','sap/ui/fl/registry/Settings','sap/m/MessageBox','sap/m/MessageToast'],function(q,M,T,E,D,O,a,C,b,L,R,c,d,e,f,g,A,h,i,j,S,k,l,m,n,o,F,p,U,r,s,t,u,v,w){"use strict";
var x=M.extend("sap.ui.rta.RuntimeAuthoring",{
metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"customFieldUrl":"string","showCreateCustomField":"boolean","showToolbars":{type:"boolean",defaultValue:true},"triggeredFromDialog":{type:"boolean",defaultValue:false},"showSettingsDialog":{type:"boolean",defaultValue:true},"showWindowUnloadDialog":{type:"boolean",defaultValue:true},"commandStack":{type:"sap.ui.rta.command.Stack"},"plugins":{type:"any",defaultValue:{}}},events:{"start":{},"stop":{},"failed":{},"selectionChange":{parameters:{selection:{type:"sap.ui.dt.Overlay[]"}}},"undoRedoStackModified":{}}},
_sAppTitle:null
});
x.prototype.getDefaultPlugins=function(){if(!this._mDefaultPlugins){this._mDefaultPlugins={};var X=new k();this._mDefaultPlugins["selection"]=X;var Y=new d();Y.setCommandFactory(b);var Z=new c({elementMover:Y,commandFactory:b}).attachElementModified(this._handleElementModified,this);Z.attachDragStarted(this._handleStopCutPaste,this);this._mDefaultPlugins["dragDrop"]=Z;var $=new e({elementMover:Y,commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["cutPaste"]=$;var _=new f({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["remove"]=_;var a1=new A({commandFactory:b,analyzer:i,dialog:new h()}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["additionalElements"]=a1;var b1=new R({commandFactory:b}).attachElementModified(this._handleElementModified,this);b1.attachEditable(this._handleStopCutPaste,this);this._mDefaultPlugins["rename"]=b1;var c1=new l({multiSelectionTypes:["sap.ui.comp.smartform.GroupElement"]});this._mDefaultPlugins["multiSelection"]=c1;var d1=new m({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["settings"]=d1;var e1=new g({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["createContainer"]=e1;var f1=new j({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["combine"]=f1;var g1=new S({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._mDefaultPlugins["split"]=g1;var h1=new n();this._mDefaultPlugins["contextMenu"]=h1;var i1=new o();this._mDefaultPlugins["tabHandling"]=i1;}return q.extend({},this._mDefaultPlugins);};
x.prototype._destroyDefaultPlugins=function(X){for(var Y in this._mDefaultPlugins){var Z=this._mDefaultPlugins[Y];if(Z&&!Z.bIsDestroyed){if(!X||X[Y]!==Z){Z.destroy();}}}if(!X){this._mDefaultPlugins=null;}};
x.prototype.init=function(){this._onCommandStackModified=this._onStackModified.bind(this);};
x.prototype.setPlugins=function(X){if(this._oDesignTime){throw new Error('Cannot replace plugins: runtime authoring already started');}this.setProperty("plugins",X);};
x.prototype.start=function(){this._aPopups=[];this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._aSupportedControls=["sap.ui.comp.smartform.Group","sap.uxap.ObjectPageSection","sap.uxap.ObjectPageLayout"];if(!this._oDesignTime){this._oRootControl=sap.ui.getCore().byId(this.getRootControl());if(!this.getPlugins()||!Object.keys(this.getPlugins()).length){this.setPlugins(this.getDefaultPlugins());}this._destroyDefaultPlugins(this.getPlugins());if(this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(this.getCommandStack());}this._buildContextMenu();var X=Object.keys(this.getPlugins());var Y=X.map(function($){return this.getPlugins()[$];},this);q.sap.measure.start("rta.dt.startup","Measurement of RTA: DesignTime start up");this._oDesignTime=new D({rootElements:[this._oRootControl],plugins:Y});q(a.getOverlayContainer()).addClass("sapUiRta");this._oDesignTime.attachSelectionChange(function($){this.fireSelectionChange({selection:$.getParameter("selection")});},this);this._oDesignTime.attachEventOnce("synced",function(){this.fireStart();q.sap.measure.end("rta.dt.startup","Measurement of RTA: DesignTime start up");},this);this._oDesignTime.attachEventOnce("syncFailed",function(){this.fireFailed();},this);this.$document=q(document);this.fnKeyDown=this._onKeyDown.bind(this);this.$document.on("keydown",this.fnKeyDown);}if(this.getShowToolbars()){this._createToolsMenu();var Z={"onAfterRendering":function(){this._oToolsMenu._oToolBar.focus();this._oToolsMenu._oToolBar.removeEventDelegate(Z,this);}};this._oToolsMenu._oToolBar.addEventDelegate(Z,this);this._oToolsMenu.show();}this._oldUnloadHandler=window.onbeforeunload;window.onbeforeunload=this._onUnload.bind(this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);};
var y=function(X){var Y=X.message||X.status||X;var Z=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");q.sap.log.error("Failed to transfer runtime adaptation changes to layered repository",Y);q.sap.require("sap.m.MessageBox");var $=Z.getText("MSG_LREP_TRANSFER_ERROR")+"\n"+Z.getText("MSG_ERROR_REASON",Y);sap.m.MessageBox.error($);};
x.prototype._onAppClosed=function(){this.stop(true);};
x.prototype.setCommandStack=function(X){var Y=this.getProperty("commandStack");if(Y){Y.detachModified(this._onCommandStackModified);}if(this._oInternalCommandStack){this._oInternalCommandStack.destroy();delete this._oInternalCommandStack;}var Z=this.setProperty("commandStack",X);if(X){X.attachModified(this._onCommandStackModified);}if(this.getPlugins()&&this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(X);}return Z;};
x.prototype.getCommandStack=function(){var X=this.getProperty("commandStack");if(!X){X=new C();this._oInternalCommandStack=X;this.setCommandStack(X);}return X;};
x.prototype._onStackModified=function(){var X=this.getCommandStack();var Y=X.canUndo();var Z=X.canRedo();var $=U.getUshellContainer();if(this.getShowToolbars()){this._oToolsMenu.adaptUndoRedoEnablement(Y,Z);this._oToolsMenu.adaptTransportEnablement(this._bChangesExist||Y);this._oToolsMenu.adaptRestoreEnablement(this._bChangesExist||Y);}this.fireUndoRedoStackModified();if($){if(Y){$.setDirtyFlag(true);}else{$.setDirtyFlag(false);}}};
x.prototype._closeToolBars=function(){if(this.getShowToolbars()){return this._oToolsMenu.hide();}else{return Promise.resolve();}};
x.prototype.getSelection=function(){if(this._oDesignTime){return this._oDesignTime.getSelection();}else{return[];}};
x.prototype.stop=function(X){return((X)?Promise.resolve():this._serializeToLrep()).then(this._closeToolBars.bind(this)).then(function(){this.exit();this.fireStop();}.bind(this))['catch'](y);};
x.prototype.restore=function(){this._onRestore();};
x.prototype.transport=function(){this._onTransport();};
x.prototype.undo=function(){this._onUndo();};
x.prototype.redo=function(){this._onRedo();};
x.prototype.canUndo=function(){return this.getCommandStack().canUndo();};
x.prototype.canRedo=function(){return this.getCommandStack().canRedo();};
x.prototype._onKeyDown=function(X){var Y=sap.ui.Device.os.macintosh?X.metaKey:X.ctrlKey;if((X.keyCode===q.sap.KeyCodes.Z)&&(X.shiftKey===false)&&(X.altKey===false)&&(Y===true)){this._onUndo();X.stopPropagation();}else if((X.keyCode===q.sap.KeyCodes.Z)&&(X.shiftKey===true)&&(X.altKey===false)&&(Y===true)){this._onRedo();X.stopPropagation();}};
x.prototype.handleEvent=function(X){if(X.type==="keydown"){this._onKeyDown(X);}};
x.prototype._onUnload=function(){var X=this.getCommandStack();var Y=X.canUndo()||X.canRedo();if(Y&&this.getShowWindowUnloadDialog()){var Z=this._oTextResources.getText("MSG_UNSAVED_CHANGES");return Z;}else{window.onbeforeunload=this._oldUnloadHandler;}};
x.prototype._serializeToLrep=function(){var X=new L({commandStack:this.getCommandStack(),rootControl:this.getRootControl()});return X.saveCommands();};
x.prototype._onUndo=function(){this._handleStopCutPaste();this.getCommandStack().undo();};
x.prototype._onRedo=function(){this._handleStopCutPaste();this.getCommandStack().redo();};
x.prototype._createToolsMenu=function(){if(!this._oToolsMenu){this._oToolsMenu=new T();this._oToolsMenu.setRootControl(this._oRootControl);this._oToolsMenu.createToolbar(this.getTriggeredFromDialog());this._checkChangesExist().then(function(X){this._bChangesExist=X;this._oToolsMenu.adaptTransportEnablement(X);this._oToolsMenu.adaptRestoreEnablement(X);}.bind(this));this._oToolsMenu.attachToolbarClose(this.stop.bind(this,false),this);this._oToolsMenu.attachTransport(this._onTransport,this);this._oToolsMenu.attachRestore(this._onRestore,this);this._oToolsMenu.attachUndo(this._onUndo,this);this._oToolsMenu.attachRedo(this._onRedo,this);}};
x.prototype.exit=function(){if(this._oDesignTime){q(a.getOverlayContainer()).removeClass("sapUiRta");this._oDesignTime.destroy();this._oDesignTime=null;this.$document.off("keydown",this.fnKeyDown);this._destroyDefaultPlugins();this.setPlugins(null);}if(this._oToolsMenu){this._oToolsMenu.destroy();this._oToolsMenu=null;}this.setCommandStack(null);var X=U.getUshellContainer();if(X){X.setDirtyFlag(false);}window.onbeforeunload=this._oldUnloadHandler;};
x.prototype._onTransport=function(){var X=function(Y){if(Y.message!=='createAndApply failed'){t.log.error("transport error"+Y);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_ERROR","MSG_TRANSPORT_ERROR",Y);}}.bind(this);this._handleStopCutPaste();return this._openSelection().then(this._checkTransportInfo).then(function(Y){if(Y){var Z=F.createForControl(this._oRootControl);return this._serializeToLrep().then(function(){return Z.getComponentChanges().then(function($){if($.length>0){return this._createAndApplyChanges($,Z).then(this._transportAllLocalChanges.bind(this,Y,Z))['catch'](X);}}.bind(this));}.bind(this))['catch'](y);}}.bind(this));};
x.prototype._checkTransportInfo=function(X){if(X&&X.transport&&X.packageName!=="$TMP"){return X;}else{return false;}};
x.prototype._openSelection=function(){return new s().openTransportSelection(null,this._oRootControl);};
x.prototype._createAndApplyChanges=function(X,Y){return Promise.resolve().then(function(){function Z($){return $&&$.selector&&$.selector.id;}X.filter(Z).forEach(function($){var _=sap.ui.getCore().byId($.selector.id);Y.createAndApplyChange($,_);});})['catch'](function(Z){t.log.error("Create and apply error: "+Z);return Z;}).then(function(Z){return Y.saveAll().then(function(){if(Z){throw Z;}});})['catch'](function(Z){t.log.error("Create and apply and/or save error: "+Z);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_APPLYSAVE_ERROR","MSG_TRANSPORT_APPLYSAVE_ERROR",Z);}.bind(this));};
x.prototype._deleteChanges=function(){var X=new s();var Y=F.createForControl(this._oRootControl);Y.getComponentChanges().then(function(Z){return u.getInstance(t.getComponentClassName(this._oRootControl)).then(function($){if(!$.isProductiveSystem()&&!$.hasMergeErrorOccured()){return X.setTransports(Z,this._oRootControl);}}.bind(this)).then(function(){return Y.discardChanges(Z);}).then(function(){return window.location.reload();});}.bind(this))["catch"](function(Z){return this._showMessage(v.Icon.ERROR,"HEADER_RESTORE_FAILED","MSG_RESTORE_FAILED",Z);}.bind(this));};
x.prototype._showMessage=function(X,Y,Z,$){var _=this._oTextResources.getText(Z,$?[$.message||$]:undefined);var a1=this._oTextResources.getText(Y);return new Promise(function(b1){v.show(_,{icon:X,title:a1,onClose:b1});});};
x.prototype._showMessageToast=function(X){var Y=this._oTextResources.getText(X);w.show(Y);};
x.needsRestart=function(){var X=!!window.localStorage.getItem("sap.ui.rta.restart");return X;};
x.enableRestart=function(){window.localStorage.setItem("sap.ui.rta.restart",true);};
x.disableRestart=function(){window.localStorage.removeItem("sap.ui.rta.restart");};
x.prototype._onRestore=function(){var X=this._oTextResources.getText("FORM_PERS_RESET_MESSAGE");var Y=this._oTextResources.getText("FORM_PERS_RESET_TITLE");var Z=function($){if($==="OK"){this.getCommandStack().removeAllCommands();x.enableRestart();this._deleteChanges();}}.bind(this);this._handleStopCutPaste();v.confirm(X,{icon:v.Icon.WARNING,title:Y,onClose:Z});};
x.prototype._transportAllLocalChanges=function(X,Y){return Y.getComponentChanges().then(function(Z){var $=new r();var _=$._convertToChangeTransportData(Z);var a1={};a1.package=X.packageName;a1.transportId=X.transport;a1.changeIds=_;return $.makeChangesTransportable(a1).then(function(){Z.forEach(function(b1){if(b1.getPackage()==='$TMP'){var c1=b1.getDefinition();c1.packageName=X.packageName;b1.setResponse(c1);}});}).then(function(){this._showMessageToast("MSG_TRANSPORT_SUCCESS");}.bind(this));}.bind(this));};
x.prototype._isEqualParentInfo=function(X,Y){var Z=!!X&&!!Y;if(Z&&(X.parent&&Y.parent)){Z=X.parent.getId()===Y.parent.getId();}if(Z&&(X.index||Y.index)){Z=X.index===Y.index;}if(Z&&(X.aggregation||Y.aggregation)){Z=X.aggregation===Y.aggregation;}return Z;};
x.prototype._handleElementModified=function(X){this._handleStopCutPaste();var Y=X.getParameter("command");if(Y instanceof sap.ui.rta.command.BaseCommand){this.getCommandStack().pushAndExecute(Y);}};
x.prototype._handleRemoveElement=function(X){this.getPlugins()["remove"].removeElement(X);};
x.prototype._openSettingsDialog=function(X){var Y=(X.mParameters)?X.getParameter("selectedOverlays"):X;var Z=Y[0].getElementInstance();this._handleStopCutPaste();if(!this._oSettingsDialog){this._oSettingsDialog=new p();}this._oSettingsDialog.setCommandStack(this.getCommandStack());this._oSettingsDialog.open(Z);};
var z=function(X){return this._oDesignTime.getSelection().length<2;};var I=function(X){return X.getMovable();};var B=function(X){return this.getPlugins()["remove"].isRemoveAvailable(X);};var G=function(X){return this.getPlugins()["remove"].isRemoveEnabled(X);};var H=function(X){return this.getPlugins()["rename"].isRenameAvailable(X);};var J=function(X){return this.getPlugins()["rename"].isRenameEnabled(X);};var K=function(X){return this.getPlugins()["settings"].isSettingsAvailable(X);};var N=function(X){return this.getPlugins()["settings"].isSettingsEnabled(X);};var P=function(X){return this.getPlugins()["combine"].isCombineAvailable(X);};var Q=function(X){return this.getPlugins()["combine"].isCombineEnabled(X);};var V=function(X){return this.getPlugins()["split"].isSplitAvailable(X);};var W=function(X){return this.getPlugins()["split"].isSplitEnabled(X);};
x.prototype._buildContextMenu=function(){var X=this.getPlugins()["contextMenu"];if(!X){return;}var Y=this.getPlugins()["additionalElements"];var Z=this.getPlugins()["createContainer"];if(this.getPlugins()["rename"]){X.addMenuItem({id:"CTX_RENAME_LABEL",text:this._oTextResources.getText("CTX_RENAME"),handler:this._handleRename.bind(this),available:H.bind(this),enabled:function($){return(z.call(this,$)&&J.call(this,$));}.bind(this)});}if(Y){X.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_SIBLING",text:Y.getContextMenuTitle.bind(Y,true),handler:Y.showAvailableElements.bind(Y,true),available:Y.isAvailable.bind(Y,true),enabled:function($){return z.call(this,$)&&Y.isEnabled(true,$);}.bind(this)});X.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_CHILD",text:Y.getContextMenuTitle.bind(Y,false),handler:Y.showAvailableElements.bind(Y,false),available:Y.isAvailable.bind(Y,false),enabled:function($){return z.call(this,$)&&Y.isEnabled(false,$);}.bind(this)});}if(Z){X.addMenuItem({id:"CTX_CREATE_CHILD_CONTAINER",text:Z.getCreateContainerText.bind(Z,false),handler:this._createContainer.bind(this,false),available:Z.isCreateAvailable.bind(Z,false),enabled:Z.isCreateEnabled.bind(Z,false)});X.addMenuItem({id:"CTX_CREATE_SIBLING_CONTAINER",text:Z.getCreateContainerText.bind(Z,true),handler:this._createContainer.bind(this,true),available:Z.isCreateAvailable.bind(Z,true),enabled:Z.isCreateEnabled.bind(Z,true)});}if(this.getPlugins()["remove"]){X.addMenuItem({id:"CTX_REMOVE",text:this._oTextResources.getText("CTX_REMOVE"),handler:this._handleRemoveElement.bind(this),available:B.bind(this),enabled:G.bind(this)});}X.addMenuItem({id:"CTX_CUT",text:this._oTextResources.getText("CTX_CUT"),handler:this._handleCutElement.bind(this),available:I,enabled:function(){return this._oDesignTime.getSelection().length===1;}.bind(this)});if(this.getPlugins()["cutPaste"]){X.addMenuItem({id:"CTX_PASTE",text:this._oTextResources.getText("CTX_PASTE"),handler:this._handlePasteElement.bind(this),available:I,enabled:function($){return this.getPlugins()["cutPaste"].isElementPasteable($);}.bind(this)});}X.addMenuItem({id:"CTX_GROUP_FIELDS",text:this._oTextResources.getText("CTX_GROUP_FIELDS"),handler:this._handleCombineElements.bind(this),available:P.bind(this),enabled:Q.bind(this)});X.addMenuItem({id:"CTX_UNGROUP_FIELDS",text:this._oTextResources.getText("CTX_UNGROUP_FIELDS"),handler:this._handleSplitElements.bind(this),available:V.bind(this),enabled:W.bind(this)});if(this.getPlugins()["settings"]){X.addMenuItem({id:"CTX_SETTINGS",text:this._oTextResources.getText("CTX_SETTINGS"),handler:this._handleSettings.bind(this),available:K.bind(this),enabled:N.bind(this)});}};
x.prototype._createContainer=function(X,Y){this._handleStopCutPaste();var Z=Y[0];var $=this.getPlugins()["createContainer"].handleCreate(X,Z);if(this.getPlugins()["rename"]){var _={"onAfterRendering":function(){setTimeout(function(){this.getPlugins()["rename"].startEdit($);}.bind(this),0);$.removeEventDelegate(_);}.bind(this)};$.addEventDelegate(_);}};
x.prototype._handleRename=function(X){var Y=X[0];this.getPlugins()["rename"].startEdit(Y);};
x.prototype._handleCutElement=function(X){var Y=X[0];this.getPlugins()["cutPaste"].cut(Y);};
x.prototype._handlePasteElement=function(X){var Y=X[0];this.getPlugins()["cutPaste"].paste(Y);};
x.prototype._handleStopCutPaste=function(){this.getPlugins()["cutPaste"].stopCutAndPaste();};
x.prototype._handleCombineElements=function(){this._handleStopCutPaste();var X=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["combine"].handleCombine(X);};
x.prototype._handleSplitElements=function(){this._handleStopCutPaste();var X=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["split"].handleSplit(X);};
x.prototype._handleSettings=function(X){this.getPlugins()["settings"].handleSettings(X);};
x.prototype._getSmartFormForElement=function(X){while(X&&!E.isInstanceOf(X,"sap.ui.comp.smartform.SmartForm")){X=X.getParent();}return X;};
x.prototype._getApplicationTitle=function(){var X="";var Y=sap.ui.core.Component.getOwnerComponentFor(this._oRootControl);if(Y){X=Y.getMetadata().getManifestEntry("sap.app").title;}return X;};
x.prototype._checkChangesExist=function(){var X=F.createForControl(this._oRootControl);if(X.getComponentName().length>0){return X.getComponentChanges().then(function(Y){return Y.length>0;});}else{return Promise.resolve(false);}};
return x;},true);
sap.ui.predefine('sap/ui/rta/command/AddODataProperty',['jquery.sap.global','sap/ui/rta/command/FlexCommand',"sap/ui/fl/Utils","sap/ui/fl/changeHandler/BaseTreeModifier"],function(q,F,a,B){"use strict";
var A=F.extend("sap.ui.rta.command.AddODataProperty",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},label:{type:"string"},bindingString:{type:"string"}}}});
A.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),label:this.getLabel(),bindingPath:this.getBindingString()};};
return A;},true);
sap.ui.predefine('sap/ui/rta/command/BindProperty',['sap/ui/rta/command/FlexCommand',"sap/ui/fl/changeHandler/PropertyBindingChange","sap/ui/rta/Utils"],function(F,P,U){"use strict";
var B=F.extend("sap.ui.rta.command.BindProperty",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newBinding:{type:"string",bindable:false},changeType:{type:"string",defaultValue:"propertyBindingChange"}},associations:{},events:{}}});
B.prototype.init=function(){this.setChangeHandler(P);};
B.prototype.bindProperty=function(n,b){if(n==="newBinding"){return this.setNewBinding(b.bindingString);}return F.prototype.bindProperty.apply(this,arguments);};
B.prototype._getChangeSpecificData=function(){var e=this.getElement();var s={changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newBinding:this.getNewBinding()}};return s;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/Combine',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var C=F.extend("sap.ui.rta.command.Combine",{metadata:{library:"sap.ui.rta",properties:{source:{type:"any"},combineFields:{type:"any[]"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(){var f=[];this.getCombineFields().forEach(function(o){f.push(o.getId());});var s={changeType:this.getChangeType(),sourceControlId:this.getSource().getId(),combineFieldIds:f};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/CreateContainer',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var C=F.extend("sap.ui.rta.command.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},label:{type:"string"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),newLabel:this.getLabel()};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/LREPSerializer',['sap/ui/base/ManagedObject','sap/ui/rta/command/Stack','sap/ui/fl/FlexControllerFactory'],function(M,C,F){"use strict";
var L=M.extend("sap.ui.rta.command.LREPSerializer",{metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"commandStack":{type:"object"}},aggregations:{}}});
L.prototype.saveCommands=function(){var c=this.getCommandStack();var r=sap.ui.getCore().byId(this.getRootControl());if(!r){throw new Error("Can't save commands without root control instance!");}var f=F.createForControl(r);var a=c.getAllExecutedCommands();a.forEach(function(o){var e=o.getElement();f.addPreparedChange(o.getPreparedChange(),e);});return f.saveAll().then(function(){jQuery.sap.log.info("UI adaptation successfully transfered changes to layered repository");this.getCommandStack().removeAllCommands();}.bind(this));};
return L;},true);
sap.ui.predefine('sap/ui/rta/command/Move',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var M=F.extend("sap.ui.rta.command.Move",{metadata:{library:"sap.ui.rta",properties:{movedElements:{type:"any[]"},target:{type:"any"},source:{type:"any"}},associations:{},events:{}}});
M.prototype._getChangeSpecificData=function(i){var s=i?this.getTarget():this.getSource();var t=i?this.getSource():this.getTarget();var S=s.parent||sap.ui.getCore().byId(s.id);if(s.parent){s.id=s.parent.getId();delete s.parent;}if(t.parent){t.id=t.parent.getId();delete t.parent;}var m={changeType:this.getChangeType(),selector:{id:S.getId()},source:s,target:t,movedElements:[]};this.getMovedElements().forEach(function(a){m.movedElements.push({id:a.id||a.element.getId(),sourceIndex:i?a.targetIndex:a.sourceIndex,targetIndex:i?a.sourceIndex:a.targetIndex});});return m;};
M.prototype.prepare=function(){F.prototype.prepare.apply(this,arguments);this._oPreparedUndoChange=this._createChangeFromData(this._getChangeSpecificData(true));};
M.prototype.undo=function(){this._applyChange(this._oPreparedUndoChange);};
return M;},true);
sap.ui.predefine('sap/ui/rta/command/Property',['sap/ui/rta/command/FlexCommand',"sap/ui/fl/changeHandler/PropertyChange","sap/ui/rta/Utils"],function(F,P,U){"use strict";
var a=F.extend("sap.ui.rta.command.Property",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newValue:{type:"any"},semanticMeaning:{type:"string"},changeType:{type:"string",defaultValue:"propertyChange"}},associations:{},events:{}}});
a.prototype.init=function(){this.setChangeHandler(P);};
a.prototype._getChangeSpecificData=function(){var e=this.getElement();return{changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newValue:this.getNewValue(),semantic:this.getSemanticMeaning()}};};
return a;},true);
sap.ui.predefine('sap/ui/rta/command/Remove',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Remove",{metadata:{library:"sap.ui.rta",properties:{removedElement:{type:"any"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var e=this.getRemovedElement()||this.getElement();var s={changeType:this.getChangeType(),removedElement:{id:e.getId()}};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Rename',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var R=F.extend("sap.ui.rta.command.Rename",{metadata:{library:"sap.ui.rta",properties:{renamedElement:{type:"object"},newValue:{type:"string",defaultValue:"new text"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType(),selector:{id:this.getElement().getId()},renamedElement:{id:this.getRenamedElement().getId()},value:this.getNewValue()};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Reveal',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Reveal",{metadata:{library:"sap.ui.rta",properties:{revealedElementId:{type:"string"},hiddenParent:"object"}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType()};if(this.getRevealedElementId()){s.revealedElementId=this.getRevealedElementId();}return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Settings',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Settings",{metadata:{library:"sap.ui.rta",properties:{content:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),content:this.getContent()};return s;};
S.prototype.execute=function(){if(this.getElement()){F.prototype.execute.apply(this,arguments);}};
S.prototype.undo=function(){if(this.getElement()){F.prototype.undo.apply(this,arguments);}};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Split',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Split",{metadata:{library:"sap.ui.rta",properties:{newElementIds:{type:"string[]"},source:{type:"any"},parentElement:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(){var s={newElementIds:this.getNewElementIds(),sourceControlId:this.getSource().getId(),changeType:this.getChangeType(),parentId:this.getParentElement().getId()};return s;};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Stack',['sap/ui/base/ManagedObject'],function(M){"use strict";
var S=M.extend("sap.ui.rta.command.Stack",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{modified:{}}}});
S.prototype._toBeExecuted=-1;
S.prototype._getCommandToBeExecuted=function(){return this.getCommands()[this._toBeExecuted];};
S.prototype.pushExecutedCommand=function(c){this.push(c,true);};
S.prototype.push=function(c,e){if(this._bUndoneCommands){this._bUndoneCommands=false;while(this._toBeExecuted>-1){this.pop();}}this.insertCommand(c,0);if(!e){this._toBeExecuted++;}this.fireModified();};
S.prototype.top=function(){return this.getCommands()[0];};
S.prototype.pop=function(){if(this._toBeExecuted>-1){this._toBeExecuted--;}return this.removeCommand(0);};
S.prototype.removeCommand=function(o,s){var r=this.removeAggregation("commands",o,s);this.fireModified();return r;};
S.prototype.removeAllCommands=function(s){var c=this.removeAllAggregation("commands",s);this._toBeExecuted=-1;this.fireModified();return c;};
S.prototype.isEmpty=function(){return this.getCommands().length===0;};
S.prototype.execute=function(){var c=this._getCommandToBeExecuted();if(c){try{c.execute();}catch(e){this.pop();throw(e);}this._toBeExecuted--;this.fireModified();}};
S.prototype._unExecute=function(){if(this.canUndo()){this._bUndoneCommands=true;this._toBeExecuted++;var c=this._getCommandToBeExecuted();if(c){c.undo();this.fireModified();}}};
S.prototype.canUndo=function(){return(this._toBeExecuted+1)<this.getCommands().length;};
S.prototype.undo=function(){this._unExecute();};
S.prototype.canRedo=function(){return!!this._getCommandToBeExecuted();};
S.prototype.redo=function(){this.execute();};
S.prototype.pushAndExecute=function(c){this.push(c);this.execute();};
S.prototype.getAllExecutedCommands=function(){var a=[];var c=this.getCommands();for(var i=c.length-1;i>this._toBeExecuted;i--){var s=this._getSubCommands(c[i]);a=a.concat(s);}return a;};
S.prototype._getSubCommands=function(c){var C=[];if(c.getCommands){c.getCommands().forEach(function(s){var a=this._getSubCommands(s);C=C.concat(a);},this);}else{C.push(c);}return C;};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Combine',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils'],function(P,S,O,U){"use strict";
var C=P.extend("sap.ui.rta.plugin.Combine",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o){var d=this._getEffectiveDesignTimeMetadata(o);var e=o.getElementInstance();if(!U.getPublicParentDesigntimeMetadata(o)){return false;}var c=this._getCombineAction(o);if(c&&c.changeType){return this.hasChangeHandler(c.changeType,d.getRelevantContainer(e))&&this.hasStableId(o);}else{return false;}};
C.prototype._getEffectiveDesignTimeMetadata=function(o){var d;if(o.isInHiddenTree()){var p=o.getPublicParentAggregationOverlay();d=p.getDesignTimeMetadata();}else{d=o.getDesignTimeMetadata();}return d;};
C.prototype._getCombineAction=function(o){return this._getEffectiveDesignTimeMetadata(o).getAction("combine",o.getElementInstance());};
C.prototype._checkForSameRelevantContainer=function(s){var e=[];var r=[];for(var i=0,n=s.length;i<n;i++){e[i]=s[i].getElementInstance();r[i]=this._getEffectiveDesignTimeMetadata(s[i]).getRelevantContainer(e[i]);if(i>0){if((r[0]!==r[i])||(e[0].getMetadata().getName()!==e[i].getMetadata().getName())){return false;}}}return true;};
C.prototype.isCombineAvailable=function(o){var s=this.getDesignTime().getSelection();if(s.length<=1){return false;}return(this._checkForSameRelevantContainer(s)&&this._isEditableByPlugin(o));};
C.prototype.isCombineEnabled=function(o){var s=this.getDesignTime().getSelection();if(!this.isCombineAvailable(o)||s.length<=1){return false;}var a=s.map(function(b){return b.getElementInstance();});var A=s.every(function(b){var c=this._getCombineAction(b);if(!c){return false;}if(typeof c.isEnabled!=="undefined"){if(typeof c.isEnabled==="function"){return c.isEnabled(a);}else{return c.isEnabled;}}return true;},this);return A;};
C.prototype.handleCombine=function(c){var e=O.getOverlay(c);var d=this._getEffectiveDesignTimeMetadata(e);var E;if(e.isInHiddenTree()){E=e.getPublicParentElementOverlay().getElementInstance();}else{E=c;}var t=[];var s=this.getDesignTime().getSelection();for(var i=0;i<s.length;i++){var o=s[i].getElementInstance();t.push(o);}var a=this.getCommandFactory().getCommandFor(E,"combine",{source:c,combineFields:t},d);this.fireElementModified({"command":a});};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/CreateContainer',['sap/ui/rta/plugin/Plugin','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/dt/OverlayRegistry'],function(P,F,R,O){"use strict";
var C=P.extend("sap.ui.rta.plugin.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o,b){if(b===undefined||b===null){return this._isEditableCheck(o,false)||this._isEditableCheck(o,true);}else{return this._isEditableCheck(o,b);}};
C.prototype._isEditableCheck=function(o,b){var e=false;var p=o.getPublicParentAggregationOverlay();var c={};if(!o.getPublicParentElementOverlay()){return false;}c=this.getCreateAction(b,o);if(c&&c.changeType&&c.aggregation===p.getAggregationName()){e=this.hasChangeHandler(c.changeType,o.getPublicParentElementOverlay().getElementInstance());}if(!e&&!b){e=this.checkAggregationsOnSelf(o,"createContainer");}if(e){return this.hasStableId(o);}else{return false;}};
C.prototype.getEffectiveDesignTimeMetadata=function(o){return o.getDesignTimeMetadata();};
C.prototype._getParentOverlay=function(s,o){var p;if(s){p=o.getPublicParentElementOverlay();}else{p=o;}return p;};
C.prototype.getCreateAction=function(s,o){var p=this._getParentOverlay(s,o);var d=this.getEffectiveDesignTimeMetadata(p);var a=d.getAggregationAction("createContainer",o.getElementInstance());return a[0];};
C.prototype.isCreateAvailable=function(s,o){return this._isEditable(o,s);};
C.prototype.isCreateEnabled=function(s,o){var a=this.getCreateAction(s,o);if(!a){return false;}if(a.isEnabled&&typeof a.isEnabled==="function"){var i=a.isEnabled;return i.call(null,o.getElementInstance());}else{return true;}};
C.prototype._getCreatedContainerId=function(a,n){var i=n;if(a.getCreatedContainerId&&typeof a.getCreatedContainerId==="function"){var m=a.getCreatedContainerId;i=m.call(null,n);}return O.getOverlay(i);};
C.prototype._determineIndex=function(p,s,a,g){return R.getIndex(p,s,a,g);};
C.prototype._getText=function(a,e,d,t){if(!a){return t;}var c=d.getAggregationDescription(a.aggregation,e).singular;var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");return T.getText(t,c);};
C.prototype.getCreateContainerText=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=this.getEffectiveDesignTimeMetadata(p);var e=p.getElementInstance();var t="CTX_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype._getContainerTitle=function(a,e,d){var t="TITLE_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype.handleCreate=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=this.getEffectiveDesignTimeMetadata(p);var t=p.getElementInstance();var v=F.getViewForControl(t);var S;if(s){S=o.getElementInstance();}var n=v.createId(jQuery.sap.uid());var g=d.getAggregation(a.aggregation).getIndex;var i=this._determineIndex(t,S,a.aggregation,g);var c=this.getCommandFactory().getCommandFor(t,"createContainer",{newControlId:n,label:this._getContainerTitle(a,t,d),index:i},d);this.fireElementModified({"command":c});var N=this._getCreatedContainerId(a,n);N.setSelected(true);return N;};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/Remove',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/rta/command/CompositeCommand'],function(P,U,C){"use strict";
var R=P.extend("sap.ui.rta.plugin.Remove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
R.prototype.registerElementOverlay=function(o){o.attachBrowserEvent("keydown",this._onKeyDown,this);P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var E=o.getElementInstance();var p=U.getPublicParentDesigntimeMetadata(o);if(!p){return false;}var r=this._getRemoveAction(o);if(r&&r.changeType){if(o.isInHiddenTree()){e=this.hasChangeHandler(r.changeType,o.getPublicParentElementOverlay().getElementInstance());}else{e=this.hasChangeHandler(r.changeType,E);}}if(e){return this.hasStableId(o);}return e;};
R.prototype._getEffectiveDesignTimeMetadata=function(o){var d;if(o.isInHiddenTree()){var p=o.getPublicParentAggregationOverlay();d=p.getDesignTimeMetadata();}else{d=o.getDesignTimeMetadata();}return d;};
R.prototype._getRemoveAction=function(o){return this._getEffectiveDesignTimeMetadata(o).getAction("remove",o.getElementInstance());};
R.prototype.isRemoveAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRemoveEnabled=function(o){var a=this._getRemoveAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
R.prototype._getConfirmationText=function(o){var a=this._getRemoveAction(o);if(a&&a.getConfirmationText){return a.getConfirmationText(o.getElementInstance());}};
R.prototype.deregisterElementOverlay=function(o){o.detachBrowserEvent("keydown",this._onKeyDown,this);P.prototype.deregisterElementOverlay.apply(this,arguments);};
R.prototype._onKeyDown=function(e){if(e.keyCode===jQuery.sap.KeyCodes.DELETE){e.stopPropagation();this.removeElement();}};
R.prototype.removeElement=function(o){var s;if(o){s=o;}else{var d=this.getDesignTime();s=d.getSelection();}if(s.length>0){this._handleRemove(s);}};
R.prototype._getRemoveCommand=function(e,r,d){return this.getCommandFactory().getCommandFor(e,"Remove",{removedElement:r},d);};
R.prototype._fireElementModified=function(c){if(c.getCommands().length){this.fireElementModified({"command":c});}};
R.prototype._handleRemove=function(s){var p=[];var c=new C();s.forEach(function(o){var a;var r=o.getElementInstance();var e;var d=this._getEffectiveDesignTimeMetadata(o);if(o.isInHiddenTree()){e=o.getPublicParentElementOverlay().getElementInstance();}else{e=r;}if(this.isRemoveEnabled(o)){var b=this._getConfirmationText(o);if(b){p.push(U.openRemoveConfirmationDialog(r,b).then(function(f){if(f){a=this._getRemoveCommand(e,r,d);c.addCommand(a);}}.bind(this)));}else{a=this._getRemoveCommand(e,r,d);c.addCommand(a);}}},this);if(p.length){Promise.all(p).then(function(){this._fireElementModified(c);}.bind(this));}else{this._fireElementModified(c);}};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Selection',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,U,F){"use strict";
var S=P.extend("sap.ui.rta.plugin.Selection",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
S.prototype._checkVendorLayer=function(o){if(o.getDesignTimeMetadata()){if(this.hasStableId(o)&&F.isVendorLayer()){o.setEditable(true);o.setSelectable(true);return true;}}return false;};
S.prototype.registerElementOverlay=function(o){if(!this._checkVendorLayer(o)){o.attachEditableChange(this._onEditableChange,this);this._adaptSelectable(o);}o.attachBrowserEvent("click",this._onClick,this);o.attachBrowserEvent("keydown",this._onKeyDown,this);o.attachBrowserEvent("mousedown",this._onMouseDown,this);};
S.prototype._onEditableChange=function(e){var o=e.getSource();this._adaptSelectable(o);};
S.prototype._adaptSelectable=function(o){var s=o.getEditable();if(o.getSelectable()!==s){o.setSelectable(s);}};
S.prototype.deregisterElementOverlay=function(e){var o=e.getSource();o.detachBrowserEvent("click",this._onClick,this);o.detachBrowserEvent("keydown",this._onKeyDown,this);o.detachBrowserEvent("mousedown",this._onMouseDown,this);o.detachEditableChange(this._onEditableChange,this);};
S.prototype._onKeyDown=function(e){var o=U.getFocusedOverlay();if(e.keyCode===jQuery.sap.KeyCodes.ENTER){if((o)&&(!o.isSelected())){o.setSelected(true);e.stopPropagation();}}else if((e.keyCode===jQuery.sap.KeyCodes.ARROW_UP)&&(e.shiftKey===false)&&(e.altKey===false)&&(e.ctrlKey===false)){if(o){var p=o.getParentElementOverlay();if(p&&p.getSelectable()){p.focus();e.stopPropagation();}}}else if((e.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN)&&(e.shiftKey===false)&&(e.altKey===false)&&(e.ctrlKey===false)){if(o){var f=U.getFirstFocusableChildOverlay(o);if(f){f.focus();e.stopPropagation();}}}else if((e.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT)&&(e.shiftKey===false)&&(e.altKey===false)&&(e.ctrlKey===false)){if(o){var a=U.getPreviousFocusableSiblingOverlay(o);if(a){a.focus();e.stopPropagation();}}}else if((e.keyCode===jQuery.sap.KeyCodes.ARROW_RIGHT)&&(e.shiftKey===false)&&(e.altKey===false)&&(e.ctrlKey===false)){if(o){var n=U.getNextFocusableSiblingOverlay(o);if(n){n.focus();e.stopPropagation();}}}};
S.prototype._onMouseDown=function(e){if(sap.ui.Device.browser.name=="ie"){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o.getSelectable()){o.focus();e.stopPropagation();}else{o.getDomRef().blur();}e.preventDefault();}};
S.prototype._onClick=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o.getSelectable()){o.setSelected(!o.getSelected());e.preventDefault();e.stopPropagation();}};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Settings',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils'],function(P,U){"use strict";
var S=P.extend("sap.ui.rta.plugin.Settings",{metadata:{library:"sap.ui.rta",properties:{commandStack:{type:"any"}},associations:{},events:{}}});
S.prototype._isEditable=function(o){if(!U.getPublicParentDesigntimeMetadata(o)){return false;}var s=this._getSettingsAction(o);if(s&&s.handler){return this.hasStableId(o);}return false;};
S.prototype._getUnsavedChanges=function(i,c){var e;var u=this.getCommandStack().getAllExecutedCommands().filter(function(C){e=C.getElementId();if(e===i&&c.indexOf(C.getChangeType())>=0){return true;}}).map(function(C){return C.getPreparedChange();});return u;};
S.prototype._getEffectiveDesignTimeMetadata=function(o){var d;if(o.isInHiddenTree()){var p=o.getPublicParentAggregationOverlay();d=p.getDesignTimeMetadata();}else{d=o.getDesignTimeMetadata();}return d;};
S.prototype._getSettingsAction=function(o){return this._getEffectiveDesignTimeMetadata(o).getAction("settings",o.getElementInstance());};
S.prototype.isSettingsAvailable=function(o){return this._isEditableByPlugin(o);};
S.prototype.isSettingsEnabled=function(o){var a=this._getSettingsAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
S.prototype.handleSettings=function(s){var o;var e=s[0].getElementInstance();return s[0].getDesignTimeMetadata().getAction("settings").handler(e,this._getUnsavedChanges.bind(this)).then(function(c){c.forEach(function(C){o=this.getCommandFactory().getCommandFor(C.selectorControl,"settings",C.changeSpecificData);this.fireElementModified({"command":o});},this);}.bind(this))['catch'](function(E){if(E){throw E;}});};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Split',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,S,O,U,F){"use strict";
var a=P.extend("sap.ui.rta.plugin.Split",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
a.prototype._isEditable=function(o){var d=o.getDesignTimeMetadata();var e=o.getElementInstance();if(!U.getPublicParentDesigntimeMetadata(o)){return false;}var s=this._getSplitAction(o);if(s&&s.changeType){return this.hasStableId(o)&&this.hasChangeHandler(s.changeType,d.getRelevantContainer(e));}else{return false;}};
a.prototype._getEffectiveDesignTimeMetadata=function(o){var d;if(o.isInHiddenTree()){var p=o.getPublicParentAggregationOverlay();d=p.getDesignTimeMetadata();}else{d=o.getDesignTimeMetadata();}return d;};
a.prototype._getSplitAction=function(o){return this._getEffectiveDesignTimeMetadata(o).getAction("split",o.getElementInstance());};
a.prototype.isSplitAvailable=function(o){if(!this._isEditableByPlugin(o)){return false;}var s=this.getDesignTime().getSelection();if(s.length!==1){return false;}var v=this._getSplitAction(o);var e=s[0].getElementInstance();if(v&&v.getControlsCount(e)<=1){return false;}return true;};
a.prototype.isSplitEnabled=function(o){var A=this._getSplitAction(o);if(!A||!this.isSplitAvailable(o)){return false;}var b=true;if(typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){b=A.isEnabled(o.getElementInstance());}else{b=A.isEnabled;}}return b;};
a.prototype.handleSplit=function(s){var p=s.getParent();var e=O.getOverlay(s);var d=this._getEffectiveDesignTimeMetadata(e);var E;if(e.isInHiddenTree()){E=e.getPublicParentElementOverlay().getElementInstance();}else{E=s;}var f=this._getSplitAction(e).getControlsCount(E);var v=F.getViewForControl(E);var n=[];for(var i=0;i<f-1;i++){n.push(v.createId(jQuery.sap.uid()));}var o=this.getCommandFactory().getCommandFor(E,"split",{newElementIds:n,source:s,parentElement:p},d);this.fireElementModified({"command":o});};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AddElementsDialog',['jquery.sap.global','sap/ui/rta/library','sap/ui/rta/Utils','sap/ui/dt/OverlayRegistry','sap/ui/base/ManagedObject','sap/ui/commons/Label','sap/ui/commons/LabelDesign','sap/m/Dialog','sap/ui/model/json/JSONModel','sap/m/SearchField','sap/m/Button','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/m/List','sap/m/CustomListItem','sap/m/ListType','sap/m/ScrollContainer','sap/ui/model/Sorter','sap/ui/dt/ElementUtil','sap/m/VBox'],function(q,l,U,O,M,L,a,D,J,S,B,T,b,F,c,C,d,e,f,g,h,i,E,V){"use strict";
var A=M.extend("sap.ui.rta.plugin.additionalElements.AddElementsDialog",{metadata:{library:"sap.ui.rta",properties:{"customFieldEnabled":{type:"boolean",defaultValue:false},"title":{type:"string"}},events:{"opened":{},"openCustomField":{}}}});
A.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._bAscendingSortOrder=false;this._oDialog=new D().addStyleClass("sapUIRtaFieldRepositoryDialog");this._oDialog.setModel(new J({elements:[]}));var j=this._createContent();var k=this._createButtons();j.forEach(function(o){this._oDialog.addContent(o);},this);k.forEach(function(o){this._oDialog.addButton(o);},this);this._oDialog.setInitialFocus(this._oInput);};
A.prototype._createContent=function(){this._oInput=new S({width:"100%",liveChange:[this._updateModelFilter,this]}).addStyleClass("resourceListIF");var r=new B({text:"",icon:"sap-icon://sort",press:[this._resortList,this]});this._oCustomFieldButton=new B({text:"",icon:"sap-icon://add",tooltip:this._oTextResources.getText("BTN_FREP_CCF"),enabled:this.getCustomFieldEnabled(),press:[this._redirectToCustomFieldCreation,this]});this._oToolbarSpacer1=new b();this.oInputFields=new T({content:[this._oInput,r,this._oToolbarSpacer1,this._oCustomFieldButton]});var o=new L({design:a.Bold,tooltip:"{tooltip}",text:{parts:[{path:"label"},{path:"referencedComplexPropertyName"},{path:"duplicateComplexName"}],formatter:function(n,R,p){if(p&&R){n+=" ("+R+")";}return n;}}});var j=new L({text:{parts:[{path:"originalLabel"}],formatter:function(n){if(n){return this._oTextResources.getText("LBL_FREP",n);}return"";}.bind(this)},visible:{parts:[{path:"originalLabel"}],formatter:function(n){if(n){return true;}return false;}}});var v=new V();v.addItem(o);v.addItem(j);var s=new i("label",this._bAscendingSortOrder);this._oList=new e({mode:"MultiSelect",includeItemInSelection:true,growing:false,growingScrollToLoad:false}).setNoDataText(this._oTextResources.getText("MSG_NO_FIELDS"));var k=new f({type:g.Active,selected:"{selected}",content:[v]});this._oList.bindItems({path:"/elements",template:k,sorter:s});var m=new h({content:this._oList,vertical:true,horizontal:false}).addStyleClass("sapUIRtaCCDialogScrollContainer");return[this.oInputFields,m];};
A.prototype._createButtons=function(){var o=new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._submitDialog,this]});var j=new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]});return[o,j];};
A.prototype._submitDialog=function(){this._oDialog.close();this._fnResolve();};
A.prototype._cancelDialog=function(){this._oList.removeSelections();this._oDialog.close();this._fnReject();};
A.prototype.setElements=function(j){this._oDialog.getModel().setProperty("/elements",j);};
A.prototype.getElements=function(){return this._oDialog.getModel().getProperty("/elements");};
A.prototype.getSelectedElements=function(){return this._oDialog.getModel().getObject("/elements").filter(function(o){return o.selected;});};
A.prototype.open=function(o){return new Promise(function(r,j){this._fnResolve=r;this._fnReject=j;this._oDialog.oPopup.attachOpened(function(){this.fireOpened();}.bind(this));this._oDialog.open();}.bind(this));};
A.prototype._resortList=function(o){this._bAscendingSortOrder=!this._bAscendingSortOrder;var j=this._oList.getBinding("items");var s=[];s.push(new i("label",this._bAscendingSortOrder));j.sort(s);};
A.prototype._updateModelFilter=function(o){var v=o.getParameter("newValue");var j=this._oList.getBinding("items");if((typeof v)==="string"){var k=new F("label",c.Contains,v);var m=new F("originalLabel",c.Contains,v);var r=new F("referencedComplexPropertyName",c.Contains,v);var n=new F("duplicateComplexName",c.EQ,true);var p=new F({filters:[r,n],and:true});var s=new F({filters:[k,m,p],and:false});j.filter([s]);}else{j.filter([]);}};
A.prototype._redirectToCustomFieldCreation=function(o){this.fireOpenCustomField();this._oDialog.close();};
A.prototype.setTitle=function(t){M.prototype.setProperty.call(this,"title",t,true);this._oDialog.setTitle(t);};
A.prototype.setCustomFieldEnabled=function(j){M.prototype.setProperty.call(this,"customFieldEnabled",j,true);this._oCustomFieldButton.setEnabled(j);};
return A;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer',['sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/smartfield/AnnotationHelper','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementUtil','sap/ui/rta/Utils'],function(M,A,S,E,R){"use strict";var a=new A();
function _(p){if(p&&p.type){if(p.type.toLowerCase().indexOf("edm")!==0){return true;}}return false;}
function b(O,m){return O.reduce(function(j,p){var P=p;if(_(p)){P=m.getFieldsByComplexTypeName(p.type).map(function(C){C.bindingPath=p.name+"/"+C.name;C.entityName=p.entityName;C.referencedComplexPropertyName=p.fieldLabel?p.fieldLabel:p.name;return C;});}else{P.bindingPath=p.name;}return j.concat(P);},[]);}
function c(O,j){return O.filter(function(p){return p.visible;}).filter(function(p){var F=a.getFieldControlPath(p);if(F){var m=j.getBindingContext().getProperty(F);return m!==0;}return true;});}
function d(j){var m=j.getModel();var r=[];if(m){var s=m.getMetadata().getName();if(s==="sap.ui.model.odata.ODataModel"||s==="sap.ui.model.odata.v2.ODataModel"){r=m.getMetaModel().loaded().then(function(){var n=new M(m);var p=R.getBoundEntityType(j,m);var O=n.getFieldsByEntityTypeName(p)||[];O=b(O,n);O=c(O,j);return O;});}}return r;}
function e(O){return{selected:false,label:O.renamedLabel?O.renamedLabel:O.fieldLabel,referencedComplexPropertyName:O.referencedComplexPropertyName?O.referencedComplexPropertyName:"",duplicateComplexName:O.duplicateComplexName?O.duplicateComplexName:false,tooltip:O.quickInfo||O.fieldLabel,type:"odata",entityType:O.entityName,name:O.name,bindingPath:O.bindingPath,originalLabel:O.renamedLabel&&O.renamedLabel!==O.fieldLabel?O.fieldLabel:""};}
function f(D){var j=D.element;var m=D.action;return{selected:false,label:R.getLabelForElement(j,m.getLabel),tooltip:R.getLabelForElement(j,m.getLabel),referencedComplexPropertyName:j.referencedComplexPropertyName?j.referencedComplexPropertyName:"",duplicateComplexName:j.duplicateComplexName?j.duplicateComplexName:false,bindingPaths:j.bindingPaths,originalLabel:j.renamedLabel&&j.renamedLabel!==j.labelFromOData?j.labelFromOData:"",type:"invisible",element:j};}
function g(j){var B=[];h(j).forEach(function(F){if(F.mBindingInfos){for(var I in F.mBindingInfos){var p=R.getPathFromBindingInfo(I,F.mBindingInfos);if(p){B.push(p);}}}});return B;}
function h(C){var B=[];if(jQuery.isEmptyObject(C.mBindingInfos)){for(var s in C.getMetadata().getAllAggregations()){B=B.concat(i(s,C));}}else{B.push(C);}return B;}
function i(s,j){var B=[];E.getAggregation(j,s).forEach(function(C){if(jQuery.isEmptyObject(C.mBindingInfos)){if(C.getMetadata){for(var m in C.getMetadata().getAllAggregations()){B=B.concat(i(m,C));}}}else{B.push(C);}});return B;}
function k(j,r){if(r){return E.findAllSiblingsInContainer(j,r);}else{return[j];}}
function l(O){O.forEach(function(m,n,O){if(m["duplicateComplexName"]!==true){for(var j=n+1;j<O.length-1;j++){if(m.fieldLabel===O[j].fieldLabel){m["duplicateComplexName"]=true;O[j]["duplicateComplexName"]=true;}}}});return O;}
var o={enhanceInvisibleElements:function(p,r){return Promise.resolve().then(function(){return d(p);}).then(function(O){O=l(O);var I=r.elements||[];return I.map(function(j){var t=j.getMetadata().getName();var T=r.types[t];var m=T.action;j.bindingPaths=g(j);j.fieldLabel=R.getLabelForElement(j,m.getLabel);O.some(function(u){if(u.fieldLabel===j.fieldLabel){j.duplicateComplexName=true;return true;}});O.some(function(u){if(j.bindingPaths&&j.bindingPaths.indexOf(u.bindingPath)>-1){j.labelFromOData=u.fieldLabel;if(j.fieldLabel!==j.labelFromOData){j.renamedLabel=true;}if(u.referencedComplexPropertyName){j.referencedComplexPropertyName=u.referencedComplexPropertyName;}return true;}});return{element:j,action:m};});}).then(function(j){return j.map(f);});},getUnboundODataProperties:function(j,m){return Promise.resolve().then(function(){return d(j);}).then(function(O){var r=k(j,m.relevantContainer);var n=r.reduce(function(P,C){return P.concat(i.bind(null,m.action.aggregation)(C));},[]);var p={};var v=n.reduce(function(P,C){if(C.mBindingInfos){for(var I in C.mBindingInfos){var s=R.getPathFromBindingInfo(I,C.mBindingInfos);if(s){P[s]=true;p[s]=R.getLabelForElement(C,m.getLabel);}}}return P;},{});var F=m.filter?m.filter:function(){return true;};O=O.reduce(function(O,D){D["renamedLabel"]=p[D.bindingPath];if(!v[D.bindingPath]&&F(j,D)){return O.concat(D);}else{return O;}},[]);O=l(O);return O;}).then(function(u){return u.map(e);});}};return o;});
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin',["jquery.sap.global","sap/ui/rta/plugin/Plugin",'sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementDesignTimeMetadata'],function(q,P,E,O,U,S,a){"use strict";
function _(u,v){var w,x;if(u){w=v.getParentElementOverlay();x=v.getPublicParentElementOverlay();}else{w=v;if(v.isInHiddenTree()){x=v.getPublicParentElementOverlay();}else{x=v;}}return{publicParentOverlay:x,parentOverlay:w,publicParent:x.getElementInstance(),parent:w.getElementInstance()};}
function b(u,C){return C.sParentAggregationName;}
function c(u,v){var I=E.getAggregation(u,v).filter(function(u){return u.getVisible&&!u.getVisible();});var w=S.getStashedControls(u.getId());return I.concat(w);}
function d(u,v){var w=_(u,v);var R={};if(v.isInHiddenTree()){R=e(R,w);}else{R=f(R,w,u,v);}return R;}
function e(R,u){var D=u.publicParentOverlay.getDesignTimeMetadata();var v=D&&D.getAggregationAction("reveal",u.parent)[0];if(v&&v.changeType&&sap.ui.rta.plugin.Plugin.prototype.hasChangeHandler(v.changeType,u.publicParent)){if(!v.getAggregationName){v.getAggregationName=b;}var G=v.getInvisibleElements||c;var I=G(u.publicParent,v.aggregation);R[v.aggregation]={reveal:{elements:I,types:I.reduce(function(w,x){w[x.getMetadata().getName()]={designTimeMetadata:D,action:v};return w;},{})}};}return R;}
function f(R,u,v,w){var x=[u.parentOverlay];var y=m(u.parent,u.parentOverlay.getDesignTimeMetadata());if(y!==u.parent){x=E.findAllSiblingsInContainer(u.parent,y).map(function(B){return O.getOverlay(B);});}var z;if(v){z=[w.getElementInstance().sParentAggregationName];}z=u.parentOverlay.getAggregationOverlays().filter(function(B){return!B.getDesignTimeMetadata().isIgnored();}).map(function(B){return B.getAggregationName();});R=z.reduce(g.bind(null,x),{});return R;}
function g(u,v,w){var I=u.reduce(function(x,y){return x.concat(c(y.getElementInstance(),w));},[]);var T=I.reduce(function(T,x){var y=x.getMetadata().getName();if(!T[y]){if(y==="sap.ui.core._StashedControl"){T[y]=n();}else{var z=O.getOverlay(x);if(z){var D=z.getDesignTimeMetadata();var R=D&&D.getAction("reveal",x);if(R&&R.changeType&&sap.ui.rta.plugin.Plugin.prototype.hasChangeHandler(R.changeType,x)){if(!R.getAggregationName){R.getAggregationName=b;}T[y]={designTimeMetadata:D,action:R};}}}}return T;},{});if(I.length>0&&Object.keys(T).length>0){v[w]={reveal:{elements:I,types:T}};}return v;}
function h(u,v){var w=_(u,v);var D=w.publicParentOverlay.getDesignTimeMetadata();var x=D.getAggregationAction("addODataProperty",w.parent);var y=x.reduce(function(z,B){if(B.changeType&&sap.ui.rta.plugin.Plugin.prototype.hasChangeHandler(B.changeType,w.parent)){z[B.aggregation]={addODataProperty:{designTimeMetadata:D,action:B}};}return z;},{});return y;}
function i(u,v){var R=d(u,v);var w=h(u,v);var x=q.extend(true,R,w);var y=Object.keys(x);if(y.length===0){return{};}else if(y.length>1){q.sap.log.error("reveal or addODataProperty action defined for more than 1 aggregation, that is not yet possible");}var z=y[0];x[z].aggregation=z;return x[z];}
var j=true,k=false;
function l(R,u,v,w){var N=[];var C;var x;if(u.addODataProperty){var y=u.aggregation;var D=u.addODataProperty.designTimeMetadata;C=D.getAggregationDescription(y,v);if(C){x=w?C.singular:C.plural;N.push(x);}}if(u.reveal){Object.keys(u.reveal.types).forEach(function(B){var F=u.reveal.types[B];C=F.designTimeMetadata.getName(v);if(C){x=w?C.singular:C.plural;N.push(x);}});}var z=N.reduce(function(B,F){if(B.indexOf(F)===-1){B.push(F);}return B;},[]);var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");if(z.length===1){x=z[0];}else{x=T.getText("MULTIPLE_CONTROL_NAME");}return T.getText(R,x);}
function m(u,D){if(D.getData().getRelevantContainer){return D.getData().getRelevantContainer(u);}else{return u;}}
function n(){return{designTimeMetadata:new a({data:{name:{singular:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME");},plural:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME_PLURAL");}},actions:{reveal:{changeType:"unstashControl",getAggregationName:b}}}}),action:{changeType:"unstashControl",getAggregationName:b}};}
var A=P.extend("sap.ui.rta.plugin.additionalElements.AdditionalElementsPlugin",{
metadata:{library:"sap.ui.rta",properties:{analyzer:"object",dialog:"object",commandFactory:"object"},associations:{},events:{}},
getContextMenuTitle:function(u,v){var w=_(u,v);var x=i(u,v);return l("CTX_ADD_ELEMENTS",x,w.parent,j);},
isAvailable:function(u,v){return this._isEditable(v,u);},
isEnabled:function(u,v){if(u){if(!U.hasParentStableId(v)){return false;}}var w=i(u,v);if(w.reveal&&w.reveal.elements.length===0&&!w.addODataProperty){return false;}return true;},
showAvailableElements:function(u,v){var w=v[0];var x=_(u,w);var y=u&&w.getElementInstance();var z=[];var B=i(u,w);if(B.reveal){z.push(this.getAnalyzer().enhanceInvisibleElements(x.publicParent,B.reveal));}if(B.addODataProperty){B.addODataProperty.relevantContainer=m(x.publicParent,B.addODataProperty.designTimeMetadata);z.push(this.getAnalyzer().getUnboundODataProperties(x.publicParent,B.addODataProperty));}if(B.aggregation){this._setDialogTitle(B,x.parent);}return Promise.resolve().then(function(){if(B.addODataProperty){return U.isServiceUpToDate(x.parent);}}).then(function(){if(B.addODataProperty){return U.isCustomFieldAvailable(x.parent);}}).then(function(C){if(C){this._oCurrentFieldExtInfo=C;this.getDialog().setCustomFieldEnabled(true);this.getDialog().detachEvent('openCustomField',this._onOpenCustomField,this);this.getDialog().attachEvent('openCustomField',null,this._onOpenCustomField,this);}}.bind(this)).then(p.bind(null,z)).then(function(C){this.getDialog().setElements(C);return this.getDialog().open().then(function(){this._createCommands(u,w,x,y,B.designTimeMetadata,B);}.bind(this)).catch(function(D){if(D instanceof Error){throw D;}});}.bind(this)).catch(function(C){if(C instanceof Error){throw C;}else{q.sap.log.info("Service not up to date, skipping add dialog","sap.ui.rta");}});},
_setDialogTitle:function(u,v){var D=l("HEADER_ADDITIONAL_ELEMENTS",u,v,k);this.getDialog().setTitle(D);},
_onOpenCustomField:function(u){var C=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");var H=(C&&C.hrefForExternal({target:{semanticObject:"CustomField",action:"develop"},params:{businessContexts:this._oCurrentFieldExtInfo.BusinessContexts,serviceName:this._oCurrentFieldExtInfo.ServiceName,serviceVersion:this._oCurrentFieldExtInfo.ServiceVersion,entityType:this._oCurrentFieldExtInfo.EntityType}}));U.openNewWindow(H);},
_createCommands:function(u,v,w,x,D,y){var z=this.getDialog().getSelectedElements();if(z.length>0){var C=this.getCommandFactory().getCommandFor(w.parent,"composite");z.forEach(function(B){var F;switch(B.type){case"invisible":F=this._createRevealCommandForInvisible(B,y,w,x);C.addCommand(F);F=this._createMoveCommandForInvisible(B,y,w,x);if(F){C.addCommand(F);}else{q.sap.log.warning("No move action configured for "+w.publicParent.getMetadata().getName()+", aggregation: "+y.aggregation,"sap.ui.rta");}break;case"odata":F=this._createCommandsForOData(B,y,w,x);C.addCommand(F);break;default:}},this);this.fireElementModified({"command":C});}},
_createCommandsForOData:function(u,v,w,x){var y=v.addODataProperty.designTimeMetadata;var z=y.createAggregationDesignTimeMetadata(v.aggregation);var B=U.getIndex(w.parent,x,v.aggregation,z.getData().getIndex);return this.getCommandFactory().getCommandFor(w.publicParent,"addODataProperty",{newControlId:U.createFieldLabelId(w.publicParent,u.entityType,u.bindingPath),index:B,label:u.label,bindingString:u.bindingPath},y);},
_createRevealCommandForInvisible:function(u,v,w,x){var R=u.element;var T=R.getMetadata().getName();var y=v.reveal.types[T];var D=y.designTimeMetadata;if(w.publicParent!=w.parent){var z=D.createAggregationDesignTimeMetadata(v.aggregation);return this.getCommandFactory().getCommandFor(w.publicParent,"reveal",{revealedElementId:R.getId(),hiddenParent:w.parent},z);}else{return this.getCommandFactory().getCommandFor(R,"reveal",{},D);}},
_createMoveCommandForInvisible:function(u,v,w,x){var R=u.element;var T=R.getMetadata().getName();var y=v.reveal.types[T];var z=y.action.getAggregationName(w.parent,R);var B=r(R,w);var C=w.parent;var D=U.getIndex(w.parent,x,z);var F=U.getIndex(B,R,z)-1;D=s(B,C,F,D);var G;if(D!==F||w.parent!==R.getParent()){var H=w.publicParentOverlay.getDesignTimeMetadata();G=this.getCommandFactory().getCommandFor(w.publicParent,"move",{movedElements:[{element:R,sourceIndex:F,targetIndex:D}],source:{publicParent:w.publicParent,publicAggregation:v.aggregation,parent:B,aggregation:z},target:{publicParent:w.publicParent,publicAggregation:v.aggregation,parent:C,aggregation:z}},H);}return G;},
_isEditable:function(u,v){if(v===undefined||v===null){return o.call(this,u,true)||o.call(this,u,false);}else{return o.call(this,u,v);}}
});
function o(u,v){var w=false;var x=U.getPublicParentDesigntimeMetadata(u);if(!x){return false;}var y=i(v,u);if(y.addODataProperty){var z=y.addODataProperty.action;w=z&&z.aggregation===u.getPublicParentAggregationOverlay().getAggregationName();}if(!w&&y.reveal){w=true;}if(!w&&!v){w=t(u);}if(!w&&v){w=this.checkAggregations(u,u.getPublicParentAggregationOverlay(),"addODataProperty");}if(!w&&!v){w=this.checkAggregationsOnSelf(u,"addODataProperty");}if(w){return this.hasStableId(u);}else{return false;}}
function p(u){return Promise.all(u).then(function(v){var w=v[0]||[];if(w&&v[1]){w=w.concat(v[1]);}return w;});}
function r(R,u){var v=R.getParent();if(!v&&R.sParentId){v=sap.ui.getCore().byId(R.sParentId);}else if(!v){v=u.parent;}return v;}
function s(u,T,v,w){if(u===T&&v<w&&v>-1){return w-1;}return w;}
function t(u){var R=d(false,u);return!!R&&Object.keys(R).length>0;}
return A;});
sap.ui.predefine('sap/ui/rta/ui/SettingsDialog',['jquery.sap.global','sap/ui/rta/library','sap/ui/core/Control','sap/m/Dialog','sap/ui/layout/VerticalLayout','sap/m/Label','sap/m/Input','sap/m/Select','sap/ui/core/Item','sap/m/Button','sap/m/CheckBox','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/ui/dt/ElementUtil'],function(q,l,C,D,V,L,I,S,a,B,b,c,d,E){"use strict";
var e=C.extend("sap.ui.rta.ui.SettingsDialog",{metadata:{library:"sap.ui.rta",properties:{"commandStack":{type:"sap.ui.core.Control"}},associations:{"element":{type:"sap.ui.core.Element"}}}});
e.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._oDialog=this._createDialog();};
e.prototype._createDialog=function(){return new D({title:this._oTextResources.getText("HEADER_SETTINGS"),contentHeight:"500px",draggable:true,buttons:[new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._applyChangesAndClose,this]}),new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]})]}).addStyleClass("sapUiPopupWithPadding").addStyleClass("sapUiSizeCompact");};
e.prototype._applyChangesAndClose=function(){this._applyChanges();this._oDialog.close();};
e.prototype._iterateExecutedCommands=function(f){Object.keys(this._mCommands).forEach(function(p){f(this._mCommands[p]);},this);};
e.prototype._applyChanges=function(){var o=new d();this._iterateExecutedCommands(function(f){o.addCommand(f);});if(o.getCommands().length){this.getCommandStack().pushExecutedCommand(o);}};
e.prototype._cancelDialog=function(){this._iterateExecutedCommands(function(o){o.undo();});this._oDialog.close();};
e.prototype._executePropertyChangeCommand=function(o,p,n,O){if(!this._mCommands[p]){var P=c.getCommandFor(o,"property",{propertyName:p,newValue:n,oldValue:O});this._mCommands[p]=P;P.execute();}else{this._mCommands[p].undo();delete this._mCommands[p];}};
e.prototype._createBooleanEditor=function(o,p,P){var f=new b({text:p,selected:P});f.attachSelect(function(g){var n=g.getParameter("selected");var O=!n;this._executePropertyChangeCommand(o,p,n,O);},this);return f;};
e.prototype._createStringEditor=function(o,p,P){var i=new I({value:P});i.attachChange(function(f){var n=f.getParameter("value");var O=P;this._executePropertyChangeCommand(o,p,n,O);},this);return i;};
e.prototype._createEnumEditor=function(o,p,P,v){var s=new S();Object.keys(p).forEach(function(k){s.addItem(new a({text:k,key:p[k]}));});s.setSelectedKey(v);s.attachChange(function(f){var i=f.getParameter("selectedItem");if(i){var n=i.getKey();var O=v;this._executePropertyChangeCommand(o,P,n,O);}},this);return s;};
e.prototype._updateDialogContent=function(o){this._oDialog.removeAllContent();var v=new V();var p=o.getMetadata().getAllProperties();Object.keys(p).forEach(function(P){var f;var g=p[P];var h=o[g._sGetter]();if(g.type==="boolean"){f=this._createBooleanEditor(o,P,h);v.addContent(f);}else if(g.type==="string"||g.type==="sap.ui.core.CSSSize"){f=new V();var i=this._createStringEditor(o,P,h);f.addContent(new L({text:P,labelFor:i.getId()}));f.addContent(i);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}else{var j=q.sap.getObject(g.type);if(j){f=new V();var k=this._createEnumEditor(o,j,P,h);f.addContent(new L({text:P,labelFor:k.getId()}));f.addContent(k);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}}if(f){v.addContent(f);}},this);this._oDialog.addContent(v);};
e.prototype.open=function(o){this._mCommands={};this._updateDialogContent(o);this._oDialog.open();};
return e;},true);
sap.ui.predefine('sap/ui/rta/util/FakeLrepConnectorLocalStorage',["sap/ui/rta/util/FakeLrepLocalStorage"],function(F){"use strict";var a={};
a.create=function(c){if(Array.isArray(c)){c.forEach(function(e){F.saveChange(e.fileName,e);});}else{F.saveChange(c.fileName,c);}return Promise.resolve();};
a.deleteChange=function(c){F.deleteChange(c.sChangeName);return Promise.resolve({response:undefined,status:"nocontent"});};
a.deleteChanges=function(){F.deleteChanges();return Promise.resolve({response:undefined,status:"nocontent"});};
a.loadChanges=function(c){var C=F.getChanges(),i=this.sInitialComponentJsonPath;return new Promise(function(r,b){jQuery.getJSON(i).done(function(R){R.changes=C;var d={changes:R,componentClassName:c};r(d);}).fail(function(e){b(e);});});};
return a;},true);
sap.ui.predefine('sap/ui/rta/util/FakeLrepLocalStorage',[],function(){"use strict";var R="sap.ui.rta.change";var F={};
F.createChangeKey=function(i){if(i){return R+"."+i;}};
F.forEachLrepChangeInLocalStorage=function(p){for(var k in window.localStorage){if(k.indexOf(R)>-1){p(k);}}};
F.getChange=function(i){if(i){var c=window.localStorage.getItem(this.createChangeKey(i));return JSON.parse(c);}};
F.getChanges=function(){var c=[],C;this.forEachLrepChangeInLocalStorage(function(k){C=JSON.parse(window.localStorage[k]);c.push(C);});return c;};
F.getNumChanges=function(){var c=0;this.forEachLrepChangeInLocalStorage(function(k){c++;});return c;};
F._aModifyCallbacks=[];
F.attachModifyCallback=function(c){this._aModifyCallbacks.push(c);};
F.detachModifyCallback=function(c){var i=this._aModifyCallbacks.indexOf(c);if(i!==-1){this._aModifyCallbacks.splice(i,1);}};
F._callModifyCallbacks=function(){this._aModifyCallbacks.forEach(function(c){c();});};
F.deleteChange=function(i){if(i){window.localStorage.removeItem(this.createChangeKey(i));}this._callModifyCallbacks();};
F.deleteChanges=function(){this.forEachLrepChangeInLocalStorage(function(k){window.localStorage.removeItem(k);});this._callModifyCallbacks();};
F.saveChange=function(i,c){if(i&&c){var C=this.createChangeKey(i),s=JSON.stringify(c);window.localStorage.setItem(C,s);}this._callModifyCallbacks();};
return F;},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/rta/ControlTreeModifier',["sap/ui/fl/changeHandler/JsControlTreeModifier"],function(J){"use strict";var _;var R={startRecordingUndo:function(){_=[];},stopRecordingUndo:function(){var r=_;_=undefined;return r;},performUndo:function(u){while(u.length){var o=u.pop();this[o.name].apply(this,o.properties);}},_saveUndoOperation:function(f,p){if(_){_.push({name:f,properties:p});}},setVisible:function(c,v){var o=this.getVisible(c);var r=J.setVisible.apply(this,arguments);if(o!==this.getVisible(c)){this._saveUndoOperation("setVisible",[c,o]);}return r;},setStashed:function(c,s){var o;var C=c.getId();if(c.getVisible){o=!c.getVisible();}else{o=c.getStashed();}J.setStashed.apply(this,arguments);var S=sap.ui.getCore().byId(C);if(o!==s){this._saveUndoOperation("setStashed",[S,!s]);}},bindProperty:function(c,p,b){var o=c.getBindingInfo(p);var O;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var P=m._sGetter;O=c[P]();}J.bindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}else{this._saveUndoOperation("unbindProperty",[c,p]);}if(O){this._saveUndoOperation("setProperty",[c,p,O]);}},unbindProperty:function(c,p){var o=c.getBindingInfo(p);J.unbindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}},setProperty:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}var r=J.setProperty.apply(this,arguments);if(o!==P){this._saveUndoOperation("setProperty",[c,p,o]);}return r;},setPropertyBinding:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}J.setPropertyBinding.apply(this,arguments);if(o!==P){this._saveUndoOperation("setPropertyBinding",[c,p,o]);}},createControl:function(c,a,v,s){var e=this.bySelector(s,a);var r=J.createControl.apply(this,arguments);if(!e){var C=this.bySelector(s,a);this._saveUndoOperation("destroy",[C]);}return r;},destroy:function(c){if(c){c.destroy();}},insertAggregation:function(p,n,o,i){var O=J.getAggregation.call(this,p,n);J.insertAggregation.apply(this,arguments);if(p){if(p.getMetadata){var m=p.getMetadata();var a=m.getAllAggregations();if(a){var A=a[n];if(A){if(A.multiple){this._saveUndoOperation("removeAggregation",[p,n,o]);}else{this._saveUndoOperation("insertAggregation",[p,n,O]);}}}}}},removeAggregation:function(p,n,o){var O;var a;if(p&&o){a=J.getAggregation.call(this,p,n);if(a){a.some(function(e,i){if(e===o){O=i;return true;}});}}J.removeAggregation.apply(this,arguments);if(O||O===0){this._saveUndoOperation("insertAggregation",[p,n,o,O]);}},removeAllAggregation:function(p,n){var o=[];var a;if(p){a=J.getAggregation.call(this,p,n);}if(a&&a instanceof Array){o=a.slice();}else if(a&&a instanceof Object){o[0]=a;}J.removeAllAggregation(p,n);if(o){o.forEach(function(e){this._saveUndoOperation("insertAggregation",[p,n,e]);},this);}}};return jQuery.sap.extend(true,{},J,R);},true);
sap.ui.predefine('sap/ui/rta/Utils',['jquery.sap.global','sap/ui/fl/Utils','sap/ui/dt/OverlayUtil','sap/ui/comp/odata/FieldSelectorModelConverter','sap/ui/fl/registry/Settings'],function(q,F,O,a,S){"use strict";var U={};U.RESOLVED_PROMISE=Promise.resolve(true);U._sFocusableOverlayClass=".sapUiDtOverlaySelectable";
U.isExtensibilityEnabledInSystem=function(c){var C=F.getComponentClassName(c);if(!C||C==""){return Promise.resolve(false);}return S.getInstance(C).then(function(s){if(s.isModelS){return s.isModelS();}return false;});};
U.getPublicParentDesigntimeMetadata=function(o){var p=o.getPublicParentAggregationOverlay();if(p){return p.getDesignTimeMetadata();}};
U.hasParentStableId=function(o){var b=o.getPublicParentElementOverlay();var B=b?b.getElementInstance():null;return B&&F.checkControlId(B);};
U.isServiceUpToDate=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(e){if(e){q.sap.require("sap.ui.fl.fieldExt.Access");var m=c.getModel();if(m){var s=sap.ui.fl.fieldExt.Access.isServiceOutdated(m.sServiceUrl);if(s){sap.ui.fl.fieldExt.Access.setServiceValid(m.sServiceUrl);sap.ui.getCore().getEventBus().publish("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",{});return Promise.reject();}}}});};
U.isCustomFieldAvailable=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(s){if(!s){return false;}else if(!c.getModel()){return false;}else{var b=c.getModel().sServiceUrl;var e=this.getBoundEntityType(c);try{q.sap.require("sap.ui.fl.fieldExt.Access");var j=sap.ui.fl.fieldExt.Access.getBusinessContexts(b,e);return Promise.resolve(j).then(function(r){if(r){if(r.BusinessContexts){if(r.BusinessContexts.length>0){r.EntityType=e;return r;}}}else{return false;}}).catch(function(E){if(E){if(q.isArray(E.errorMessages)){for(var i=0;i<E.errorMessages.length;i++){q.sap.log.error(E.errorMessages[i].text);}}}return false;});}catch(E){q.sap.log.error("exception occured in sap.ui.fl.fieldExt.Access.getBusinessContexts",E);return false;}}}.bind(this));};
U.openRemoveConfirmationDialog=function(e,t){var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var s;return new Promise(function(r,b){s=T.getText("CTX_REMOVE_TITLE");var d={messageText:t,titleText:s,icon:"sap-icon://question-mark",removeText:T.getText("BTN_FREP_REMOVE"),cancelText:T.getText("BTN_FREP_CANCEL")};var m=new sap.ui.model.json.JSONModel();m.setData(d);var f;var c=function(){if(f){f.close();f.destroy();f=null;}};var o={removeField:function(){c();r(true);},closeDialog:function(){c();r(false);}};if(!f){f=sap.ui.xmlfragment("sap.ui.rta.view.RemoveElementDialog",o);f.setModel(m);}f.open();});};
U.isOverlaySelectable=function(o){return o.isSelectable()&&o.$().is(":visible");};
U.getPropertyValue=function(e,p){var m=e.getMetadata().getPropertyLikeSetting(p);var P=m._sGetter;return e[P]();};
U.getOverlayInstanceForDom=function(d){var i=q(d).attr("id");if(i){return sap.ui.getCore().byId(i);}};
U.getFocusedOverlay=function(){if(document.activeElement){var e=sap.ui.getCore().byId(document.activeElement.id);if(e instanceof sap.ui.dt.ElementOverlay){return e;}}};
U.getFirstFocusableChildOverlay=function(o){var f=O.getFirstChildOverlay(o);while(f&&!this.isOverlaySelectable(f)){f=O.getNextSiblingOverlay(f);}return f;};
U.getNextFocusableSiblingOverlay=function(o){var n=O.getNextSiblingOverlay(o);while(n&&!this.isOverlaySelectable(n)){n=O.getNextSiblingOverlay(n);}return n;};
U.getPreviousFocusableSiblingOverlay=function(o){var p=O.getPreviousSiblingOverlay(o);while(p&&!this.isOverlaySelectable(p)){p=O.getPreviousSiblingOverlay(p);}return p;};
U.getIndex=function(p,c,A,g){var i;if(g&&typeof g==="function"){i=g.call(null,p,c);}else{var m=p.getMetadata();var o=m.getAggregation(A);var G=o._sGetter;var C=p[G]();if(c){i=C.indexOf(c)+1;}else{i=C.length;}}return i;};
U.createFieldLabelId=function(p,e,b){return(p.getId()+"_"+e+"_"+b).replace("/","_");};
U.getLabelForElement=function(e,f){if(f){return f(e);}else{var s=e.getText&&e.getText();if(!s){s=e.getLabelText&&e.getLabelText();}if(!s){s=e.getLabel&&e.getLabel();if(s&&s.getText){s=s.getText();}}if(!s){s=e.getTitle&&e.getTitle();}if(!s){s=e.getId&&e.getId();}return(typeof s)==="string"?s:undefined;}};
U.getPathFromBindingInfo=function(i,b){var p=b[i]?b[i]:undefined;if(p){if((p.parts instanceof Array)&&p.parts.length>0){p=p.parts[0]?p.parts[0]:undefined;}p=((typeof p.path)==="string")?p.path:p;}if((typeof p)==="string"){p=p;}else{p=undefined;}return p;};
U.getBoundEntityType=function(e,m){var _=m?m:e.getModel();var b=e.getBindingContext();if(b){var E=_.oMetadata._getEntityTypeByPath(b.getPath());return E.name;}return"";};
U.openNewWindow=function(u){window.open(u,"_blank");};
U.getElementBindingPaths=function(e){var p={};if(e.mBindingInfos){for(var i in e.mBindingInfos){var P=e.mBindingInfos[i].parts[0].path?e.mBindingInfos[i].parts[0].path:"";P=P.split("/")[P.split("/").length-1];p[P]={valueProperty:i};}}return p;};
U.getFiori2Renderer=function(){var c=U.getUshellContainer()||{};return typeof c.getRenderer==="function"?c.getRenderer("fiori2"):undefined;};
U.getUshellContainer=function(){return sap.ushell&&sap.ushell.Container;};
return U;},true);
sap.ui.predefine('sap/ui/rta/command/BaseCommand',['sap/ui/base/ManagedObject'],function(M){"use strict";
var B=M.extend("sap.ui.rta.command.BaseCommand",{metadata:{library:"sap.ui.rta",properties:{name:{type:"string"}},associations:{element:{type:"sap.ui.core.Element"}},events:{}}});
B.prototype.getElement=function(){var i=this.getAssociation("element");return sap.ui.getCore().byId(i);};
B.prototype.prepare=function(){};
B.prototype.execute=function(){};
B.prototype.undo=function(){};
B.prototype.isEnabled=function(){return true;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/CommandFactory',['sap/ui/base/ManagedObject','sap/ui/dt/ElementUtil','sap/ui/fl/registry/ChangeRegistry'],function(M,E,C){"use strict";var g=function(s,l){var r=C.getInstance().getRegistryItems({controlType:s,changeTypeName:l});if(r&&r[s]&&r[s][l]){var R=r[s][l];return R.getChangeTypeMetadata().getChangeHandler();}else{jQuery.sap.log.warning("No '"+l+"' change handler for "+s+" registered");}};var c=function(o,l,A){var s;if(typeof(A)==="string"){s=A;}else{s=A&&A.changeType;}if(!s){return false;}var n=o.getMetadata().getName();var p=g(n,s);if(!p){return false;}l.setChangeHandler(p);l.setChangeType(s);return true;};var f=function(o,s,D){var n=s.element||sap.ui.getCore().byId(s.element.id);var A=D.getAggregationAction("createContainer",n)[0];return A;};var a=function(o,s,l){var S=s.source.publicAggregation;var A=l.createAggregationDesignTimeMetadata(S);var n=s.movedElements[0].element||sap.ui.getCore().byId(s.movedElements[0].id);var p=A.getMoveAction(n);A.destroy();return p;};var b=function(o,s,D){var r=s.renamedElement;var A=D.getAction("rename",r);return A;};var d=function(o,s,D){var r=s.removedElement;if(!r){r=o;}else if(!(r instanceof M)){throw new Error("No valid 'removedElement' found");}var A=D.getAction("remove",r);return A;};var e=function(o,s,D){var l=s.source;var A=D.getAction("combine",l);return A;};var h=function(o,s,D){var S=s.source;var A=D.getAction("split",S);return A;};var i=function(o,s,D){var n=s.element;var A=D.getAggregationAction("addODataProperty",n)[0];return A;};var j=function(o,s,D){var r=s.hiddenParent;var A=D.getAction("reveal",r);return A;};var m={"composite":{clazz:'sap.ui.rta.command.CompositeCommand'},"property":{clazz:'sap.ui.rta.command.Property'},"bindProperty":{clazz:'sap.ui.rta.command.BindProperty'},"createContainer":{clazz:'sap.ui.rta.command.CreateContainer',configure:f},"move":{clazz:'sap.ui.rta.command.Move',configure:a},"remove":{clazz:'sap.ui.rta.command.Remove',configure:d},"rename":{clazz:'sap.ui.rta.command.Rename',configure:b},"addODataProperty":{clazz:'sap.ui.rta.command.AddODataProperty',configure:i},"reveal":{clazz:'sap.ui.rta.command.Reveal',configure:j},"combine":{clazz:'sap.ui.rta.command.Combine',configure:e},"split":{clazz:'sap.ui.rta.command.Split',configure:h},"settings":{clazz:'sap.ui.rta.command.Settings'}};
var k=M.extend("sap.ui.rta.command.CommandFactory",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
k.getCommandFor=function(v,s,S,D){s=s[0].toLowerCase()+s.slice(1);var l=m[s];if(!l){throw new Error("Command '"+s+"' doesn't exist, check typing");}var n;if(l.findClass){n=l.findClass(v,s);}else{n=l.clazz;}jQuery.sap.require(n);var o=jQuery.sap.getObject(n);var I=v instanceof sap.ui.base.ManagedObject;S=jQuery.extend(S,{element:I?v:undefined,selector:I?undefined:v,name:s});var A;if(l.configure){A=l.configure(v,S,D);}if(A&&A.changeOnRelevantContainer){S=jQuery.extend(S,{element:D.getRelevantContainer(v)});v=S.element;}if(A&&A.getState){S=jQuery.extend(S,{fnGetState:A.getState});}if(A&&A.restoreState){S=jQuery.extend(S,{fnRestoreState:A.restoreState});}var p=new o(S);var q=true;if(l.configure){q=c(v,p,A);}if(q){p.prepare();return p;}else{p.destroy();}};
return k;},true);
sap.ui.predefine('sap/ui/rta/command/CompositeCommand',['sap/ui/rta/command/BaseCommand'],function(B){"use strict";
var C=B.extend("sap.ui.rta.command.CompositeCommand",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{}}});
C.prototype.execute=function(){this._forEachCommand(function(c){c.execute();});};
C.prototype.undo=function(){this._forEachCommandInReverseOrder(function(c){c.undo();});};
C.prototype._forEachCommand=function(d){var c=this.getCommands();c.forEach(d,this);};
C.prototype._forEachCommandInReverseOrder=function(d){var c=this.getCommands();for(var i=c.length-1;i>=0;i--){d.call(this,c[i]);}};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/FlexCommand',['sap/ui/rta/command/BaseCommand',"sap/ui/fl/FlexControllerFactory","sap/ui/rta/ControlTreeModifier","sap/ui/fl/Utils"],function(B,F,R,U){"use strict";
var a=B.extend("sap.ui.rta.command.FlexCommand",{metadata:{library:"sap.ui.rta",properties:{changeHandler:{type:"any"},changeType:{type:"string"},fnGetState:{type:"any"},state:{type:"any"},fnRestoreState:{type:"any"},selector:{type:"object"}},associations:{},events:{}}});
a.prototype.getElementId=function(){var e=this.getElement();return e?e.getId():this.getSelector().id;};
a.prototype.getAppComponent=function(){var e=this.getElement();return e?U.getAppComponentForControl(e):this.getSelector().appComponent;};
a.prototype.prepare=function(){this._oPreparedChange=this._createChange();};
a.prototype.getPreparedChange=function(){if(!this._oPreparedChange){this.prepare();}return this._oPreparedChange;};
a.prototype.execute=function(){var c=this.getPreparedChange();this._applyChange(c);};
a.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),selector:{id:this.getElementId()}};};
a.prototype._createChange=function(){return this._createChangeFromData(this._getChangeSpecificData());};
a.prototype._createChangeFromData=function(c){var f=F.createForControl(this.getAppComponent());return f.createChange(c,this.getElement()||this.getSelector());};
a.prototype.undo=function(){if(this.getFnRestoreState()){this.getFnRestoreState()((this.getElement()||this.getSelector()),this.getState());}else if(this._aRecordedUndo){R.performUndo(this._aRecordedUndo);}else{jQuery.sap.log.warning("Undo is not available for "+this.getElement()||this.getSelector());}};
a.prototype._applyChange=function(c){var C=c.change||c;var A=this.getAppComponent();var s=R.bySelector(C.getSelector(),A);if(this.getFnGetState()){this.setState.call(this,(this.getFnGetState()(this.getElement()||this.getSelector())));}else{R.startRecordingUndo();}this.getChangeHandler().applyChange(C,s,{modifier:R,appComponent:A});if(!this.getFnGetState()){this._aRecordedUndo=R.stopRecordingUndo();}};
return a;},true);
sap.ui.predefine('sap/ui/rta/library',['jquery.sap.global','sap/ui/core/Core','sap/ui/core/library'],function(q,C,c){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.rta",version:"1.46.2",dependencies:["sap.ui.core","sap.m","sap.ui.fl","sap.ui.dt"],types:[],interfaces:[],controls:[],elements:[]});return sap.ui.rta;},true);
sap.ui.predefine('sap/ui/rta/plugin/CutPaste',['jquery.sap.global','sap/ui/dt/plugin/CutPaste','sap/ui/dt/OverlayUtil','sap/ui/rta/plugin/Plugin','sap/ui/rta/plugin/RTAElementMover'],function(q,C,O,P,R){"use strict";
var a=C.extend("sap.ui.rta.plugin.CutPaste",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
a.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R());};
a.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){P.prototype.addToPluginsList.apply(this,arguments);}};
a.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);};
a.prototype.paste=function(t){this._executePaste(t);this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});this.stopCutAndPaste();};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/DragDrop',['jquery.sap.global','sap/ui/dt/plugin/ControlDragDrop','sap/ui/rta/plugin/RTAElementMover','sap/ui/rta/plugin/Plugin'],function(q,C,R,P){"use strict";
var D=C.extend("sap.ui.rta.plugin.DragDrop",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
D.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R());};
D.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);P.prototype.addToPluginsList.apply(this,arguments);}};
D.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);this._detachMovableBrowserEvents(o);};
D.prototype._attachMovableBrowserEvents=function(o){o.attachBrowserEvent("mouseover",this._onMouseOver,this);o.attachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype._detachMovableBrowserEvents=function(o){o.detachBrowserEvent("mouseover",this._onMouseOver,this);o.detachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype.onDragStart=function(o){this.fireDragStarted();C.prototype.onDragStart.apply(this,arguments);this.getDesignTime().getSelection().forEach(function(o){o.setSelected(false);});o.$().addClass("sapUiRtaOverlayPlaceholder");};
D.prototype.onDragEnd=function(o){this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});o.$().removeClass("sapUiRtaOverlayPlaceholder");o.setSelected(true);o.focus();C.prototype.onDragEnd.apply(this,arguments);};
D.prototype.onMovableChange=function(o){C.prototype.onMovableChange.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);}else{this._detachMovableBrowserEvents(o);}};
D.prototype._onMouseOver=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o!==this._oPreviousHoverTarget){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}this._oPreviousHoverTarget=o;o.$().addClass("sapUiRtaOverlayHover");}e.preventDefault();e.stopPropagation();};
D.prototype._onMouseLeave=function(e){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}delete this._oPreviousHoverTarget;e.preventDefault();e.stopPropagation();};
return D;},true);
sap.ui.predefine('sap/ui/rta/plugin/MultiSelection',['sap/ui/rta/plugin/Plugin','sap/ui/dt/ElementUtil','sap/ui/rta/Utils'],function(P,E,R){"use strict";
var M=P.extend("sap.ui.rta.plugin.MultiSelection",{metadata:{library:"sap.ui.rta",properties:{multiSelectionTypes:{type:"string[]"}}}});
M.prototype.init=function(){P.prototype.init.apply(this,arguments);this._fnKeyDown=this._onKeyDown.bind(this);this._fnKeyUp=this._onKeyUp.bind(this);window.addEventListener("keydown",this._fnKeyDown);window.addEventListener("keyup",this._fnKeyUp);};
M.prototype.exit=function(){P.prototype.exit.apply(this,arguments);window.removeEventListener("keydown",this._fnKeyDown);window.removeEventListener("keyup",this._fnKeyUp);};
M.prototype.setDesignTime=function(d){this._oDesignTime=d;if(this._oDesignTime){this._oDesignTime.detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(d){d.attachSelectionChange(this._onDesignTimeSelectionChange,this);}};
M.prototype._onKeyDown=function(e){if(sap.ui.Device.os.name===sap.ui.Device.os.OS.WINDOWS){if(e.keyCode===17){this._oDesignTime.setSelectionMode(sap.ui.dt.SelectionMode.Multi);}}else if(sap.ui.Device.os.name===sap.ui.Device.os.OS.MACINTOSH){if(e.keyCode===91||e.keyCode===93){this._oDesignTime.setSelectionMode(sap.ui.dt.SelectionMode.Multi);}}};
M.prototype._onKeyUp=function(e){if(sap.ui.Device.os.name===sap.ui.Device.os.OS.WINDOWS){if(e.keyCode===17){this._oDesignTime.setSelectionMode(sap.ui.dt.SelectionMode.Single);}}else if(sap.ui.Device.os.name===sap.ui.Device.os.OS.MACINTOSH){if(e.keyCode===91||e.keyCode===93){this._oDesignTime.setSelectionMode(sap.ui.dt.SelectionMode.Single);}}};
M.prototype._onDesignTimeSelectionChange=function(e){if(this._oDesignTime.getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}var m=this.getMultiSelectionTypes();var b=true;var c=e.getParameter("selection")[e.getParameter("selection").length-1];var s=this._oDesignTime.getSelection();if(s&&s.length===1){c.setSelected(true);return;}if(!c||this._oDesignTime.getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}m.forEach(function(t,i,a){s.forEach(function(S){if(!E.isInstanceOf(S.getElementInstance(),t)){b=false;}});c.setSelected(b);});};
return M;},true);
sap.ui.predefine('sap/ui/rta/plugin/Plugin',['sap/ui/dt/Plugin','sap/ui/fl/Utils','sap/ui/fl/registry/ChangeRegistry'],function(P,F,C){"use strict";
var B=P.extend("sap.ui.rta.plugin.Plugin",{metadata:{"abstract":true,library:"sap.ui.rta",properties:{userDependentMode:{type:"boolean",defaultValue:false},commandFactory:{type:"object",multiple:false}},events:{elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
B.prototype._isEditable=function(){};
B.prototype._isEditableByPlugin=function(o){var p=this.getMetadata().getName();var a=o.getEditableByPlugins();return a.indexOf(p)>-1;};
B.prototype.registerElementOverlay=function(o){if(this._isEditable(o)){this.addToPluginsList(o);}};
B.prototype.deregisterElementOverlay=function(o){this.removeFromPluginsList(o);};
B.prototype.hasStableId=function(o){var s=false;var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var p=o.getPublicParentAggregationOverlay()?o.getPublicParentAggregationOverlay().getDesignTimeMetadata():null;if(!p&&o.isInHiddenTree()){return false;}var g;if(o.isInHiddenTree()){g=p.getData().getStableElements;}else{g=d.getData().getStableElements;}if(g){var S=g(e);var u=S?S.some(function(v){var c=v.id||v;if(!F.checkControlId(c,v.appComponent)){return true;}}):true;s=!u;}else{s=F.checkControlId(e);}return s;};
B.prototype.checkAggregations=function(o,r,a){var i=false;var c=function(t,p){if(t===r){var A,s;if(p.isInHiddenTree()){A=p.getDesignTimeMetadata().getAction(a,o.getElementInstance());}else{A=p.getDesignTimeMetadata().getAction(a,t.getElementInstance());}s=A?A.changeType:null;var e=r.getElementInstance();if(s&&this.hasChangeHandler(s,e)){i=true;}}else{return c.bind(this,t.getParent(),t)();}};c.bind(this,o)();return i;};
B.prototype.checkAggregationsOnSelf=function(o,a){var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var i=false;var A=d.getAggregationAction(a,o.getElementInstance())[0];var c=A?A.changeType:null;if(c&&this.hasChangeHandler(c,e)){i=true;}return i;};
B.prototype.removeFromPluginsList=function(o){o.removeEditableByPlugin(this.getMetadata().getName());if(!o.getEditableByPlugins().length){o.setEditable(false);}};
B.prototype.addToPluginsList=function(o){o.addEditableByPlugin(this.getMetadata().getName());o.setEditable(true);};
B.prototype.hasChangeHandler=function(c,e){var h=false;var s=e.getMetadata().getName();var r=C.getInstance().getRegistryItems({controlType:s,changeTypeName:c});if(r&&r[s]&&r[s][c]){var R=r[s][c];h=!!R.getChangeTypeMetadata().getChangeHandler();}return h;};
return B;},true);
sap.ui.predefine('sap/ui/rta/plugin/RTAElementMover',['sap/ui/dt/plugin/ElementMover','sap/ui/dt/OverlayUtil','sap/ui/dt/ElementUtil','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/rta/command/CommandFactory','sap/ui/rta/plugin/Plugin','sap/ui/dt/OverlayRegistry'],function(E,O,a,F,U,C,P,b){"use strict";
var R=E.extend("sap.ui.rta.plugin.RTAElementMover",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"any",defaultValue:C},movableTypes:{type:"string[]",defaultValue:["sap.ui.core.Element"]}},associations:{},events:{}}});
function g(o,I){var r;if(o.isInHiddenTree()&&o.getPublicParentElementOverlay()){r=o.getPublicParentElementOverlay().getElementInstance();}else if(!o.isInHiddenTree()){var e=o.getElementInstance();var d=o.getDesignTimeMetadata();if(I&&!d.getData().getRelevantContainer){r=e;}else{r=d.getRelevantContainer(e);}}return r;}
function i(o){var v=false;var d=o.getDesignTimeMetadata();if(!d){return false;}var r=g(o);var p;var c=sap.ui.dt.OverlayRegistry.getOverlay(r);if(c){p=c.getDesignTimeMetadata();}if(!p){return false;}if(!v){v=P.prototype.checkAggregations(o,c,"move");}if(v){if(!o.isInHiddenTree()){v=P.prototype.hasStableId(o)&&P.prototype.hasStableId(c)&&P.prototype.hasStableId(o.getParentElementOverlay());}else{v=P.prototype.hasStableId(o)&&P.prototype.hasStableId(c);}}return v;}
function h(A,e){var p=A.getDesignTimeMetadata();return!!p.getMoveAction(e);}
function H(o,e){var p=o.getPublicParentAggregationOverlay();if(p){return h(p,e);}return false;}
E.prototype.isMovableType=function(e){return true;};
R.prototype.checkMovable=function(o){return i(o);};
R.prototype.checkTargetZone=function(A){var t=E.prototype.checkTargetZone.call(this,A);var v,m=false;var M,T;var o,c,d,e;if(t){M=this.getMovedOverlay();T=A.getParent();d=g(M,false);e=g(T,true);if(!d||!e){return false;}else{o=M.getElementInstance();c=T.getElementInstance();v=i(M);if(c===e){m=h(A,o);}else{m=H(T,o);}t=(d===e)&&v&&m;}}return t;};
R.prototype.buildMoveCommand=function(){var m=this.getMovedOverlay();var M=m.getElementInstance();var s=this._getSource();var p=s.publicParent;var S=b.getOverlay(p);var t=O.getParentInformation(m);var c=s.index;var T=t.index;var d=this._compareSourceAndTarget(s,t);if(d){return undefined;}delete s.index;delete t.index;var o=this.getCommandFactory().getCommandFor(p,"Move",{movedElements:[{element:M,sourceIndex:c,targetIndex:T}],source:s,target:t},S.getDesignTimeMetadata());return o;};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Rename',['jquery.sap.global','sap/ui/rta/plugin/Plugin','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/dt/DOMUtil'],function(q,P,E,O,a,U,D){"use strict";
var R=P.extend("sap.ui.rta.plugin.Rename",{metadata:{library:"sap.ui.rta",properties:{oldValue:"string"},associations:{},events:{"editable":{},"nonEditable":{}}}});
R.prototype.exit=function(){P.prototype.exit.apply(this,arguments);if(this._$oEditableControlDomRef){this._stopEdit();}clearTimeout(this._iStopTimeout);};
R.prototype.setDesignTime=function(d){this._aSelection=[];var o=this.getDesignTime();if(o){o.detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(d){d.attachSelectionChange(this._onDesignTimeSelectionChange,this);this._aSelection=d.getSelection();}};
R.prototype._getEffectiveDesignTimeMetadata=function(o){var d;if(o.isInHiddenTree()){var p=o.getPublicParentAggregationOverlay();if(p){d=p.getDesignTimeMetadata();}}else{d=o.getDesignTimeMetadata();}return d;};
R.prototype._getRenameAction=function(o){var d=this._getEffectiveDesignTimeMetadata(o);if(d&&d.getAction){return d.getAction("rename",o.getElementInstance());}};
R.prototype.isRenameAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRenameEnabled=function(o){var A=this._getRenameAction(o);if(!A){return false;}if(typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){return A.isEnabled(o.getElementInstance());}else{return A.isEnabled;}}return true;};
R.prototype.registerElementOverlay=function(o){o.attachEvent("editableChange",this._manageClickEvent,this);P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var b=o.getElementInstance();if(!U.getPublicParentDesigntimeMetadata(o)){return false;}var r=this._getRenameAction(o);if(r&&r.changeType){if(o.isInHiddenTree()){e=this.hasChangeHandler(r.changeType,o.getPublicParentElementOverlay().getElementInstance());}else{e=this.hasChangeHandler(r.changeType,b);}}if(e){return this.hasStableId(o);}return e;};
R.prototype.deregisterElementOverlay=function(o){o.detachEvent("editableChange",this._manageClickEvent,this);o.detachBrowserEvent("click",this._onClick,this);this.removeFromPluginsList(o);};
R.prototype._onClick=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(this.isRenameEnabled(o)){this.startEdit(o);e.preventDefault();}};
R.prototype._onDesignTimeSelectionChange=function(e){var s=e.getParameter("selection");this._aSelection.forEach(this._manageClickEvent,this);s.forEach(this._manageClickEvent,this);this._aSelection=s;};
R.prototype._manageClickEvent=function(e){var o=e.getSource?e.getSource():e;if(o.isSelected()&&this.isRenameAvailable(o)){o.attachBrowserEvent("click",this._onClick,this);}else{o.detachBrowserEvent("click",this._onClick,this);}};
R.prototype.startEdit=function(o){this._oEditedOverlay=o;var e=o.getElementInstance();var d=this._getEffectiveDesignTimeMetadata(this._oEditedOverlay);var v=d.getAction("rename",e).domRef;var b=d.getAssociatedDomRef(e,v);this._$oEditableControlDomRef=q(b);var c=sap.ui.dt.OverlayRegistry.getOverlay(b.id)||o;var w=q("<div class='sapUiRtaEditableField'></div>").appendTo(c.$());this._$editableField=q("<div contentEditable='true'></div>").appendTo(w);if(this._$oEditableControlDomRef.text()===""){this._$oEditableControlDomRef.text("_?_");this._$editableField.text("");}else{this._$editableField.text(this._$oEditableControlDomRef.text());}D.copyComputedStyles(this._$oEditableControlDomRef,this._$editableField);this._$editableField.children().remove();this._$editableField.offset({left:this._$oEditableControlDomRef.offset().left-1});this._$editableField.offset({top:this._$oEditableControlDomRef.offset().top-1});this._$editableField.css({"-moz-user-modify":"read-write","-webkit-user-modify":"read-write","-ms-user-modify":"read-write","user-modify":"read-write","text-overflow":"clip"});this._$oEditableControlDomRef.css("visibility","hidden");this._$editableField.one("focus",this._onEditableFieldFocus.bind(this));this._$editableField.on("blur",this._onEditableFieldBlur.bind(this));this._$editableField.on("keydown",this._onEditableFieldKeydown.bind(this));this._$editableField.on("dragstart",this._stopPropagation.bind(this));this._$editableField.on("drag",this._stopPropagation.bind(this));this._$editableField.on("dragend",this._stopPropagation.bind(this));this._$editableField.on("click",this._stopPropagation.bind(this));this._$editableField.on("mousedown",this._stopPropagation.bind(this));this._$editableField.focus();o.setSelected(true);this.setOldValue(this._getCurrentEditableFieldText());};
R.prototype._stopPropagation=function(e){e.stopPropagation();};
R.prototype._onEditableFieldFocus=function(e){this._oEditedOverlay.setSelected(false);var b=e.target;var r=document.createRange();r.selectNodeContents(b);var s=window.getSelection();s.removeAllRanges();s.addRange(r);};
R.prototype._stopEdit=function(r){if(this._$oEditableControlDomRef.text()==="_?_"){this._$oEditableControlDomRef.text("");}this._oEditedOverlay.$().find(".sapUiRtaEditableField").remove();this._$oEditableControlDomRef.css("visibility","visible");if(r){var o=this._oEditedOverlay;this._iStopTimeout=setTimeout(function(){o.setSelected(true);o.focus();},500);}this._oEditedOverlay.setSelected(false);delete this._$editableField;delete this._$oEditableControlDomRef;delete this._oEditedOverlay;};
R.prototype._onEditableFieldBlur=function(e){this._emitLabelChangeEvent();this._stopEdit();};
R.prototype._onEditableFieldKeydown=function(e){switch(e.keyCode){case q.sap.KeyCodes.ENTER:this._emitLabelChangeEvent();this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.ESCAPE:this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.DELETE:e.stopPropagation();break;}};
R.prototype._emitLabelChangeEvent=function(){var t=this._getCurrentEditableFieldText();if(this.getOldValue()!==t){this._$oEditableControlDomRef.text(t);try{var r;var e;var o=this._oEditedOverlay.getElementInstance();var d=this._getEffectiveDesignTimeMetadata(this._oEditedOverlay);if(this._oEditedOverlay.isInHiddenTree()){e=this._oEditedOverlay.getPublicParentElementOverlay().getElementInstance();}else{e=o;}r=this.getCommandFactory().getCommandFor(e,"rename",{renamedElement:o,newValue:t},d);this.fireElementModified({"command":r});}catch(b){q.sap.log.error("Error during rename : ",b);}}};
R.prototype._getCurrentEditableFieldText=function(){return this._$editableField.text();};
return R;},true);
sap.ui.predefine('sap/ui/rta/ui/ToolsMenu',['sap/ui/rta/library','sap/ui/core/Control','sap/m/Toolbar','sap/m/ToolbarLayoutData','sap/m/ToolbarSpacer','sap/m/Label','sap/ui/core/Popup','sap/ui/fl/registry/Settings','sap/ui/fl/Utils','sap/ui/rta/Utils'],function(l,C,T,a,b,L,P,F,c,U){"use strict";
var d=C.extend("sap.ui.rta.ui.ToolsMenu",{metadata:{library:"sap.ui.rta",aggregations:{"toolbars":{type:"sap.m.Toolbar",multiple:true,singularName:"toolbar"}},events:{"undo":{},"redo":{},"close":{},"toolbarClose":{},"restore":{},"transport":{}}}});
d.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");};
d.prototype.createToolbar=function(t){var s=null;var z=P.getNextZIndex();if(!this._oToolBar){var r=U.getFiori2Renderer();if(r&&!t){this._oToolBar=r.addSubHeader("sap.m.Bar",{},false,true);this._oToolBar.addStyleClass("sapUiRTAFioriToolBar");}else{this._oToolBar=new T({active:true});jQuery("body").prepend('<div id="RTA-Toolbar" style="z-index: '+z+'"></div>');var o=jQuery("#RTA-Toolbar").addClass("sapUiRTAToolsMenuWrapper");o=o[0];this.placeAt(o);this.addToolbar(this._oToolBar);}this._oToolBar.addStyleClass("sapUiRTAToolBar");var A=null;var B=null;var S=null;A=new L({text:this._oRb.getText("TOOLBAR_TITLE"),layoutData:new a({shrinkable:false})});A.bAllowTextSelection=false;s=this._oRb.getText("BTN_UNDO");this._oButtonUndo=new sap.m.Button({type:"Transparent",icon:"sap-icon://undo",enabled:false,tooltip:s,layoutData:new a({shrinkable:false})});this._oButtonUndo.data("Action","UNDO",true);this._oButtonUndo.attachEvent('press',this._onUndo,this);s=this._oRb.getText("BTN_REDO");this._oButtonRedo=new sap.m.Button({type:"Transparent",icon:"sap-icon://redo",iconFirst:false,enabled:false,tooltip:s,layoutData:new a({shrinkable:false})});this._oButtonRedo.data("Action","REDO",true);this._oButtonRedo.attachEvent('press',this._onRedo,this);s=this._oRb.getText("BTN_RESTORE");this._oButtonRestore=new sap.m.Button({type:"Transparent",text:s,visible:true,tooltip:s,layoutData:new a({shrinkable:false})});this._oButtonRestore.data("Action","RESTORE",true);this._oButtonRestore.attachEvent('press',this._onRestore,this);s=this._oRb.getText("BTN_EXIT");B=new sap.m.Button({type:"Transparent",text:s,tooltip:s,layoutData:new a({shrinkable:false})});B.data("Action","EXIT",true);B.attachEvent('press',this.close,this);s=this._oRb.getText("BTN_PUBLISH");this._oButtonPublish=new sap.m.Button({type:"Transparent",text:s,visible:false,tooltip:s,layoutData:new a({shrinkable:false})});this._oButtonPublish.data("Action","TRANSPORT",true);this._oButtonPublish.attachEvent('press',this._onTransport,this);S=new b();return F.getInstance(c.getComponentClassName(this._oRootControl)).then(function(e){var f=!e.isProductiveSystem()&&!e.hasMergeErrorOccured();this._oButtonPublish.setVisible(f);}.bind(this)).catch(function(e){this._oButtonPublish.setVisible(false);}.bind(this)).then(function(){if(U.getFiori2Renderer()){this._oToolBar.addContentLeft(A);this._oToolBar.addContentRight(this._oButtonUndo);this._oToolBar.addContentRight(this._oButtonRedo);this._oToolBar.addContentRight(this._oButtonRestore);this._oToolBar.addContentRight(this._oButtonPublish);this._oToolBar.addContentRight(B);}else{this._oToolBar.addContent(A);this._oToolBar.addContent(S);this._oToolBar.addContent(this._oButtonUndo);this._oToolBar.addContent(this._oButtonRedo);this._oToolBar.addContent(this._oButtonRestore);this._oToolBar.addContent(this._oButtonPublish);this._oToolBar.addContent(B);}sap.ui.getCore().applyChanges();this._oToolBar.addStyleClass("sapUiRTAToolBarContentVisible");}.bind(this));}else{this._oToolBar.addStyleClass("sapUiRTAToolBarContentVisible");}};
d.prototype.exit=function(){jQuery("#RTA-Toolbar").remove();};
d.prototype._onTransport=function(){this.fireTransport();};
d.prototype.show=function(){var r=U.getFiori2Renderer();if(r){r.showSubHeader(this._oToolBar.getId(),false,["home","app"]);r.setHeaderVisibility(false,false,["home","app"]);sap.ui.getCore().applyChanges();}this._oToolBar.addStyleClass("sapUiRTAToolBarVisible");this._oToolBar.removeStyleClass("sapUiRTAToolBarInvisible");};
d.prototype.hide=function(){return new Promise(function(r){var t=document.getElementsByClassName("sapUiRTAToolBar")[0];var A=function(){var R=U.getFiori2Renderer();if(R){R.setHeaderVisibility(true,false,["home","app"]);R.hideSubHeader(this._oToolBar.getId(),false,["home","app"]);sap.ui.getCore().applyChanges();this._oToolBar.addStyleClass("sapUiRTAToolBarDisplayNone");}r();this.fireClose();}.bind(this);if(t){t.addEventListener("webkitAnimationEnd",A);t.addEventListener("animationend",A);t.addEventListener("oanimationend",A);this._oToolBar.removeStyleClass("sapUiRTAToolBarContentVisible");this._oToolBar.removeStyleClass("sapUiRTAToolBarVisible");this._oToolBar.addStyleClass("sapUiRTAToolBarInvisible");}else{A();}}.bind(this));};
d.prototype._onUndo=function(){this.fireUndo();};
d.prototype._onRedo=function(){this.fireRedo();};
d.prototype._onRestore=function(){this.fireRestore();};
d.prototype.close=function(){this.fireToolbarClose();};
d.prototype.setTitle=function(t){var o=this._oToolBar.getContent()[0];o.setText(t);};
d.prototype.setRootControl=function(o){this._oRootControl=o;};
d.prototype.adaptUndoRedoEnablement=function(e,f){this._oButtonUndo.setEnabled(e);this._oButtonRedo.setEnabled(f);};
d.prototype.adaptTransportEnablement=function(e){this._oButtonPublish.setEnabled(e);};
d.prototype.adaptRestoreEnablement=function(e){this._oButtonRestore.setEnabled(e);};
return d;},true);
sap.ui.predefine('sap/ui/rta/ui/ToolsMenuRenderer',['jquery.sap.global'],function(q){"use strict";var T={};
T.render=function(r,c){if(c.getToolbars().length!==0){c.getToolbars().forEach(function(C){r.renderControl(C);});}};
return T;},true);
jQuery.sap.registerPreloadedModules({
"name":"sap/ui/rta/library-preload",
"version":"2.0",
"modules":{
	"sap/ui/rta/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.ui.rta",\n    "type": "library",\n    "embeds": [],\n    "applicationVersion": {\n      "version": "1.46.2"\n    },\n    "title": "SAPUI5 library with RTA controls.",\n    "description": "SAPUI5 library with RTA controls.",\n    "ach": "CA-UI5-RTA",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": [\n      "base",\n      "sap_belize",\n      "sap_belize_plus",\n      "sap_bluecrystal",\n      "sap_hcb"\n    ]\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.46",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.46.2"\n        },\n        "sap.m": {\n          "minVersion": "1.46.2"\n        }\n      }\n    }\n  }\n}',
	"sap/ui/rta/view/RemoveElementDialog.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core"\n\txmlns:commons="sap.ui.commons" xmlns:layout="sap.ui.layout"\n\txmlns:sap.m="sap.m">\n\t<sap.m:Dialog class="sapUiRtaConfirmationDialog" verticalScrolling="false" title="{/titleText}" icon="{/icon}">\n\t\t<layout:VerticalLayout width="100%">\n\t\t\t<commons:TextView class="sapUiRtaConfirmationDialogText" text="{/messageText}" />\n\t\t</layout:VerticalLayout>\n\t\t<sap.m:beginButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogRemoveButton" text="{/removeText}" press="removeField" />\n\t\t</sap.m:beginButton>\n\t\t<sap.m:endButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogCancelButton" text="{/cancelText}" press="closeDialog" />\n\t\t</sap.m:endButton>\n\t</sap.m:Dialog>\n</core:FragmentDefinition>'
}});
//# sourceMappingURL=library-preload.js.map
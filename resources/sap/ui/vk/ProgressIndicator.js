/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control"],function(q,l,C){"use strict";var P=C.extend("sap.ui.vk.ProgressIndicator",{metadata:{library:"sap.ui.vk",properties:{numberOfFiles:{type:"int",defaultValue:0}},publicMethods:["reset","updateDownloadStatus","updateRenderStatus"],aggregations:{progressBar:{type:"sap.m.ProgressIndicator",multiple:false,visibility:"hidden"},progressText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}}}});P.prototype.init=function(){this._progressBar=new sap.m.ProgressIndicator({width:"100%",height:"0.375em"});this.setAggregation("progressBar",this._progressBar);this._progressText=new sap.m.Text();this._progressText.addStyleClass("sapUiVizkitProgressIndicatorText");this.setAggregation("progressText",this._progressText);this.reset();};P.prototype.reset=function(){this._downloadStatusByFile={};this._downloadStatusTotal=0;this._renderStatusFileCounter=0;this._renderStatusByFile={};this._renderStatusPreviousUpdate=-1;this._renderStatusTotal=0;this.setNumberOfFiles(0);this._progressBar.setPercentValue(0);return this;};P.prototype.updateDownloadStatus=function(f,a,t){if(!t){this._downloadStatusTotal=50;this._progressText.setText(sap.ui.vk.getResourceBundle().getText("PROGRESS_INDICATOR_DOWNLOADING"));}else{var s=a/t*100/this.getNumberOfFiles()/2;this._downloadStatusByFile[f]=s;this._downloadStatusTotal=0;for(var p in this._downloadStatusByFile){if(this._downloadStatusByFile.hasOwnProperty(p)){this._downloadStatusTotal+=this._downloadStatusByFile[p];}}var b=Math.floor(this._downloadStatusTotal+this._renderStatusTotal);this._progressBar.setPercentValue(b);this._progressText.setText(sap.ui.vk.getResourceBundle().getText("PROGRESS_INDICATOR_DOWNLOADING")+b+"%");}return this;};P.prototype.updateRenderStatus=function(c){if(c<this._renderStatusPreviousUpdate){this._renderStatusFileCounter++;}this._renderStatusPreviousUpdate=c;this._renderStatusTotal=(c+this._renderStatusFileCounter)*100/this.getNumberOfFiles()/2;var b=Math.floor(this._downloadStatusTotal+this._renderStatusTotal);this._progressBar.setPercentValue(b);this._progressText.setText(sap.ui.vk.getResourceBundle().getText("PROGRESS_INDICATOR_RENDERING")+b+"%");return this;};return P;});

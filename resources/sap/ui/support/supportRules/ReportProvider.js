/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/thirdparty/handlebars'],function(q,H){"use strict";var r=q.sap.getResourcePath('sap/ui/support/supportRules/ui/Report_template.html');var t={line:function(i,k,u,v,w){i.push("<tr><td ",k?"align='right' ":"","valign='top'>","<label class='sapUiSupportLabel'>",q.sap.escapeHTML(v||""),"</label></td><td",u?" class='sapUiSupportTechInfoBorder'":"",">");var x=w;if(q.isFunction(w)){x=w(i);}i.push(q.sap.escapeHTML(x||""));i.push("</td></tr>");},multiline:function(k,u,w,x,y){var z=this;z.line(k,u,w,x,function(k){k.push("<table border='0' cellspacing='0' cellpadding='3'>");q.each(y,function(i,v){var A="";if(v){if(typeof(v)==="string"||typeof(v)==="string"||typeof(v)==="boolean"){A=v;}else if((q.isArray(v)||q.isPlainObject(v))&&window.JSON){A=window.JSON.stringify(v);}}z.line(k,false,false,i,""+A);});k.push("</table>");});}};function g(u){var C="",E=false;q.ajax({type:"GET",url:u,dataType:"text",success:function(R){C=R;},error:function(R){E=true;},data:{},async:false});if(E){return"";}return C;}function a(k){var u='';if(!k){return new H.SafeString(u);}try{k.modules.sort();var w=["<div class='sapUiSupportToolbar'>","<div><div class='sapUiSupportTechInfoCntnt'>","<table border='0' cellpadding='3'>"];t.line(w,true,true,"SAPUI5 Version",function(i){var v=k.sapUi5Version;if(v&&v.version){var V=v.version;var y=q.sap.escapeHTML(V.version||"");i.push(y," (built at ",q.sap.escapeHTML(V.buildTimestamp||""),", last change ",q.sap.escapeHTML(V.scmRevision||""),")");}else{i.push("not available");}});t.line(w,true,true,"Core Version",function(i){return k.version+" (built at "+k.build+", last change "+k.change+")";});t.line(w,true,true,"Loaded jQuery Version",function(i){return k.jquery;});t.line(w,true,true,"User Agent",function(i){return k.useragent+(k.docmode?", Document Mode '"+k.docmode+"'":"");});t.line(w,true,true,"Application",k.appurl);t.multiline(w,true,true,"Configuration (bootstrap)",k.bootconfig);t.multiline(w,true,true,"Configuration (computed)",k.config);if(!q.isEmptyObject(k.libraries)){t.multiline(w,true,true,"Libraries",k.libraries);}t.multiline(w,true,true,"Loaded Libraries",k.loadedLibraries);t.line(w,true,true,"Loaded Modules",function(y){q.each(k.modules,function(i,v){if(v.indexOf("sap.ui.core.support")<0){y.push("<span>",q.sap.escapeHTML(v||""),"</span>");if(i<k.modules.length-1){y.push(", ");}}});});t.multiline(w,true,true,"URI Parameters",k.uriparams);w.push("</table></div>");u=w.join('');}catch(x){q.sap.log.warning('There was a problem extracting technical info.');}return new H.SafeString(u);}function b(v){if(v){if(q.isArray(v)){return q.sap.escapeHTML(v.join(', '));}else{return q.sap.escapeHTML(v);}}else{return'';}}function c(k){var u={};for(var i=0;i<k.length;i++){var v=k[i];if(!u[v.ruleLibName]){u[v.ruleLibName]={};}if(!u[v.ruleLibName][v.ruleId]){u[v.ruleLibName][v.ruleId]=[];}u[v.ruleLibName][v.ruleId].push(v);}return u;}function d(u,v,w,x){var y='';var z='';var A=1;var B=0;for(var C in v){var D=v[C];B+=D.length;var E=D[0];z+='<tr id="'+w+'_rule_'+A+'" class="filterable" data-severity="'+b(E.severity)+'" data-numberOfIssues="'+D.length+'">';z+='<td>';z+='<div class="expandable-control collapsed-content" data-expandableElement="'+w+'_rule_'+A+'_content">';z+='<div class="expandable-title"> '+A+'. '+b(E.name)+' ('+D.length+' issues) '+'</div></div>';z+='<div id="'+w+'_rule_'+A+'_content">';z+='<div><span class="sapUiSupportLabel">Description: </span>'+b(E.description)+'</div>';z+='<div><span class="sapUiSupportLabel">Resolution: </span>'+b(E.resolution)+'</div>';z+='<div>';if(E.resolutionUrls){for(var k=0;k<E.resolutionUrls.length;k++){z+='<div><a href="'+b(E.resolutionUrls[k].href)+'" target="_blank">'+b(E.resolutionUrls[k].text)+'</a></div>';}}z+='</div>';z+='<table class="sapUiTable"><tr><th></th><th>Element Id</th><th>Class</th><th>Details</th></tr>';for(var i=0;i<D.length;i++){z+='<tr><td>'+(i+1)+'</td><td>'+b(D[i].context.id)+'</td>';z+='<td>'+b(D[i].context.className)+'</td>';z+='<td>'+b(D[i].details)+'</td></tr>';}z+='</table>';z+='</div></td>';z+='<td class="'+b(E.severity)+'">'+b(E.severity)+'</td>';z+='<td>'+b(E.categories)+'</td>';z+='<td>'+b(E.audiences)+'</td>';z+='</tr>';A++;}var F='collapsed-content';if(x===1){F='expanded-content';}y+='<tr>';y+='<td colspan="100" class="expandable-control '+F+'" data-expandableElement="'+w+'" data-groupName="'+u+'" data-groupNumber="'+x+'">';y+='<span class="sapUiSupportLabel expandable-title"> '+x+'. '+u+' ('+(A-1)+' rules, '+B+' issues)</span>';y+='</td></tr><tbody id="'+w+'">';y+=z;y+='</tbody>';return y;}function e(i){var k='';var u={};var v=1;if(!i){return new H.SafeString(k);}try{u=c(i);k+='<table class="sapUiTable"><tr><th>Title</th><th>Status</th><th>Categories</th><th>Audiences</th></tr>';for(var w in u){k+=d(w,u[w],'group'+v,v);v++;}k+='</table>';}catch(x){q.sap.log.warning('There was a problem extracting issues info.');k='';}return new H.SafeString(k);}function f(v){var i='<td>';if(v){i+=q.sap.escapeHTML(v);}i+='</td>';return i;}function h(k){var u='';if(!k){return new H.SafeString(u);}u+='<table class="sapUiTable"><tr><th>Component ID</th><th>Type</th><th>Title</th><th>Subtitle</th><th>Application version</th><th>Description</th><th>BCP Component</th></tr>';try{for(var i=0;i<k.length;i++){var v=k[i];u+='<tr>';u+=f(v.id);u+=f(v.type);u+=f(v.title);u+=f(v.subTitle);if(v.applicationVersion){u+=f(v.applicationVersion.version);}else{u+='<td></td>';}u+=f(v.description);u+=f(v.ach);u+='</tr>';}u+='</table>';}catch(w){q.sap.log.warning('There was a problem extracting app info.');u='';}return new H.SafeString(u);}function j(i,k,u){var v=u?'filter-active':'';return'<div data-severity="'+i+'" class="filter '+v+' '+i+'">'+i+'('+k+')</div>'+' | ';}function l(k){var u='';var v={};var w;var x;if(!k){return new H.SafeString(u);}try{for(var i=0;i<k.length;i++){w=k[i].severity;if(v[w]){v[w]++;}else{v[w]=1;}}u+=j('Total',k.length,true);for(x in v){u+=j(x,v[x],false);}}catch(y){q.sap.log.warning('There was a problem creating severity filters.');u='';}return new H.SafeString(u);}function m(i){var k='';k+='<div><span class="sapUiSupportLabel">'+i.displayName+'</span>';k+='<span class="description"> ('+i.description+')</span></div>';return k;}function n(i,k){var u='';u+='<div><span class="sapUiSupportLabel">'+k.displayName+' with id:</span> '+i;u+='<span class="description"> ('+k.description+')</span></div>';return u;}function o(k,u){var v='';if(k.length>5){v+='<div class="expandable-control collapsed-content" data-expandableElement="execution-scope-components">';v+='<span class="expandable-title"><span class="sapUiSupportLabel">'+u.displayName+'</span>';v+='<span class="description"> ('+u.description+')</span></span></div>';}else{v+='<div><span class="sapUiSupportLabel">'+u.displayName+'</span>';v+='<span class="description"> ('+u.description+')</span></div>';}v+='<ol id="execution-scope-components" class="top-margin-xsmall">';for(var i=0;i<k.length;i++){v+='<li>'+k[i]+'</li>';}v+='</ol>';return v;}function p(i){var k='';try{var u=i.executionScope._getType();var v=i.scopeDisplaySettings.executionScopes[u];var w=i.scopeDisplaySettings.executionScopeTitle;k+='<div class="sapUiSupportLabel">'+w+': </div>';switch(u){case'core':k+=m(v);break;case'parent':k+=n(i.executionScope._getContext().parentId,v);break;case'components':k+=o(i.executionScope._getContext().components,v);break;}}catch(x){q.sap.log.warning('There was a problem extracting scope info.');k='';}return new H.SafeString(k);}H.registerHelper('getTechnicalInformation',function(i){return a(i);});H.registerHelper('getIssues',function(i){return e(i);});H.registerHelper('getAppInfo',function(i){return h(i);});H.registerHelper('getSeverityFilters',function(i){return l(i);});H.registerHelper('getScope',function(i){return p(i);});function s(D){var i=H.compile(g(r));var k={technicalInfo:D.technical,issues:D.issues,appInfo:D.application,metadata:{title:'SAPUI5 Check Results',title_TechnicalInfo:'Technical Information',title_Issues:'Issues',title_AppInfo:'Application Information',timestamp:new Date(),scope:D.scope,analysisDuration:D.analysisDuration,analysisDurationTitle:D.analysisDurationTitle}};return i(k);}return{getReportHtml:s};},true);

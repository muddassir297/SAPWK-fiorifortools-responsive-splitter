sap.ui.define(["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/support/supportRules/WindowCommunicationBus"],function(q,M,C){"use strict";var i=null;function o(u){var t=document.createElement("IFRAME");var s=t.style;t.id="sap-ui-supportToolsFrame";t.src=u;s.width="100%";s.height="50%";s.position="absolute";s.left="0";s.bottom="0";s.border="none";s.zIndex="1001";s.boxShadow="1px -10px 42px -4px #888";document.body.appendChild(t);var p=setTimeout(function(){if(t.parentNode.nodeName!=="BODY"){document.body.appendChild(t);}},500);setTimeout(function(){clearInterval(p);},5000);return t;}var I=M.extend("sap.ui.support.IFrameController",{constructor:function(){if(!i){M.apply(this,arguments);this._setCommunicationSubscriptions();}else{q.sap.log.warning("Only one support tool allowed");return i;}}});I.prototype._setCommunicationSubscriptions=function(){C.subscribe("ensureOpened",function(){if(document.getElementById("sap-ui-supportToolsFrame").style.height==="28px"){this.resizeFrame(true);}},this);C.subscribe("resizeFrame",function(p){i.resizeFrame(p.bigger);});};I.prototype.injectFrame=function(){var t=q.sap.getModulePath("sap.ui.support.supportRules.ui","/overlay.html?sap-ui-xx-formfactor=compact&sap-ui-xx-support-origin="+window.location.protocol+"//"+window.location.host);o(t);};I.prototype.resizeFrame=function(b){var t=document.getElementById("sap-ui-supportToolsFrame").style;if(b){if(t.height==="50%"){t.height="100%";}else if(t.height==="28px"){t.height="50%";}}else{if(t.height==="100%"){t.height="50%";}else if(t.height==="50%"){t.height="28px";}}};I.prototype.toggleHide=function(h){var t=document.getElementById("sap-ui-supportToolsFrame").style;if(h){this._originalSize={width:t.width,height:t.height};t.width="170px";t.height="28px";}else{t.width=this._originalSize.width;t.height=this._originalSize.height;this._originalSize=null;}};I.prototype._stop=function(){this._oCssLink.parentNode.removeChild(this._oCssLink);this._oDomRef.parentNode.removeChild(this._oCssLink);this._oCore=null;};i=new I();return i;},true);

jQuery.sap.declare('sap.ui.support.library-all');if(!jQuery.sap.isDeclared('sap.ui.support.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.support.library');jQuery.sap.require('sap.ui.core.library');sap.ui.define("sap/ui/support/library",["sap/ui/core/library"],function(l){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.support",dependencies:["sap.ui.core","sap.ui.fl","sap.m","sap.ui.layout","sap.ui.codeeditor"],types:["sap.ui.support.Severity"],interfaces:[],controls:[],elements:[],noLibraryCSS:false,version:"1.46.2"});sap.ui.support.Severity={Hint:"Hint",Warning:"Warning",Error:"Error"};sap.ui.support.Audiences={Control:"Control",Internal:"Internal",Application:"Application"};sap.ui.support.Categories={Accessibility:"Accessibility",Performance:"Performance",Memory:"Memory",Bindings:"Bindings",Consistency:"Consistency",Functionality:"Functionality",DataModel:"DataModel",Other:"Other"};return sap.ui.support;});};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.Analyzer')){jQuery.sap.declare('sap.ui.support.supportRules.Analyzer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/support/supportRules/Analyzer",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var A=function(){this.reset();};A.prototype.getProgress=function(){return this._iTotalProgress;};A.prototype.addTask=function(t,T,o){var a={name:t,handler:T,objects:q.extend(true,{arr:o},{}).arr,progress:0};this._aTasks.push(a);this._iTotalSteps=this._iTotalSteps+a.objects.length;};A.prototype.reset=function(){this._iTotalProgress=0;this._iTotalCompletedSteps=0;this._iTotalSteps=0;this._aTasks=[];this._oCurrent={};this._bRunning=false;this._iStartTS=0;this.startedAt=null;this.finishedAt=null;this.elapsedTime=null;};A.prototype.running=function(){return this._bRunning;};A.prototype.start=function(){var t=this;t.startedAt=new Date();var p=new Promise(function(r,a){t._iStartTS=performance.now();t._start(undefined,r);});return p;};A.prototype._start=function(c,r){if(this._bRunning&&!c){return;}if(this._oCurrent.task){if(c){this._next(r);}return;}for(var i=0;i<this._aTasks.length;i++){if(this._aTasks[i].progress<100){this._oCurrent={task:this._aTasks[i],index:-1};this._bRunning=true;q.sap.delayedCall(1,this,"_next",[r]);break;}else{this._bRunning=false;}}};A.prototype._next=function(r){if(!this._bRunning){return;}var c=this._oCurrent;if(c.task){c.index++;if(c.task.objects[c.index]){this._iTotalCompletedSteps++;this._iTotalProgress=Math.min(Math.ceil((this._iTotalCompletedSteps/this._iTotalSteps)*100),100);c.task.handler(c.task.objects[c.index]);c.task.progress=Math.min(Math.ceil((c.index/c.task.objects.length)*100),100);}else{c.task.progress=100;this._iTotalCompletedSteps=this._iTotalCompletedSteps+(c.task.objects.length-c.index);this._iTotalProgress=Math.min(Math.ceil((this._iTotalCompletedSteps/this._iTotalSteps)*100),100);this._oCurrent={};this.finishedAt=new Date();this.elapsedTime=this.finishedAt.getTime()-this.startedAt.getTime();r();}if(performance.now()-this._iStartTS>100){q.sap.delayedCall(5,this,"_start",[true,r]);this._iStartTS=performance.now();}else{q.sap.delayedCall(0,this,"_start",[true,r]);}}};A.prototype.getElapsedTimeString=function(){if(!this.elapsedTime){return;}var d=new Date(null);d.setHours(0,0,0,0);d.setMilliseconds(this.elapsedTime);var b=[(d.getHours()<10?"0":"")+d.getHours(),(d.getMinutes()<10?"0":"")+d.getMinutes(),(d.getSeconds()<10?"0":"")+d.getSeconds(),d.getMilliseconds()];return b.join(":");};return A;},false);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.CoreFacade')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 *
 * An interface to the core to be used by rules
 */
jQuery.sap.declare('sap.ui.support.supportRules.CoreFacade');sap.ui.define("sap/ui/support/supportRules/CoreFacade",[],function(){"use strict";var c=null;function C(o){c=o;return{getMetadata:function(){return c.getMetadata();},getUIAreas:function(){return c.mUIAreas;},getComponents:function(){return c.mObjects.component;},getModels:function(){return c.oModels;}};}return C;},false);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.DataCollector')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.support.supportRules.DataCollector');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.thirdparty.jszip');jQuery.sap.require('sap.ui.core.support.ToolsAPI');jQuery.sap.require('sap.ui.thirdparty.URI');sap.ui.define("sap/ui/support/supportRules/DataCollector",['jquery.sap.global','sap/ui/thirdparty/jszip','sap/ui/core/support/ToolsAPI','sap/ui/thirdparty/URI'],function(q,J,T,U){"use strict";var D=function(c){this._mData={};this._oCore=c;};D.prototype.getAppInfo=function(){var a=[];for(var c in this._oCore.mObjects.component){var b=this._oCore.mObjects.component[c];var s=b.getMetadata().getManifestEntry('sap.app');a.push(s);}return a;};D.prototype.getTechInfoJSON=function(){var c=T.getFrameworkInformation();var t={sapUi5Version:null,version:c.commonInformation.version,build:c.commonInformation.buildTime,change:c.commonInformation.lastChange,jquery:c.commonInformation.jquery,useragent:c.commonInformation.userAgent,docmode:c.commonInformation.documentMode,debug:c.commonInformation.debugMode,bootconfig:c.configurationBootstrap,config:c.configurationComputed,libraries:c.libraries,loadedLibraries:c.loadedLibraries,modules:c.loadedModules,uriparams:c.URLParameters,appurl:c.commonInformation.applicationHREF,title:c.commonInformation.documentTitle,statistics:c.commonInformation.statistics,resourcePaths:[],themePaths:[],locationsearch:document.location.search,locationhash:document.location.hash};var m=q.sap.getAllDeclaredModules();var r=[];for(var i=0;i<m.length;i++){r.push({moduleName:m[i],relativePath:q.sap.getResourcePath(m[i]),absolutePath:U(q.sap.getResourcePath(m[i])).absoluteTo(document.location.origin+document.location.pathname).toString()});}t.resourcePaths=r;var l=this._oCore.getLoadedLibraries();r=[];for(var n in l){var p=this._oCore._getThemePath(n,this._oCore.oConfiguration.theme);r.push({theme:this._oCore.oConfiguration.theme,library:n,relativePath:p,absolutePath:U(p).absoluteTo(document.location.origin+document.location.pathname).toString()});}t.themePaths=r;try{t.sapUi5Version={version:sap.ui.getVersionInfo(),path:sap.ui.resource("","sap-ui-version.json")};}catch(e){t.sapUi5Version=null;}return t;};D.prototype.add=function(n,d,t){if(!n){q.sap.log.error("DataCollector: No name was given.");return false;}if(!d){q.sap.log.error("DataCollector: No data was given.");return false;}if(typeof d==="string"){this._mData[n]=d;return true;}else if(t){if((t==="json"||t==="har")&&(q.isPlainObject(d)||q.isArray(d))){try{this._mData[n]=JSON.stringify(d);return true;}catch(e){q.sap.log.error("DataCollector: JSON data could not be serialized for "+n);}}else{q.sap.log.error("DataCollector: JSON data could not be serialized for "+t+". Either the type is unknown or the data has a wrong format.");}}else{q.sap.log.error("DataCollector: Data could not be serialized for "+n+". Data is is not a string or has a an invalid type.");return false;}return false;};D.prototype.download=function(){var z=new J();if(z){for(var n in this._mData){z.file(n,this._mData[n]);}var c=z.generate({base64:true});var r=window.atob(c),u=new Uint8Array(r.length);for(var i=0;i<u.length;++i){u[i]=r.charCodeAt(i);}var b=new Blob([u],{type:'application/zip'});window.open(URL.createObjectURL(b));}};D.prototype.clear=function(){this._mData={};return true;};D.prototype.hasData=function(n){if(n!==undefined){return this._mData.hasOwnProperty(n);}return Object.keys(this._mData).length>0;};return D;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ElementTree')){jQuery.sap.declare('sap.ui.support.supportRules.ElementTree');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');sap.ui.define("sap/ui/support/supportRules/ElementTree",["jquery.sap.global","sap/ui/base/ManagedObject"],function(q,M){"use strict";function _(h){return(typeof h==="object"&&!Array.isArray(h)&&h!==null);}function a(o){return"<ul "+o.attributes.join(" ")+">";}function b(){return"</ul>";}function c(o,h){var i="<li id=\""+o.id+"\" ";if(h){i+="issue";}i+=">";return i;}function d(){return"</li>";}function e(h,p){var i="<offset style=\"padding-left:"+p+"px\" >";if(h.content.length>0){i+="<arrow down=\"true\"></arrow>";}else{i+="<place-holder></place-holder>";}i+="</offset>";return i;}function f(h,n){var s=h.name.split(".");var i=s[s.length-1];var j=h.name.replace(i,"");var k=(n>0)?"showNumbOfIssues":"hideNumbOfIssues";return"<tag data-search=\""+h.name+h.id+"\">"+"&#60;"+"<namespace>"+j+"</namespace>"+i+"<attribute>&#32;id=\"<attribute-value>"+h.id+"</attribute-value>\"</attribute>"+"&#62;"+"</tag>"+"<span class = "+k+">["+n+"  issue(s)] </span>";}function g(h,p){while(h.nodeName!==p){if(h.nodeName==="CONTROL-TREE"){break;}h=h.parentNode;}return h;}function E(i,h){var j=_(h);var o;if(j){o=h;}else{o={};}this._ElementTreeContainer=document.getElementById(i);this.onIssueCountClicked=o.onIssueCountClicked?o.onIssueCountClicked:function(){};this.onSelectionChanged=o.onSelectionChanged?o.onSelectionChanged:function(s){};this.onHoverChanged=o.onHoverChanged?o.onHoverChanged:function(k){};this.onInitialRendering=o.onInitialRendering?o.onInitialRendering:function(){};this.setData(o.data);}E.prototype.init=function(){this._createHTML();this._createHandlers();this.onInitialRendering();};E.prototype.getData=function(){return this._data;};E.prototype.setData=function(h){var o=this.getData();var i=_(h);if(i===false){q.sap.log.warning("The parameter should be an Object");return;}if(JSON.stringify(o)===JSON.stringify(h)){return;}this._data=h;if(this._isFirstRendering===undefined){this.init();this._isFirstRendering=true;}else{this._createTree();}return this;};E.prototype.getSelectedElement=function(){return this._selectedElement;};E.prototype.setSelectedElement=function(h,n){var s;if(typeof h!=="string"){q.sap.log.warning("Please use a valid string parameter");return;}s=this._ElementTreeContainer.querySelector("#"+h);if(s===null){q.sap.log.warning("The selected element is not a child of the ElementTree");return;}this._selectedElement=s;this._selectTreeElement(s,n);return this;};E.prototype.clearSelection=function(){var s=this._ElementTreeContainer.querySelector("[selected]");if(s){s.removeAttribute("selected");}};E.prototype._createHTML=function(){var h;h=this._createFilter();h+=this._createTreeContainer();this._ElementTreeContainer.innerHTML=h;this._setReferences();if(this.getData()!==undefined){this._createTree();}};E.prototype._createFilter=function(){return"<filter>"+"<end>"+"<label><input type=\"checkbox\" issues checked/>Issues</label>"+"<label><input type=\"checkbox\" namespaces checked/>Namespaces</label>"+"<label><input type=\"checkbox\" attributes/>Attributes</label>"+"</end>"+"</filter>";};E.prototype._createTreeContainer=function(){return"<tree show-namespaces show-problematic-elements></tree>";};E.prototype._createTree=function(){var h=this.getData().controls;this._treeContainer.innerHTML=this._createTreeHTML(h);};E.prototype._createTreeHTML=function(h,l){if(h===undefined||h.length===0){return"";}var i="";var n=l||0;var p=++n*10;var t=this;var j=this.getData().issuesIds;h.forEach(function(k){i+=a({attributes:["expanded=\"true\""]});var m=j[k.id]!==undefined?true:false;var o=0;var o=m?j[k.id].length:0;i+=c({id:k.id},m);i+=e(k,p);i+=f(k,o);i+=d();i+=t._createTreeHTML(k.content,n);i+=b();});return i;};E.prototype._toggleCollapse=function(t){var h=g(t.parentNode,"UL");if(t.getAttribute("right")==="true"){t.removeAttribute("right");t.setAttribute("down","true");h.setAttribute("expanded","true");}else if(t.getAttribute("down")==="true"){t.removeAttribute("down");h.removeAttribute("expanded");t.setAttribute("right","true");}};E.prototype._selectTreeElement=function(t,n){var h=g(t,"LI");if(h.id===this._ElementTreeContainer.id){return;}this._scrollToElement(h);if(n){this.onSelectionChanged(h.id);}if(t.classList.contains("showNumbOfIssues")){this.clearSelection();h.setAttribute("selected","true");if(n){this.onIssueCountClicked(h.id);}}};E.prototype._scrollToElement=function(t){var h=this._treeContainer.offsetHeight-this._treeContainer.offsetTop+this._treeContainer.scrollTop;if(t.offsetTop>h||t.offsetTop<this._treeContainer.scrollTop){this._treeContainer.scrollTop=t.offsetTop-window.innerHeight/6;}};E.prototype._searchInTree=function(u){var s=this._ElementTreeContainer.querySelectorAll("[data-search]");var h=u.toLocaleLowerCase();var j;for(var i=0;i<s.length;i++){j=s[i].getAttribute("data-search").toLocaleLowerCase();if(j.indexOf(h)!==-1){s[i].parentNode.setAttribute("matching",true);}else{s[i].parentNode.removeAttribute("matching");}}};E.prototype._removeAttributesFromSearch=function(){var h=this._treeContainer.querySelectorAll("[matching]");for(var i=0;i<h.length;i++){h[i].removeAttribute("matching");}};E.prototype._setSearchResultCount=function(h){this._filterContainer.querySelector("results").innerHTML="("+h+")";};E.prototype._onArrowClick=function(h){var t=h.target;if(t.nodeName==="ARROW"){this._toggleCollapse(t);}else{this._selectTreeElement(t,true);}};E.prototype._onSearchInput=function(h){var t=h.target;var s;if(t.getAttribute("search")!==null){if(t.value.length!==0){this._searchInTree(t.value);}else{this._removeAttributesFromSearch("matching");}s=this._treeContainer.querySelectorAll("[matching]").length;this._setSearchResultCount(s);}};E.prototype._onSearchEvent=function(h){var s;if(h.target.value.length===0){this._removeAttributesFromSearch("matching");s=this._treeContainer.querySelectorAll("[matching]").length;this._setSearchResultCount(s);}};E.prototype._onOptionsChange=function(h){var t=h.target;if(t.getAttribute("filter")!==null){if(t.checked){this._treeContainer.setAttribute("show-filtered-elements",true);}else{this._treeContainer.removeAttribute("show-filtered-elements");}}if(t.getAttribute("issues")!==null){if(t.checked){this._treeContainer.setAttribute("show-problematic-elements",true);}else{this._treeContainer.removeAttribute("show-problematic-elements");}}if(t.getAttribute("namespaces")!==null){if(t.checked){this._treeContainer.setAttribute("show-namespaces",true);}else{this._treeContainer.removeAttribute("show-namespaces");}}if(t.getAttribute("attributes")!==null){if(t.checked){this._treeContainer.setAttribute("show-attributes",true);}else{this._treeContainer.removeAttribute("show-attributes");}}};E.prototype._onTreeElementMouseHover=function(h){var t=g(h.target,"LI");var i=this._ElementTreeContainer.querySelector("[hover]");if(i){i.removeAttribute("hover");}t.setAttribute("hover","true");this.onHoverChanged(t.id);};E.prototype._createHandlers=function(){this._treeContainer.onclick=this._onArrowClick.bind(this);this._filterContainer.onkeyup=this._onSearchInput.bind(this);this._filterContainer.onsearch=this._onSearchEvent.bind(this);this._filterContainer.onchange=this._onOptionsChange.bind(this);this._ElementTreeContainer.onmouseover=this._onTreeElementMouseHover.bind(this);};E.prototype._setReferences=function(){this._filterContainer=this._ElementTreeContainer.querySelector(":scope > filter");this._treeContainer=this._ElementTreeContainer.querySelector(":scope > tree");};return E;});};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ExecutionScope')){jQuery.sap.declare('sap.ui.support.supportRules.ExecutionScope');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/support/supportRules/ExecutionScope",["jquery.sap.global"],function(q){"use strict";var c=null,_=null,e=[];var a={setScope:function(){for(var i in c.mElements){e.push(c.mElements[i]);}}};var p={setScope:function(){var f=sap.ui.getCore().byId(_.parentId);e=f.findAggregatedObjects(true);}};var b={setScope:function(){var s={};_.components.forEach(function(f){var g=c.mObjects.component[f],h=g.findAggregatedObjects(true);h.forEach(function(j){s[j.getId()]=j;});});for(var i in s){e.push(s[i]);}}};var d={core:a,parent:p,components:b};function E(f,g){c=f;e=[];_=g;d[_.type].setScope();return{getElements:function(){return e;},getElementsByClassName:function(h){if(typeof h==="string"){return e.filter(function(i){return i.getMetadata().getName()===h;});}if(typeof h==="function"){return e.filter(function(i){return i instanceof h;});}},getLoggedObjects:function(t){var l=q.sap.log.getLog(),h=[];l.forEach(function(i){if(!i.supportInfo){return;}var j=e.map(function(n){return n.getId();});var k=!!i.supportInfo.elementId,m=i.supportInfo.type===t||t===undefined,s=!k||(q.inArray(i.supportInfo.elementId,j)>-1);if(typeof t==="function"&&t(i)&&s){h.push(i);return;}if(m&&s){h.push(i);}});return h;},_getType:function(){return _.type;},_getContext:function(){return _;}};}return E;},false);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.Highlighter')){jQuery.sap.declare('sap.ui.support.supportRules.Highlighter');sap.ui.define("sap/ui/support/supportRules/Highlighter",[],function(){"use strict";var _=null;function a(){_.style.display="none";}function b(){_.style.display="block";}function c(){var h=document.createElement("div");h.style.cssText="box-sizing: border-box;border:1px solid blue;background: rgba(20, 20, 200, 0.4);position: absolute";var d=document.createElement("div");d.id="ui5-highlighter";d.style.cssText="position: fixed;top:0;right:0;bottom:0;left:0;z-index: 1000;overflow: hidden;";d.appendChild(h);document.body.appendChild(d);_=document.getElementById("ui5-highlighter");_.onmouseover=a;}return{highlight:function(e){var h;var t;var d;if(_===null&&!document.getElementById("ui5-highlighter")){c();}else{b();}h=_.firstElementChild;t=document.getElementById(e);if(t){d=t.getBoundingClientRect();h.style.top=d.top+"px";h.style.left=d.left+"px";h.style.height=d.height+"px";h.style.width=d.width+"px";}return this;}};});};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.IssueManager')){jQuery.sap.declare('sap.ui.support.supportRules.IssueManager');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/support/supportRules/IssueManager",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var _=[];var a=[];var I={addIssue:function(i){_.push(i);},walkIssues:function(c){_.forEach(c);},clearIssues:function(){if(!_.length){return;}a.push({issues:_.slice()});_=[];},getHistory:function(){this.clearIssues();return a.slice();},createCheckFunctionProxy:function(r){return new C(r);}};var C=function(r){this.oRule=r;};C.prototype.addIssue=function(i){i.rule=this.oRule;if(!sap.ui.support.Severity[i.severity]){throw"The issue from rule "+this.oRule.title+" does not have proper severity defined. Allowed values can be found"+"in sap.ui.support.Severity";}if(!i.context||!i.context.id){throw"The issue from rule '"+this.oRule.title+"' should provide a context id.";}if(!i.details){throw"The issue from rule '"+this.oRule.title+"' should provide details for the generated issue.";}I.addIssue(i);};return I;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ReportProvider')){jQuery.sap.declare('sap.ui.support.supportRules.ReportProvider');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.thirdparty.handlebars');sap.ui.define("sap/ui/support/supportRules/ReportProvider",['jquery.sap.global','sap/ui/thirdparty/handlebars'],function(q,H){"use strict";var r=q.sap.getResourcePath('sap/ui/support/supportRules/ui/Report_template.html');var t={line:function(i,k,u,v,w){i.push("<tr><td ",k?"align='right' ":"","valign='top'>","<label class='sapUiSupportLabel'>",q.sap.escapeHTML(v||""),"</label></td><td",u?" class='sapUiSupportTechInfoBorder'":"",">");var x=w;if(q.isFunction(w)){x=w(i);}i.push(q.sap.escapeHTML(x||""));i.push("</td></tr>");},multiline:function(k,u,w,x,y){var z=this;z.line(k,u,w,x,function(k){k.push("<table border='0' cellspacing='0' cellpadding='3'>");q.each(y,function(i,v){var A="";if(v){if(typeof(v)==="string"||typeof(v)==="string"||typeof(v)==="boolean"){A=v;}else if((q.isArray(v)||q.isPlainObject(v))&&window.JSON){A=window.JSON.stringify(v);}}z.line(k,false,false,i,""+A);});k.push("</table>");});}};function g(u){var C="",E=false;q.ajax({type:"GET",url:u,dataType:"text",success:function(R){C=R;},error:function(R){E=true;},data:{},async:false});if(E){return"";}return C;}function a(k){var u='';if(!k){return new H.SafeString(u);}try{k.modules.sort();var w=["<div class='sapUiSupportToolbar'>","<div><div class='sapUiSupportTechInfoCntnt'>","<table border='0' cellpadding='3'>"];t.line(w,true,true,"SAPUI5 Version",function(i){var v=k.sapUi5Version;if(v&&v.version){var V=v.version;var y=q.sap.escapeHTML(V.version||"");i.push(y," (built at ",q.sap.escapeHTML(V.buildTimestamp||""),", last change ",q.sap.escapeHTML(V.scmRevision||""),")");}else{i.push("not available");}});t.line(w,true,true,"Core Version",function(i){return k.version+" (built at "+k.build+", last change "+k.change+")";});t.line(w,true,true,"Loaded jQuery Version",function(i){return k.jquery;});t.line(w,true,true,"User Agent",function(i){return k.useragent+(k.docmode?", Document Mode '"+k.docmode+"'":"");});t.line(w,true,true,"Application",k.appurl);t.multiline(w,true,true,"Configuration (bootstrap)",k.bootconfig);t.multiline(w,true,true,"Configuration (computed)",k.config);if(!q.isEmptyObject(k.libraries)){t.multiline(w,true,true,"Libraries",k.libraries);}t.multiline(w,true,true,"Loaded Libraries",k.loadedLibraries);t.line(w,true,true,"Loaded Modules",function(y){q.each(k.modules,function(i,v){if(v.indexOf("sap.ui.core.support")<0){y.push("<span>",q.sap.escapeHTML(v||""),"</span>");if(i<k.modules.length-1){y.push(", ");}}});});t.multiline(w,true,true,"URI Parameters",k.uriparams);w.push("</table></div>");u=w.join('');}catch(x){q.sap.log.warning('There was a problem extracting technical info.');}return new H.SafeString(u);}function b(v){if(v){if(q.isArray(v)){return q.sap.escapeHTML(v.join(', '));}else{return q.sap.escapeHTML(v);}}else{return'';}}function c(k){var u={};for(var i=0;i<k.length;i++){var v=k[i];if(!u[v.ruleLibName]){u[v.ruleLibName]={};}if(!u[v.ruleLibName][v.ruleId]){u[v.ruleLibName][v.ruleId]=[];}u[v.ruleLibName][v.ruleId].push(v);}return u;}function d(u,v,w,x){var y='';var z='';var A=1;var B=0;for(var C in v){var D=v[C];B+=D.length;var E=D[0];z+='<tr id="'+w+'_rule_'+A+'" class="filterable" data-severity="'+b(E.severity)+'" data-numberOfIssues="'+D.length+'">';z+='<td>';z+='<div class="expandable-control collapsed-content" data-expandableElement="'+w+'_rule_'+A+'_content">';z+='<div class="expandable-title"> '+A+'. '+b(E.name)+' ('+D.length+' issues) '+'</div></div>';z+='<div id="'+w+'_rule_'+A+'_content">';z+='<div><span class="sapUiSupportLabel">Description: </span>'+b(E.description)+'</div>';z+='<div><span class="sapUiSupportLabel">Resolution: </span>'+b(E.resolution)+'</div>';z+='<div>';if(E.resolutionUrls){for(var k=0;k<E.resolutionUrls.length;k++){z+='<div><a href="'+b(E.resolutionUrls[k].href)+'" target="_blank">'+b(E.resolutionUrls[k].text)+'</a></div>';}}z+='</div>';z+='<table class="sapUiTable"><tr><th></th><th>Element Id</th><th>Class</th><th>Details</th></tr>';for(var i=0;i<D.length;i++){z+='<tr><td>'+(i+1)+'</td><td>'+b(D[i].context.id)+'</td>';z+='<td>'+b(D[i].context.className)+'</td>';z+='<td>'+b(D[i].details)+'</td></tr>';}z+='</table>';z+='</div></td>';z+='<td class="'+b(E.severity)+'">'+b(E.severity)+'</td>';z+='<td>'+b(E.categories)+'</td>';z+='<td>'+b(E.audiences)+'</td>';z+='</tr>';A++;}var F='collapsed-content';if(x===1){F='expanded-content';}y+='<tr>';y+='<td colspan="100" class="expandable-control '+F+'" data-expandableElement="'+w+'" data-groupName="'+u+'" data-groupNumber="'+x+'">';y+='<span class="sapUiSupportLabel expandable-title"> '+x+'. '+u+' ('+(A-1)+' rules, '+B+' issues)</span>';y+='</td></tr><tbody id="'+w+'">';y+=z;y+='</tbody>';return y;}function e(i){var k='';var u={};var v=1;if(!i){return new H.SafeString(k);}try{u=c(i);k+='<table class="sapUiTable"><tr><th>Title</th><th>Status</th><th>Categories</th><th>Audiences</th></tr>';for(var w in u){k+=d(w,u[w],'group'+v,v);v++;}k+='</table>';}catch(x){q.sap.log.warning('There was a problem extracting issues info.');k='';}return new H.SafeString(k);}function f(v){var i='<td>';if(v){i+=q.sap.escapeHTML(v);}i+='</td>';return i;}function h(k){var u='';if(!k){return new H.SafeString(u);}u+='<table class="sapUiTable"><tr><th>Component ID</th><th>Type</th><th>Title</th><th>Subtitle</th><th>Application version</th><th>Description</th><th>BCP Component</th></tr>';try{for(var i=0;i<k.length;i++){var v=k[i];u+='<tr>';u+=f(v.id);u+=f(v.type);u+=f(v.title);u+=f(v.subTitle);if(v.applicationVersion){u+=f(v.applicationVersion.version);}else{u+='<td></td>';}u+=f(v.description);u+=f(v.ach);u+='</tr>';}u+='</table>';}catch(w){q.sap.log.warning('There was a problem extracting app info.');u='';}return new H.SafeString(u);}function j(i,k,u){var v=u?'filter-active':'';return'<div data-severity="'+i+'" class="filter '+v+' '+i+'">'+i+'('+k+')</div>'+' | ';}function l(k){var u='';var v={};var w;var x;if(!k){return new H.SafeString(u);}try{for(var i=0;i<k.length;i++){w=k[i].severity;if(v[w]){v[w]++;}else{v[w]=1;}}u+=j('Total',k.length,true);for(x in v){u+=j(x,v[x],false);}}catch(y){q.sap.log.warning('There was a problem creating severity filters.');u='';}return new H.SafeString(u);}function m(i){var k='';k+='<div><span class="sapUiSupportLabel">'+i.displayName+'</span>';k+='<span class="description"> ('+i.description+')</span></div>';return k;}function n(i,k){var u='';u+='<div><span class="sapUiSupportLabel">'+k.displayName+' with id:</span> '+i;u+='<span class="description"> ('+k.description+')</span></div>';return u;}function o(k,u){var v='';if(k.length>5){v+='<div class="expandable-control collapsed-content" data-expandableElement="execution-scope-components">';v+='<span class="expandable-title"><span class="sapUiSupportLabel">'+u.displayName+'</span>';v+='<span class="description"> ('+u.description+')</span></span></div>';}else{v+='<div><span class="sapUiSupportLabel">'+u.displayName+'</span>';v+='<span class="description"> ('+u.description+')</span></div>';}v+='<ol id="execution-scope-components" class="top-margin-xsmall">';for(var i=0;i<k.length;i++){v+='<li>'+k[i]+'</li>';}v+='</ol>';return v;}function p(i){var k='';try{var u=i.executionScope._getType();var v=i.scopeDisplaySettings.executionScopes[u];var w=i.scopeDisplaySettings.executionScopeTitle;k+='<div class="sapUiSupportLabel">'+w+': </div>';switch(u){case'core':k+=m(v);break;case'parent':k+=n(i.executionScope._getContext().parentId,v);break;case'components':k+=o(i.executionScope._getContext().components,v);break;}}catch(x){q.sap.log.warning('There was a problem extracting scope info.');k='';}return new H.SafeString(k);}H.registerHelper('getTechnicalInformation',function(i){return a(i);});H.registerHelper('getIssues',function(i){return e(i);});H.registerHelper('getAppInfo',function(i){return h(i);});H.registerHelper('getSeverityFilters',function(i){return l(i);});H.registerHelper('getScope',function(i){return p(i);});function s(D){var i=H.compile(g(r));var k={technicalInfo:D.technical,issues:D.issues,appInfo:D.application,metadata:{title:'SAPUI5 Check Results',title_TechnicalInfo:'Technical Information',title_Issues:'Issues',title_AppInfo:'Application Information',timestamp:new Date(),scope:D.scope,analysisDuration:D.analysisDuration,analysisDurationTitle:D.analysisDurationTitle}};return i(k);}return{getReportHtml:s};},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.RuleSerializer')){jQuery.sap.declare('sap.ui.support.supportRules.RuleSerializer');sap.ui.define("sap/ui/support/supportRules/RuleSerializer",[],function(){"use strict";return{serialize:function serializeRule(r){var a=function(k,v){if(typeof v==="function"){return v.toString();}else{return v;}};var b=JSON.stringify(r,a);return b;},deserialize:function(serializedRule,stringifyCheck){var rule=JSON.parse(serializedRule);if(!stringifyCheck&&rule.check!==undefined){eval("rule.check = "+rule.check);}return rule;}};},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.RuleSet')){jQuery.sap.declare('sap.ui.support.supportRules.RuleSet');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/ui/support/supportRules/RuleSet",["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var r={};var R=function(s){if(!s.name){q.sap.log.error("Please provide a name for the Ruleset.");}if(r[s.name]){return r[s.name];}this._oSettings=s;this._mRules={};r[s.name]=this;};R.prototype.getRules=function(){return this._mRules;};R.prototype.updateRule=function(o,n){var v=this._verifySettingsObject(n,true);if(v==="success"){delete this._mRules[o];this._mRules[n.id]=n;}return v;};R.prototype._verifySettingsObject=function(s,u){if(!s.id){q.sap.log.info("Support rule needs an unique id.");return"Support rule needs an unique id.";}if(!u&&this._mRules[s.id]){q.sap.log.info("Support rule with the id "+s.id+" already exists.");return"Support rule with the id "+s.id+" already exists.";}if(!s.check){q.sap.log.info("Support rule needs a check function.");return"Support rule needs a check function.";}if(!s.title){q.sap.log.info("Support rule needs a title.");return"Support rule needs a title.";}if(!s.description){q.sap.log.info("Support rule needs a description.");return"Support rule needs a description.";}if(!s.resolution&&(!s.resolutionurls||!s.resolutionurls.length>0)){q.sap.log.info("Support rule needs either a resolution or resolutionurls or should have a ticket handler function");return"Support rule needs either a resolution or resolutionurls or should have a ticket handler function";}if(!s.audience||s.audience.length===0){q.sap.log.info("Support rule should have an audience. Applying ['Control']");s.audience=[sap.ui.support.Audiences.Control];}if(s.audience&&s.audience.forEach){var w=false,a="";s.audience.forEach(function(d){if(!sap.ui.support.Audiences[d]){w=true;a=d;}});if(w){return"Audience "+a+" does not exist. Please use the audiences from sap.ui.support.Audiences";}}if(!s.categories||s.categories.length===0){q.sap.log.info("Support rule should have a category. Applying 'Performance'");s.category=["Performance"];}if(s.categories&&s.categories.forEach){var b=false,c="";s.categories.forEach(function(d){if(!sap.ui.support.Categories[d]){b=true;c=d;}});if(b){return"Category "+c+" does not exist. Please use the categories from sap.ui.support.Categories";}}return"success";};R.prototype.addRule=function(s){var v=this._verifySettingsObject(s);if(v==="success"){this._mRules[s.id]=s;s.libName=this._oSettings.name;}return v;};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.WindowCommunicationBus')){jQuery.sap.declare('sap.ui.support.supportRules.WindowCommunicationBus');sap.ui.define("sap/ui/support/supportRules/WindowCommunicationBus",[],function(){"use strict";var C={channels:{}};var o=jQuery.sap.getUriParameters().get("sap-ui-xx-support-origin");if(!o){var m=new window.URI(jQuery.sap.getModulePath('./'));var p=m.protocol()===""?window.location.protocol.replace(":",""):m.protocol();var h=m.host()===""?window.location.host:m.host();o=p+"://"+h;}C.origin=o;C.subscribe=function(c,a,b){if(!this.channels[c]){this.channels[c]=[{callback:a,context:b}];return;}this.channels[c].push({callback:a,context:b});};C.publish=function(c,P){var r=this._getReceivingWindow(),d={channelName:c,params:P};r.postMessage(d,this.origin);};C.destroyChanels=function(){C.channels={};};C._getReceivingWindow=function(){if(document.getElementById("sap-ui-supportToolsFrame")){return document.getElementById("sap-ui-supportToolsFrame").contentWindow;}return window.parent;};C.onmessage=function(e){var c=e.data.channelName,a=e.data.params,b=C.channels[c];if(!b){return;}b.forEach(function(d){d.callback.apply(d.context,[a]);});};if(window.addEventListener){window.addEventListener("message",C.onmessage,false);}else{window.attachEvent("onmessage",C.onmessage);}return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.CodeEditor')){jQuery.sap.declare('sap.ui.support.supportRules.ui.CodeEditor');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.thirdparty.ace.ace');jQuery.sap.require('sap.ui.thirdparty.ace.mode-javascript');jQuery.sap.require('sap.ui.thirdparty.ace.mode-json');sap.ui.define("sap/ui/support/supportRules/ui/CodeEditor",["jquery.sap.global","sap/ui/core/Control","sap/ui/thirdparty/ace/ace","sap/ui/thirdparty/ace/mode-javascript","sap/ui/thirdparty/ace/mode-json"],function(q,C){"use strict";var a=C.extend("sap.ui.core.support.tools.ui.CodeEditor",{metadata:{library:"sap.ui.core",properties:{value:{type:"string",group:"Misc",defaultValue:""},type:{type:"string",group:"Appearance",defaultValue:"javascript"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"400px"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"400px"},editable:{type:"boolean",group:"Behavior",defaultValue:true},showLineNumbers:{type:"boolean",group:"Behavior",defaultValue:true}},events:{liveChange:{},change:{}},defaultProperty:"content"},renderer:function(r,c){r.write("<div ");r.writeControlData(c);r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeStyles();r.write(">");r.write("</div>");}});a.prototype.init=function(){var d=document.createElement("div");var t=this;this._oEditorDomRef=d;this._oEditorDomRef.style.height="100%";this._oEditorDomRef.style.width="100%";this._oEditor=window.ace.edit(d);this._oEditor.setValue("");this._oEditor.getSession().setUseWrapMode(true);this._oEditor.getSession().setMode("ace/mode/javascript");this._oEditor.renderer.setShowGutter(true);this._oEditor.addEventListener("change",function(e){var v=t.getCurrentValue();t.fireLiveChange({value:v,editorEvent:e});});this._oEditor.addEventListener("blur",function(e){var v=t.getCurrentValue(),c=t.getValue();t.setProperty("value",v,true);if(v!=c){t.fireChange({value:v,oldValue:c});}});};a.prototype.invalidate=function(){};a.prototype.setEditable=function(v){this.setProperty("editable",v,true);this._oEditor.setReadOnly(!this.getEditable());return this;};a.prototype.focus=function(){this._oEditor.focus();};a.prototype.setType=function(t){this.setProperty("type",t,true);this._oEditor.getSession().setMode("ace/mode/"+this.getType());return this;};a.prototype.setValue=function(v){this.setProperty("value",v,true);this._oEditor.setValue(this.getProperty("value"));return this;};a.prototype.getCurrentValue=function(){return this._oEditor.getValue();};a.prototype.showLineNumbers=function(v){this.setProperty("showLineNumbers",v,true);this._oEditor.renderer.setShowGutter(this.getShowLineNumbers());return this;};a.prototype.onAfterRendering=function(){this.getDomRef().appendChild(this._oEditorDomRef);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.IFrameController')){jQuery.sap.declare('sap.ui.support.supportRules.ui.IFrameController');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');sap.ui.define("sap/ui/support/supportRules/ui/IFrameController",["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/support/supportRules/WindowCommunicationBus"],function(q,M,C){"use strict";var i=null;function o(u){var t=document.createElement("IFRAME");var s=t.style;t.id="sap-ui-supportToolsFrame";t.src=u;s.width="100%";s.height="50%";s.position="absolute";s.left="0";s.bottom="0";s.border="none";s.zIndex="1001";s.boxShadow="1px -10px 42px -4px #888";document.body.appendChild(t);var p=setTimeout(function(){if(t.parentNode.nodeName!=="BODY"){document.body.appendChild(t);}},500);setTimeout(function(){clearInterval(p);},5000);return t;}var I=M.extend("sap.ui.support.IFrameController",{constructor:function(){if(!i){M.apply(this,arguments);this._setCommunicationSubscriptions();}else{q.sap.log.warning("Only one support tool allowed");return i;}}});I.prototype._setCommunicationSubscriptions=function(){C.subscribe("ensureOpened",function(){if(document.getElementById("sap-ui-supportToolsFrame").style.height==="28px"){this.resizeFrame(true);}},this);C.subscribe("resizeFrame",function(p){i.resizeFrame(p.bigger);});};I.prototype.injectFrame=function(){var t=q.sap.getModulePath("sap.ui.support.supportRules.ui","/overlay.html?sap-ui-xx-formfactor=compact&sap-ui-xx-support-origin="+window.location.protocol+"//"+window.location.host);o(t);};I.prototype.resizeFrame=function(b){var t=document.getElementById("sap-ui-supportToolsFrame").style;if(b){if(t.height==="50%"){t.height="100%";}else if(t.height==="28px"){t.height="50%";}}else{if(t.height==="100%"){t.height="50%";}else if(t.height==="50%"){t.height="28px";}}};I.prototype.toggleHide=function(h){var t=document.getElementById("sap-ui-supportToolsFrame").style;if(h){this._originalSize={width:t.width,height:t.height};t.width="170px";t.height="28px";}else{t.width=this._originalSize.width;t.height=this._originalSize.height;this._originalSize=null;}};I.prototype._stop=function(){this._oCssLink.parentNode.removeChild(this._oCssLink);this._oDomRef.parentNode.removeChild(this._oCssLink);this._oCore=null;};i=new I();return i;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.models.SharedModel')){jQuery.sap.declare('sap.ui.support.supportRules.ui.models.SharedModel');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/support/supportRules/ui/models/SharedModel",["sap/ui/model/json/JSONModel"],function(J){"use strict";var e={core:{key:"core",displayName:"Global",description:"The Rules will be / are executed on the complete application with all loaded elements and components, including all previously loaded pages"},parent:{key:"parent",displayName:"Sub-tree",description:"The Rules will be / are executed on the specified sub-tree root element, including all child elements (aggregated sub-elements)"},components:{key:"components",displayName:"Component(s)",description:"The Rules will be / are executed on the selected components from the list of currently loaded components (or fragments)"}};var m=new J({selectedRule:null,libraries:null,selectedIssue:null,issues:[],progress:0.1,showProgressIndicator:false,coreStateChanged:true,analyzePressed:false,selectedRulePreviewKey:"ruleProperties",selectedRuleCreateKey:"ruleProperties",selectedRuleEditKey:"ruleProperties",newRule:{},newRuleStringified:"",updateRuleStringified:"",parentExecutionContextId:"",availableComponents:[],audiences:sap.ui.support.Audiences,categories:sap.ui.support.Categories,severities:sap.ui.support.Severity,audiencesFilter:["All"].concat(Object.keys(sap.ui.support.Audiences)),categoriesFilter:["All"].concat(Object.keys(sap.ui.support.Categories)),severitiesFilter:["All"].concat(Object.keys(sap.ui.support.Severity)),newEmptyRule:{libName:"",id:"",categories:[sap.ui.support.Categories.Other],audiences:[sap.ui.support.Audiences.Internal],title:"",description:"",resolution:"",resolutionurls:[],check:"function(oIssueManager, oCoreFacade, oScope) {\n\t/* \n\t oIssueManager - allows you to add new issues with the addIssue() method \n\t oCoreFacade - gives you access to state of the core: getMetadata(), getUIAreas(), getComponents(), getModels() \n\t oScope - retrieves elements in the scope with these methods: getElements(), getElementsByClassName(className), getLoggedObjects(type) \n\t*/ \n}",selected:true},editRule:null,tempLink:{href:"",text:""},selectedRuleStringify:"",analyzeContext:e.core,executionScopes:e,executionScopeTitle:"Execution scope",lastAnalysisElapsedTime:"",analysisDurationTitle:"Last analysis duration"});return m;});};if(!jQuery.sap.isDeclared('sap.ui.table.TableHelper.support')){jQuery.sap.declare('sap.ui.table.TableHelper.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/table/TableHelper.support",["jquery.sap.global","sap/ui/support/library"],function(q,S){"use strict";var A=S.Audiences,C=S.Categories,a=S.Severity;var T={DOCU_REF:"https://sapui5.hana.ondemand.com/",DEFAULT_RULE_DEF:{audience:[A.Application],categories:[C.Other],enabled:true,minversion:"1.38",maxversion:"-",title:"",description:"",resolution:"",resolutionurls:[],check:function(i,c,s){}},normalizeRule:function(r){return q.extend({},T.DEFAULT_RULE_DEF,r);},addRuleToRuleset:function(r,R){r=q.extend({},T.DEFAULT_RULE_DEF,r);var s=R.addRule(r);if(s!="success"){q.sap.log.warning("Support Rule '"+r.id+"' for library sap.m not applied: "+s);}},createDocuRef:function(t,r){return{text:t,href:T.DOCU_REF+r};},reportIssue:function(i,t,s,c){i.addIssue({severity:s||a.Warning,details:t,context:{id:c||"WEBPAGE"}});},isInstanceOf:function(o,t){if(!o||!t){return false;}var b=sap.ui.require(t);return!!(b&&(o instanceof b));},find:function(s,v,t){var e=s.getElements();var r=[];for(var n in e){var E=e[n];if(T.isInstanceOf(E,t)){if(v&&E.getDomRef()||!v){r.push(E);}}}return r;},checkLogEntries:function(f,c){var l=q.sap.log.getLogEntries();var L;for(var i=0;i<l.length;i++){L=l[i];if(f(L)){if(c(L)){return;}}}}};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.library.support')){jQuery.sap.declare('sap.ui.table.library.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/table/library.support",["jquery.sap.global","sap/ui/support/library","sap/ui/support/supportRules/RuleSet","./TableHelper.support"],function(q,S,R,a){"use strict";var C=S.Categories,b=S.Severity;var l={name:"sap.ui.table",niceName:"UI5 Table library"};var r=new R(l);function c(o){o.id="GRIDTABLE_"+o.id;a.addRuleToRuleset(o,r);}function d(D,s,t){var T=a.find(s,true,"sap/ui/table/Table");var e,o;for(var i=0;i<T.length;i++){e=T[i].getColumns();for(var k=0;k<e.length;k++){o=e[k].getTemplate();if(o&&(!t||a.isInstanceOf(o,t))){D(T[i],e[k],o);}}}}c({id:"CONTENT_DENSITY",title:"Content Density Usage",description:"Checks whether the content densities 'Cozy', 'Compact' and 'Condensed' are used correctly.",resolution:"Ensure that either only the 'Cozy' or 'Compact' content density is used or the 'Condensed' and 'Compact' content densities in combination are used.",resolutionurls:[a.createDocuRef("How to use Content Densities","#docs/guide/e54f729da8e3405fae5e4fe8ae7784c1.html")],check:function(i,o,s){var D=q("html");var $=D.find(".sapUiSizeCozy");var e=D.find(".sapUiSizeCompact");var f=D.find(".sapUiSizeCondensed");function g(h,t,m){var F=false;h.each(function(){if(q(this).closest(t).length){F=true;}});if(F&&m){a.reportIssue(i,m,b.Error);}return F;}g(e,".sapUiSizeCozy","'Compact' content density is used within 'Cozy' area.");g($,".sapUiSizeCompact","'Cozy' content density is used within 'Compact' area.");g(f,".sapUiSizeCozy","'Condensed' content density is used within 'Cozy' area.");g($,".sapUiSizeCondensed","'Cozy' content density is used within 'Condensed' area.");if(f.length>0){var F=g(f,".sapUiSizeCompact");if(!F){a.reportIssue(i,"'Condensed' content density must be used in combination with 'Compact'.",b.Error);}}}});c({id:"VALIDATE_COLUMN_TEMPLATE_ICON",categories:[C.Accessibility],title:"Column template validation - 'sap.ui.core.Icon'",description:"The 'decorative' property of control 'sap.ui.core.Icon' is set to 'true' although the control is used as column template.",resolution:"Set the 'decorative' property of control 'sap.ui.core.Icon' to 'false' if the control is used as column template.",check:function(i,o,s){d(function(t,e,I){if(!I.isBound("decorative")&&I.getDecorative()){var f=e.getId();a.reportIssue(i,"Column '"+f+"' of table '"+t.getId()+"' uses decorative 'sap.ui.core.Icon' control.",b.Error,f);}},s,"sap/ui/core/Icon");}});c({id:"VALIDATE_COLUMN_TEMPLATE_M_TEXT",title:"Column template validation - 'sap.m.Text'",description:"The 'wrapping' property of the control 'sap.m.Text' is set to 'true' although the control is used as a column template.",resolution:"Set the 'wrapping' property of the control 'sap.m.Text' to 'false' if the control is used as a column template.",check:function(i,o,s){d(function(t,e,m){if(!m.isBound("wrapping")&&m.getWrapping()){var f=e.getId();a.reportIssue(i,"Column '"+f+"' of table '"+t.getId()+"' uses an 'sap.m.Text' control with wrapping enabled.",b.Error,f);}},s,"sap/m/Text");}});c({id:"ANALYTICS_NO_DEVIATING_UNITS",categories:[C.Bindings],title:"Analytical Binding reports 'No deviating units found...'",description:"The analytical service returns duplicate IDs. This could also lead to many requests because the analytical binding "+"will request the measures without deviating units again and expects to receive just one record, but again gets several ones ...",resolution:"Adjust the service implementation.",check:function(I,o,s){var t=a.find(s,true,"sap/ui/table/AnalyticalTable");var A="NO_DEVIATING_UNITS";var e={};a.checkLogEntries(function(L){if(L.level!=q.sap.log.Level.ERROR&&L.level!=q.sap.log.Level.FATAL){return false;}var i=L.supportInfo;if(i&&i.type==="sap.ui.model.analytics.AnalyticalBinding"&&i.analyticalError===A){return true;}return false;},function(L){var B=L.supportInfo.analyticalBindingId;if(B&&!e[A+"-"+B]){var f;for(var i=0;i<t.length;i++){f=t[i].getBinding("rows");if(f&&f.__supportUID===B){e[A+"-"+B]=true;a.reportIssue(I,"Analytical Binding reports 'No deviating units found...'",b.Error,t[i].getId());}}}});}});return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.viz.library.support')){jQuery.sap.declare('sap.viz.library.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/viz/library.support",["jquery.sap.global","sap/ui/support/supportRules/RuleSet"],function(q,R){"use strict";var l={name:"sap.viz",niceName:"UI5 Charts library"};var r=new R(l);r.addRule({id:"VizCheck",audiences:["Control","Internal"],categories:["Performance"],enabled:true,minversion:"1.32",maxversion:"-",title:"Viz Check",description:"Checks whether the preload configuration was set correctly to async",resolution:"Add \"data-sap-ui-preload=\"async\"\" to script tag that includes \"sap-ui-core.js\"",resolutionurls:[{text:"Performance: Speed Up Your App",href:"https://sapui5.hana.ondemand.com/#docs/guide/408b40efed3c416681e1bd8cdd8910d4.html"}],check:function(i,c){q.sap.log.info("It's from the viz library");}});return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.m.ListTableTree.support')){jQuery.sap.declare('sap.m.ListTableTree.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/m/ListTableTree.support",["jquery.sap.global","sap/ui/support/library","../ui/table/TableHelper.support"],function(q,S,a){"use strict";var C=S.Categories,b=S.Severity;var r=[];function c(R){r.push(R);}c({id:"MTABLE_TEST",categories:[C.Other],title:"Just a test for the support rules",description:"Test description",resolution:"Test resolution",enabled:false,check:function(i,o,s){var l=a.find(s,true,"sap/m/Table");if(!l){a.reportIssue(i,"There seems to be no table",b.Hint);}}});return{addRulesToRuleset:function(R){q.each(r,function(i,o){a.addRuleToRuleset(o,R);});}};},true);};if(!jQuery.sap.isDeclared('sap.m.library.support')){jQuery.sap.declare('sap.m.library.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/m/library.support",["jquery.sap.global","sap/ui/support/library","sap/ui/support/supportRules/RuleSet","./ListTableTree.support"],function(q,S,R,L){"use strict";var l={name:"sap.m",niceName:"UI5 Main Library"};var r=new R(l);L.addRulesToRuleset(r);r.addRule({id:"flexitemdatatype",audiences:[sap.ui.support.Audiences.Application],categories:[sap.ui.support.Categories.Functionality],enabled:true,minversion:"1.28",title:"Incorrect Flex Item Data Type",description:"Checks whether the correct type of layout data is set for flex items",resolution:"Use sap.m.FlexItemData for the layout data of flex items (the child controls of a sap.m.FlexBox\/HBox\/VBox)",resolutionurls:[{text:"Functionality: Use the correct flex item data type",href:"https://sapui5.hana.ondemand.com/#docs/api/symbols/sap.m.FlexItemData.html"}],check:function(i,c,s){s.getElements().filter(function(e){var t=sap.ui.require("sap/m/FlexBox");return!!(t&&(e instanceof t));}).forEach(function(e){e.getItems().filter(function(I){return(I.getLayoutData()&&!(I.getLayoutData()instanceof sap.m.FlexItemData));}).forEach(function(I){i.addIssue({severity:sap.ui.support.Severity.Error,details:"Layout data set on "+I.getId()+" is not an instance of sap.m.FlexItemData.",context:{id:I.getId()}});});});}});r.addRule({id:"flexboxrendertype",audiences:[sap.ui.support.Audiences.Application],categories:[sap.ui.support.Categories.Functionality],enabled:true,minversion:"1.42",title:"Explicit setting for FlexBox render type",description:"Checks whether the FlexBox render type has been set explicitly",resolution:"In most cases, 'Bare' is the best default choice for the render type of a sap.m.FlexBox\/HBox\/VBox to avoid browser inconsistencies. It must be set explicitly.",resolutionurls:[{text:"Functionality: Set the render type to 'Bare'",href:"https://sapui5.hana.ondemand.com/#docs/api/symbols/sap.m.FlexRendertype.html"}],check:function(i,c,s){s.getElements().filter(function(e){var t=sap.ui.require("sap/m/FlexBox");return!!(t&&(e instanceof t)&&!e.mProperties.hasOwnProperty("renderType"));}).forEach(function(I){i.addIssue({severity:sap.ui.support.Severity.Hint,details:"No explicit setting for the render type of "+I.getId()+".",context:{id:I.getId()}});});}});return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.ui.comp.ListTable.support')){jQuery.sap.declare('sap.ui.comp.ListTable.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/comp/ListTable.support",["jquery.sap.global","sap/ui/support/library","../table/TableHelper.support"],function(q,S,a){"use strict";var C=S.Categories,b=S.Severity;var r=[];function c(R){r.push(R);}c({id:"SMARTTABLE_MODEL_BINDING",categories:[C.Bindings],title:"Model and Binding",description:"Checks whether the default/unnamed model is present and is an ODataModel and if the binding makes use of this model",resolution:"Ensure that the desired ODataModel is set as an unnamed/default model on the control/view and is used in the binding accordingly",check:function(I,o,s){var d=a.find(s,true,"sap/ui/comp/smarttable/SmartTable");var i,l=d.length,e,m,f;for(i=0;i<l;i++){e=d[i];if(e){m=e.getModel();if(!m){a.reportIssue(I,"The SmartTable expects a default/unnamed model to be present",b.Warning,e.getId());}if(!a.isInstanceOf(m,"sap/ui/model/odata/ODataModel")&&!a.isInstanceOf(m,"sap/ui/model/odata/v2/ODataModel")){a.reportIssue(I,"ODataModel should be used as the default/unnamed model",b.Warning,e.getId());}f=e.getTable().getBindingInfo(e._sAggregation);if(f.model){a.reportIssue(I,"For binding rows/items of the table in the SmartTable an unnamed (default) model should be used",b.Warning,e.getId());}}}}});return{addRulesToRuleset:function(R){q.each(r,function(i,o){a.addRuleToRuleset(o,R);});}};},true);};if(!jQuery.sap.isDeclared('sap.ui.comp.library.support')){jQuery.sap.declare('sap.ui.comp.library.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/comp/library.support",["jquery.sap.global","sap/ui/support/library","sap/ui/support/supportRules/RuleSet","./ListTable.support"],function(q,S,R,L){"use strict";var l={name:"sap.ui.comp",niceName:"UI5 Smart Controls Library"};var r=new R(l);L.addRulesToRuleset(r);return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.ui.core.library.support')){jQuery.sap.declare('sap.ui.core.library.support');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/core/library.support",["jquery.sap.global","sap/ui/support/supportRules/RuleSet"],function(q,R){"use strict";var l={name:"sap.ui.core",niceName:"UI5 Core Library"};var r=new R(l);r.addRule({id:"preloadasynccheck",audiences:[sap.ui.support.Audiences.Control,sap.ui.support.Audiences.Internal],categories:[sap.ui.support.Categories.Performance],enabled:true,minversion:"1.32",maxversion:"-",title:"Preload Configuration",description:"Checks whether the preload configuration was set correctly to async",resolution:"Add \"data-sap-ui-preload=\"async\"\" to script tag that includes \"sap-ui-core.js\"",resolutionurls:[{text:"Performance: Speed Up Your App",href:"https://sapui5.hana.ondemand.com/#docs/guide/408b40efed3c416681e1bd8cdd8910d4.html"}],check:function(i,c){if(sap.ui.getCore().getConfiguration().getPreload()!=="async"){i.addIssue({severity:sap.ui.support.Severity.Error,details:"None",context:{id:"WEBPAGE"}});}}});r.addRule({id:"fakeoscheck",audiences:[sap.ui.support.Audiences.Internal],categories:[sap.ui.support.Categories.Functionality],enabled:true,minversion:"1.28",maxversion:"-",title:"Usage of fakeOS parameter",description:"Checks whether the unsupported fakeOS parameter was used",resolution:"Remove the parameter 'sap-ui-xx-fakeOS' from the URL or the UI5 bootstrap tag.",resolutionurls:[],check:function(i,c){var F=/(?:\?|&)sap-ui-xx-fakeOS=([^&]+)/;var a=document.location.search.match(F);var b=a&&a[1]||q.sap.byId("sap-ui-bootstrap").attr("data-sap-ui-xx-fakeOS");if(b){i.addIssue({severity:sap.ui.support.Severity.Error,details:"None",context:{id:"WEBPAGE"}});}}});r.addRule({id:"errorlogs",audiences:["Control","Internal"],categories:["Performance"],enabled:true,minversion:"1.32",maxversion:"-",title:"Error logs",description:"Checks for the amount of error logs in the console",resolution:"Error logs should be fixed",resolutionurls:[],check:function(i,c){var a=0,m="";var b=q.sap.log.getLog();b.forEach(function(d){if(d.level===q.sap.log.Level.ERROR){a++;if(a<=20){m+="- "+d.message+"\n";}}});i.addIssue({severity:sap.ui.support.Severity.Hint,details:"Total error logs: "+a+"\n"+m,context:{id:"WEBPAGE"}});}});r.addRule({id:"orphanedelement",audiences:[sap.ui.support.Audiences.Control,sap.ui.support.Audiences.Internal,sap.ui.support.Audiences.Application],categories:[sap.ui.support.Categories.Memory],enabled:true,minversion:"1.32",maxversion:"-",title:"Controls/Elements that miss a parent",description:"Orphaned Controls and Elements might cause memory leaks.",resolution:"Call the destroy method of Elements, if they are not needed anymore",resolutionurls:[{text:"Element destroy",href:"https://sapui5.hana.ondemand.com/#docs/api/symbols/sap.ui.core.Element.html#destroy"}],check:function(i,c,s){var e=s.getElements();for(var n in e){var E=e[n];if(!E.getParent()){i.addIssue({severity:sap.ui.support.Severity.Warning,details:"The element "+E.getId()+" has no parent.",context:{id:E.getId()}});}}}});r.addRule({id:"unresolvedpropertybindings",audiences:[sap.ui.support.Audiences.Control,sap.ui.support.Audiences.Application],categories:[sap.ui.support.Categories.Modelbindings],enabled:true,minversion:"1.32",title:"Unresolved Property Bindings",description:"Unresolved bindings might be caused by typos in their path",resolution:"Check the binding path for typos",resolutionurls:[{href:"https://sapui5.hana.ondemand.com/#docs/api/symbols/sap.ui.model.Context.html",text:"Context class"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/e5310932a71f42daa41f3a6143efca9c.html",text:"Data binding"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/97830de2d7314e93b5c1ee3878a17be9.html",text:"Aggregation binding with templates"},{href:"https://sapui5.hana.ondemand.com/#docs/guide/6c7c5c266b534e7ea9a28f861dc515f5.html",text:"Element binding"}],check:function(i,c,s){var e=s.getElements();for(var n in e){var E=e[n],b=E.mBindingInfos;for(var m in b){var B=b[m].binding;if(B){if(!(B instanceof sap.ui.model.CompositeBinding)&&B instanceof sap.ui.model.PropertyBinding&&B.getModel()){if(B.getValue()===undefined){var p=B.getPath(),C=B.getContext();if(C){i.addIssue({severity:sap.ui.support.Severity.Hint,details:"Element "+E.getId()+" has unresolved bindings.",context:{id:E.getId()}});}else if(!C&&!q.sap.startsWith(p,"/")){i.addIssue({severity:sap.ui.support.Severity.Hint,details:"Element "+E.getId()+" has unresolved bindings.",context:{id:E.getId()}});}else{var P=p.split("/");var d=null;while(P.length>0){var d=B.getModel().getProperty("/"+P.join("/"));if(d){var D=JSON.stringify(d);if(D.length>40){D=D.substring(0,40)+"...";}break;}}i.addIssue({severity:sap.ui.support.Severity.Hint,details:"Element "+E.getId()+" has unresolved bindings.",context:{id:E.getId()}});}}}}}}}});return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.library.support')){jQuery.sap.declare('sap.ui.fl.library.support');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.fl.Utils');sap.ui.define("sap/ui/fl/library.support",["jquery.sap.global","sap/ui/support/library","sap/ui/support/supportRules/RuleSet","sap/ui/fl/Utils"],function(q,S,R,U){"use strict";var l={name:"sap.ui.fl",niceName:"UI5 Flexibility Library"};var r=new R(l);function c(e){var E=true;if(e.getBindingContext&&e.getBindingContext()){var b=e.getBindingContext().getPath().split("/");var L=b[b.length-1];E=isNaN(L);}return E;}r.addRule({id:"stableId",audiences:[sap.ui.support.Audiences.Application],categories:[sap.ui.support.Categories.Functionality],enabled:true,minversion:"1.25",title:"ID for Flexibility Features Not Suitable",description:"Checks whether the IDs of controls are suitable to support flexibility features.",resolution:"Replace the generated control ID with an explicit ID.\nTo ensure that an update of SAPUI5 with additional flexibility functionality "+"will be also available in the shipped application, you must specify an explicit ID for the control.\n"+"For more details, see the Developer Guide.",resolutionurls:[{text:"Developer Guide: Stable IDs",href:"https://sapui5.hana.ondemand.com/#docs/guide/f51dbb78e7d5448e838cdc04bdf65403.html"}],check:function(i,C,s){var a;s.getElements().forEach(function(e){a=a||U.getAppComponentForControl(e);var b=e.getId();var h=b.indexOf("--")!==-1;if(!U.checkControlId(b,a,true)&&c(e)){if(!h){i.addIssue({severity:sap.ui.support.Severity.Error,details:"The ID '"+b+"' for the control was generated and flexibility features "+"cannot support controls with generated IDs.",context:{id:b}});}else{i.addIssue({severity:sap.ui.support.Severity.Hint,details:"The ID '"+b+"' for the control was concatenated and has a generated onset.\n"+"Therefore, flexibility features are not supported for this control.\n"+"To enable the control for flexibility features, you must specify an ID for the control providing the onset.\n"+"This control was marked with an error.",context:{id:b}});}}});}});return{lib:l,ruleset:r};},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.Main')){jQuery.sap.declare('sap.ui.support.supportRules.Main');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/support/supportRules/Main",["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/model/json/JSONModel","sap/ui/support/supportRules/Analyzer","sap/ui/support/supportRules/CoreFacade","sap/ui/support/supportRules/ExecutionScope","sap/ui/support/supportRules/Highlighter","sap/ui/support/supportRules/WindowCommunicationBus","sap/ui/support/supportRules/RuleSerializer","sap/ui/support/supportRules/RuleSet","sap/ui/support/supportRules/IssueManager","sap/ui/support/supportRules/DataCollector","sap/ui/support/supportRules/ReportProvider"],function(q,M,J,A,C,E,H,a,R,b,I,D,c){"use strict";var d=null;var m=null;var e=M.extend("sap.ui.support.Main",{constructor:function(){if(!m){var t=this;this._oCore=null;this._rulesCreated=false;this._mRulesets={};this._setCommunicationSubscriptions();this._oAnalyzer=new A();M.apply(this,arguments);q.sap.support={analyze:function(){return m.analyzeAll();},getIssueHistory:function(){if(t._oAnalyzer.running()){return null;}return I.getHistory();}};var f=document.createEvent("CustomEvent");f.initCustomEvent("supportToolLoaded",true,true,{});}else{q.sap.log.warning("Only one support tool allowed");return m;}}});e.prototype.startPlugin=function(){var t=this;sap.ui.getCore().registerPlugin({startPlugin:function(o){t._oCore=o;t._oDataCollector=new D(o);t._oCoreFacade=C(o);t._oExecutionScope=null;t._createCoreSpies();o.attachLibraryChanged(t._onLibraryChanged,t);var s=o.getConfiguration()["xx-support"];if(s.indexOf("silent")===-1){sap.ui.require(["sap/ui/support/supportRules/ui/IFrameController"],function(f){d=f;d.injectFrame();});}else{t._updatesupportRules();}},stopPlugin:function(){d._stop();t._oCore=null;t._oCoreFacade=null;t._oDataCollector=null;t._oExecutionScope=null;}});};e.prototype._onLibraryChanged=function(o){if(o.getParameter("stereotype")==="library"&&this._rulesCreated){this._updatesupportRules();}};e.prototype._createCoreSpies=function(){var t=this,n=500;this._dirtyTimeoutHandle=null;var s=function(N){var o=t._oCore[N];t._oCore[N]=function(){o.apply(t._oCore,arguments);clearTimeout(t._dirtyTimeoutHandle);t._dirtyTimeoutHandle=setTimeout(function(){a.publish("coreStateChanged");},n);};};s("registerElement");s("deregisterElement");};e.prototype._setCommunicationSubscriptions=function(){a.subscribe("verifyNewRule",function(t){var f=R.deserialize(t),g=this._mRulesets.temporary.ruleset,r=g.addRule(f);a.publish("verifyRuleCreateResult",{result:r,newRule:R.serialize(f)});},this);a.subscribe("verifyUpdateRule",function(f){var t=R.deserialize(f.updateObj),g=this._mRulesets.temporary.ruleset,r=g.updateRule(f.oldId,t);a.publish("verifyRuleUpdateResult",{result:r,updateRule:R.serialize(t)});},this);a.subscribe("getAvailableComponents",function(){a.publish("postAvailableComponents",Object.keys(this._oCore.mObjects.component));},this);a.subscribe("onAnalyzePressed",function(f){this.analyze(f.selectedRules,f.executionContext);},this);a.subscribe("analysisInit",function(){this._updatesupportRules();},this);a.subscribe("onViewReportPressed",function(r){var f=this._getReportData(r);var h=c.getReportHtml(f);var g=window.open("","_blank");if(g.document.getElementById("sap-report-content")){g.document.getElementById("sap-report-content").innerHtml=h;}else{g.document.write('<div id="sap-report-content">'+h+'</div>');}g.document.title="Report";},this);a.subscribe("onDownloadReportPressed",function(r){var f=this._getReportData(r);var h=c.getReportHtml(f);var g='<!DOCTYPE HTML><html><head><title>Report</title></head><body><div id="sap-report-content">'+h+'</div></body></html>';var i={"issues":f.issues};var j={"appInfos":f.application};this._oDataCollector.add("technicalInfo.json",f.technical,"json");this._oDataCollector.add("issues.json",i,"json");this._oDataCollector.add("appInfos.json",j,"json");this._oDataCollector.add("report.html",g);this._oDataCollector.download();this._oDataCollector.clear();},this);a.subscribe("markElement",function(i){var $=sap.ui.getCore().byId(i).$();$.css("background-color","red");},this);a.subscribe("openUrl",function(u){var w=window.open(u,"_blank");w.focus();},this);a.subscribe("treeElementHover",function(f){H.highlight(f);},this);a.subscribe("toggleFrameHidden",function(h){d.toggleHide(h);});};e.prototype._updatesupportRules=function(){var l=sap.ui.getCore().getLoadedLibraries();for(var n in l){try{if(!this._mRulesets[n]){sap.ui.requireSync([n.replace(/\./g,"/")+"/library.support"]);this._mRulesets[n]=q.sap.getObject(n).library.support;}}catch(f){q.sap.log.info("No support file found.");}}this._initTempRulesLib();this._rulesCreated=true;a.publish("updatesupportRules",R.serialize(this._mRulesets));};e.prototype._initTempRulesLib=function(){if(this._mRulesets.temporary){return;}this._mRulesets.temporary={lib:{name:"temporary"},ruleset:new b({name:"temporary",niceName:"Temporary ruleset"})};};e.prototype.analyze=function(r,f){if(this._oAnalyzer&&this._oAnalyzer.running()){return;}this._oAnalyzer.reset();var t=this;this._oExecutionScope=E(this._oCore,f);r.forEach(function(g){var l=t._mRulesets[g.libName],h=l.ruleset.getRules()[g.ruleId];t._oAnalyzer.addTask([h.title],function(o){t._analyzeSupportRule(o,f);},[h]);});I.clearIssues();return this._oAnalyzer.start();};e.prototype.analyzeAll=function(){if(this._oAnalyzer&&this._oAnalyzer.running()){return;}this._oAnalyzer.reset();var t=this;this._oExecutionScope=E(this._oCore,{type:"core"});Object.keys(t._mRulesets).map(function(l){var r=t._mRulesets[l].ruleset.getRules();Object.keys(r).map(function(f){var g=r[f];t._oAnalyzer.addTask([g.title],function(o){t._analyzeSupportRule(o,{type:"core"});},[g]);});});I.clearIssues();return this._oAnalyzer.start();};e.prototype._done=function(){var i=this._createIssuesViewModel(),f=this._createElementTree();a.publish("analyzeFinish",{issues:i,elementTree:f,elapsedTime:this._oAnalyzer.getElapsedTimeString()});};e.prototype._createElementTree=function(){var f=this._copyElementsStructure(),g=[];this._setContextElementReferences(f);for(var i in f){if(f[i].skip){continue;}g.push(f[i]);}return[{content:g,id:"WEBPAGE",name:"WEBPAGE"}];};e.prototype._setContextElementReferences=function(f){var g=this._oCore.mElements;for(var h in f){var i=f[h],p=g[h]==undefined?undefined:g[h].getParent();if(g[h]instanceof sap.ui.core.ComponentContainer){var j=g[h],k=j.getComponent();i.content.push(f[k]);f[k].skip=true;}if(p){var l=p.getId();if(!f[l]){continue;}f[l].content.push(f[h]);f[h].skip=true;}}};e.prototype._copyElementsStructure=function(){var f={},t=this;var g=function(j,k){for(var i in j){var l=j[i],n={content:[],id:l.getId(),name:(k==undefined)?l.getMetadata().getName():k};f[l.getId()]=n;}};g(this._oExecutionScope.getElements());this._oExecutionScope.getElements().forEach(function(i){if(i instanceof sap.ui.core.ComponentContainer){var j=i.getComponent(),k=t._oCore.mObjects.component[j];g([k],"sap-ui-component");}});switch(this._oExecutionScope._getType()){case"core":g(this._oCoreFacade.getUIAreas(),"sap-ui-area");g(this._oCoreFacade.getComponents(),"sap-ui-component");break;case"parent":var p=this._oExecutionScope._getContext().parentId;g([this._oCore.mElements[p]]);break;case"components":var h=this._oExecutionScope._getContext().components;h.forEach(function(i){g([t._oCore.mObjects.component[i]],"sap-ui-component");});break;}return f;};e.prototype._createIssuesViewModel=function(){var v=[];I.walkIssues(function(i){var f=i.context.id==="WEBPAGE"?"sap.ui.core":sap.ui.getCore().byId(i.context.id).getMetadata().getName();v.push({severity:i.severity,name:i.rule.title,description:i.rule.description,resolution:i.rule.resolution,resolutionUrls:i.rule.resolutionurls,audiences:i.rule.audiences,categories:i.rule.categories,details:i.details,ruleLibName:i.rule.libName,ruleId:i.rule.id,context:{className:f,id:i.context.id}});});return v;};e.prototype._getReportData=function(r){return{issues:this._createIssuesViewModel(),technical:this._oDataCollector.getTechInfoJSON(),application:this._oDataCollector.getAppInfo(),scope:{executionScope:this._oExecutionScope,scopeDisplaySettings:{executionScopes:r.executionScopes,executionScopeTitle:r.executionScopeTitle}},analysisDuration:this._oAnalyzer.getElapsedTimeString(),analysisDurationTitle:r.analysisDurationTitle};};e.prototype._analyzeSupportRule=function(r,f){r.check(I.createCheckFunctionProxy(r),this._oCoreFacade,this._oExecutionScope);a.publish("progressUpdate",{currentProgress:this._oAnalyzer.getProgress()});if(this._iDoneTimer){q.sap.clearDelayedCall(this._iDoneTimer);}this._iDoneTimer=q.sap.delayedCall(100,this,"_done");};var m=new e();return m;},true);};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.controllers.Analysis.controller')){jQuery.sap.declare('sap.ui.support.supportRules.ui.controllers.Analysis.controller');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.m.Panel');jQuery.sap.require('sap.m.List');jQuery.sap.require('sap.m.ListItemBase');jQuery.sap.require('sap.m.StandardListItem');jQuery.sap.require('sap.m.InputListItem');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.Toolbar');jQuery.sap.require('sap.m.ToolbarSpacer');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.MessageToast');sap.ui.define("sap/ui/support/supportRules/ui/controllers/Analysis.controller",["jquery.sap.global","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/Panel","sap/m/List","sap/m/ListItemBase","sap/m/StandardListItem","sap/m/InputListItem","sap/m/Button","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Label","sap/m/MessageToast","sap/ui/support/supportRules/WindowCommunicationBus","sap/ui/support/supportRules/ui/models/SharedModel","sap/ui/support/supportRules/RuleSerializer"],function($,Controller,JSONModel,Panel,List,ListItemBase,StandardListItem,InputListItem,Button,Toolbar,ToolbarSpacer,Label,MessageToast,CommunicationBus,SharedModel,RuleSerializer){"use strict";return Controller.extend("sap.ui.support.supportRules.ui.controllers.Analysis",{onInit:function(){this.model=SharedModel;this.setCommunicationSubscriptions();CommunicationBus.publish("analysisInit");this.hackListItemBase();this.getView().setModel(this.model);},setCommunicationSubscriptions:function(){CommunicationBus.subscribe("updatesupportRules",this.updatesupportRules,this);CommunicationBus.subscribe("verifyRuleCreateResult",function(d){var r=d.result,n=RuleSerializer.deserialize(d.newRule,true);if(r=="success"){this.model.getProperty("/libraries").forEach(function(b){if(b.title=="temporary"){b.rules.push(n);}});var e=this.model.getProperty("/newEmptyRule");this.model.setProperty("/newRule",jQuery.extend(true,{},e));this.goToRuleProperties();this.createRulesUI();var l=this.getView().byId("ruleSetContainer").getContent().length-1;var a=this.getView().byId("ruleSetContainer").getContent()[l];a.setExpanded(true);this.model.setProperty("/selectedRule",n);}else{MessageToast.show("Add rule failed because: "+r);}},this);CommunicationBus.subscribe("verifyRuleUpdateResult",function(d){var r=d.result,u=RuleSerializer.deserialize(d.updateRule,true);if(r==="success"){var a=this.model.getProperty("/editRuleSource");var l=this.model.getProperty('/libraries');l.forEach(function(b,c){if(b.title==='temporary'){b.rules.forEach(function(e,f){if(e.id===a.id){b.rules[f]=u;}});}});this.model.checkUpdate(true);this.model.setProperty('/selectedRule',u);this.goToRuleProperties();}else{MessageToast.show("Update rule failed because: "+r);}},this);},createNewRulePress:function(e){var i=e.getParameter("item"),a=i.getText();if(a==='New Rule'){var b=this.model.getProperty("/newEmptyRule");this.model.setProperty("/newRule",jQuery.extend(true,{},b));this.goToCreateRule();}else{var s=jQuery.extend(true,{},this.model.getProperty("/selectedRule"));this.model.setProperty("/newRule",s);this.model.checkUpdate(true,false);this.goToCreateRule();}},goToRuleProperties:function(){var n=this.getView().byId("rulesNavContainer");n.to(this.getView().byId("rulesDisplayPage"),"show");},hackListItemBase:function(){var t=this,o=ListItemBase.prototype.ontap,a=ListItemBase.prototype.updateSelectedDOM,b=ListItemBase.prototype.onAfterRendering;ListItemBase.prototype.onAfterRendering=function(){b.apply(this,arguments);if(this.getParent().getMode()==="MultiSelect"){this.$().removeClass("sapMLIBSelected");}};ListItemBase.prototype.ontap=function(e){if(this.getParent().getMode()!=="MultiSelect"){o.call(this,e);return;}if($(e.target).hasClass("sapMCbBg")||$(e.target).hasClass("sapMCb")){o.call(this,e);}else{t.model.setProperty("/selectedRuleStringify","");t.markLIBAsSelected(this);var s=this.getBindingContext().getObject();t.model.setProperty("/selectedRule",s);t.model.setProperty("/selectedRuleStringify",t.createRuleString(s));}};ListItemBase.prototype.updateSelectedDOM=function(s,T){a.call(this,s,T);if(this.getParent().getMode()==="MultiSelect"){T.removeClass("sapMLIBSelected");}};},createRuleString:function(r){var s="{\n",c=0,k=Object.keys(r).length;for(var a in r){var v=r[a];c++;s+="\t";s+=a+": ";if(a==="check"){s+=v.split("\n").join("\n\t");}else{s+=JSON.stringify(v);}if(c<k){s+=",";}s+="\n";}s+="}";return s;},markLIBAsSelected:function(l){if(!l){var s=this.model.getProperty("/selectedRule/title");this.getView().byId("ruleSetContainer").getContent().forEach(function(a){a.getContent()[0].getItems().forEach(function(b){if(b.getLabel()===s){l=b;}});});}this.getView().$().find(".sapMLIB").removeClass("sapMLIBSelected");l.$().addClass("sapMLIBSelected");},onAfterNavigate:function(e){var t=e.getParameter("to"),a=this;if(t===this.getView().byId("rulesDisplayPage")){setTimeout(function(){a.markLIBAsSelected();},250);}},selectAll:function(l){var t=this;this.visitAllRules(function(r,a,b){if(l===b){t.model.setProperty("/libraries/"+b+"/rules/"+a+"/selected",true);}});},deselectAll:function(l){var t=this;this.visitAllRules(function(r,a,b){if(l===b){t.model.setProperty("/libraries/"+b+"/rules/"+a+"/selected",false);}});},updateRule:function(){var o=this.model.getProperty("/editRuleSource/id"),u=this.model.getProperty("/editRule");if(this.checkFunctionString(u.check)){CommunicationBus.publish("verifyUpdateRule",{oldId:o,updateObj:RuleSerializer.serialize(u)});}},updatesupportRules:function(d){d=RuleSerializer.deserialize(d);var l=[],t=this;for(var i in d){var r=[],a=d[i].ruleset._mRules;for(var j in a){var b=a[j];b.libName=i;b.selected=true;r.push(b);}l.push({title:i,type:"library",rules:r});}var f=l[0].rules[0];t.model.setProperty("/selectedRuleStringify","");t.model.setProperty("/selectedRule",f);t.model.setProperty("/selectedRuleStringify",t.createRuleString(f));t.model.setProperty("/libraries",l);t.createRulesUI();var p=t.getView().byId("ruleSetContainer").getContent()[0];p.setExpanded(true);},createRulesUI:function(){var l=this.model.getProperty("/libraries"),r=0,t=this,v=this.getView().byId("ruleSetContainer");v.getContent().forEach(function(c,a){v.removeContent(c);});l.forEach(function(a,b){var c=a.title==="temporary"?new sap.m.Button({icon:"sap-icon://edit",press:function(E){var s=this.getParent().getBindingContext().getObject();t.model.setProperty("/editRuleSource",s);t.model.setProperty("/editRule",jQuery.extend(true,{},s));t.model.checkUpdate(true,true);var n=t.getView().byId("rulesNavContainer");n.to(t.getView().byId("ruleUpdatePage"),"show");}}):null;var d=new List({mode:"MultiSelect",includeItemInSelection:true,items:{path:"/libraries/"+b+"/rules",template:new InputListItem({label:"{title}",selected:"{selected}",content:c})}});if(a.rules.length===undefined){r=1;}else{r=a.rules.length;}var e=new Panel({width:"100%",expandable:true,expanded:false,content:d,headerToolbar:new Toolbar({content:[new Label({text:a.title+" ("+r+")"}),new ToolbarSpacer(),new Button({text:"Select all",press:function(){t.selectAll(b);}}),new Button({text:"Deselect all",press:function(){t.deselectAll(b);}})]})});v.addContent(e);});},addLinkToNewRule:function(){var t=this.model.getProperty("/tempLink"),c=jQuery.extend(true,{},t);this.model.getProperty("/newRule/resolutionurls").push(c);this.model.checkUpdate(true,true);},addLinkToEditRule:function(){var t=this.model.getProperty("/tempLink"),c=jQuery.extend(true,{},t);this.model.getProperty("/editRule/resolutionurls").push(c);this.model.checkUpdate(true,true);},goToCreateRule:function(){var n=this.getView().byId("rulesNavContainer");n.to(this.getView().byId("rulesCreatePage"),"show");},checkFunctionString:function(functionString){try{eval("var testAsignedVar = "+functionString);}catch(err){MessageToast.show("Your check function contains errors, and can't be evaluated:"+err);return false;}return true;},addNewRule:function(){var n=this.model.getProperty("/newRule");if(this.checkFunctionString(n.check)){CommunicationBus.publish("verifyNewRule",RuleSerializer.serialize(n));}},rulesToolbarITHSelect:function(e){if(e.getParameter("key")==="jsonOutput"){var n=this.model.getProperty("/newRule"),s=this.createRuleString(n);this.model.setProperty("/newRuleStringified",s);}},rulesToolbarEditITHSelect:function(e){if(e.getParameter("key")==="jsonOutput"){var n=this.model.getProperty("/editRule"),s=this.createRuleString(n);this.model.setProperty("/updateRuleStringified",s);}},visitAllRules:function(c){var l=this.model.getProperty("/libraries");l.forEach(function(a,b){a.rules.forEach(function(r,d){c(r,d,b);});});}});});};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.controllers.Issues.controller')){jQuery.sap.declare('sap.ui.support.supportRules.ui.controllers.Issues.controller');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/support/supportRules/ui/controllers/Issues.controller",["jquery.sap.global","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/support/supportRules/WindowCommunicationBus","sap/ui/support/supportRules/ui/models/SharedModel","sap/ui/support/supportRules/ElementTree"],function($,C,J,a,S,E){"use strict";var i={severitytexts:{Error:"Error",Warning:"Warning",Hint:"Information",All:"All Severities"},severitystates:{Error:"Error",Warning:"Warning",Hint:"None",All:"None"},severityicons:{Error:"sap-icon://message-error",Warning:"sap-icon://message-warning",Hint:"sap-icon://message-information",All:"sap-icon://multiselect-all"}};return C.extend("sap.ui.support.supportRules.ui.controllers.Issues",{onInit:function(){a.subscribe("analyzeFinish",function(d){var p={};d.issues.forEach(function(b){if(!b.context||!b.context.id){return;}if(!p[b.context.id]){p[b.context.id]=[b.name];}else{p[b.context.id].push(b.name);}});this.model.setSizeLimit(1000);this.model.setProperty("/issues",d.issues);this.model.setProperty("/selectedIssue",d.issues[0]);this.model.setProperty('/analyzePressed',true);this.model.setProperty("/visibleIssuesCount",d.issues.length);this.elementTree.setData({controls:d.elementTree,issuesIds:p});this.clearFilters();},this);this.model=S;this.getView().setModel(this.model);this.clearFilters();},onAfterRendering:function(){var t=this;this.elementTree=new E(this.getView().byId("elementTreeContainer").getId(),{onIssueCountClicked:function(s){t.clearFilters();t.model.setProperty("/elementFilter",s);t.updateIssuesVisibility();},onHoverChanged:function(h){a.publish("treeElementHover",h);}});},clearFilters:function(){this.model.setProperty("/severityFilter","All");this.model.setProperty("/categoryFilter","All");this.model.setProperty("/elementFilter","All");this.model.setProperty("/audienceFilter","All");this.updateIssuesVisibility();},clearFiltersAndElementSelection:function(){this.clearFilters();this.elementTree.clearSelection();},onIssuePressed:function(e){var p=e.mParameters.listItem,s=p.getBindingContext().getObject();this.model.setProperty("/selectedIssue",s);this.elementTree.setSelectedElement(s.context.id,false);},openDocumentation:function(e){var l=sap.ui.getCore().byId(e.mParameters.id),u=l.getBindingContext().getProperty("href");a.publish("openUrl",u);},updateIssuesVisibility:function(){var v=0;var b=this.getView().byId("issuesList");b.getItems().forEach(function(c){c.updateProperty("visible");});b.getItems().forEach(function(c){if(c.getVisible()){v++;}});this.model.setProperty("/visibleIssuesCount",v);},filterIssueListItems:function(b){var s=this.model.getProperty("/severityFilter"),c=b.severity===s||s==='All',d=this.model.getProperty("/categoryFilter"),e=$.inArray(d,b.categories)>-1||d==='All',f=this.model.getProperty("/elementFilter"),g=f===b.context.id||f==='All',h=this.model.getProperty("/audienceFilter"),j=$.inArray(h,b.audiences)>-1||h==='All';return c&&e&&g&&j;},filterSevirityIcon:function(v){return i.severityicons[v];},filterSevirityState:function(v){return i.severitystates[v];},filterSevirityText:function(v){return i.severitytexts[v];}});});};if(!jQuery.sap.isDeclared('sap.ui.support.supportRules.ui.controllers.Main.controller')){jQuery.sap.declare('sap.ui.support.supportRules.ui.controllers.Main.controller');jQuery.sap.require('sap.ui.core.mvc.Controller');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/ui/support/supportRules/ui/controllers/Main.controller",["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/support/supportRules/WindowCommunicationBus","sap/ui/support/supportRules/ui/models/SharedModel"],function(C,J,W,S){"use strict";return C.extend("sap.ui.support.supportRules.ui.controllers.Main",{onInit:function(){this.model=S;this.getView().setModel(this.model);this.resizeDown();this.initSettingsPopover();this.setCommunicationSubscriptions();this.hidden=false;this.updateShowButton();},initSettingsPopover:function(){this._settingsPopover=sap.ui.xmlfragment("sap.ui.support.supportRules.ui.views.AnalyzeSettings",this);this._settingsPopover.setModel(S);this.getView().addDependent(this._oPopover);},setCommunicationSubscriptions:function(){W.subscribe("analyzeFinish",function(d){this.ensureOpened();this.model.setProperty("/showProgressIndicator",false);this.model.setProperty("/coreStateChanged",false);this.model.setProperty("/lastAnalysisElapsedTime",d.elapsedTime);this.goToIssues();},this);W.subscribe("progressUpdate",function(d){var c=d.currentProgress,p=this.getView().byId("progressIndicator");p.setDisplayValue(c+"/"+100);this.model.setProperty("/progress",c);},this);W.subscribe("coreStateChanged",function(){this.model.setProperty("/coreStateChanged",true);},this);W.subscribe("postAvailableComponents",function(d){this.model.setProperty("/availableComponents",d);},this);},resizeUp:function(){W.publish("resizeFrame",{bigger:true});},ensureOpened:function(){W.publish("ensureOpened");},resizeDown:function(){W.publish("resizeFrame",{bigger:false});},onAnalyze:function(){var s=this._getSelectedRules(),e=this._getExecutionContext();W.publish("onAnalyzePressed",{selectedRules:s,executionContext:e});this.model.setProperty("/showProgressIndicator",true);this.clearProgressIndicator();},onViewReport:function(){var d=this._getReportData();W.publish("onViewReportPressed",d);},onContextSelect:function(e){if(e.getParameter("selected")){var s=e.getSource(),r=s.getCustomData()[0].getValue(),a=this.model.getProperty("/executionScopes")[r];this.model.setProperty("/analyzeContext",a);}},onBeforePopoverOpen:function(){W.publish("getAvailableComponents");},onAnalyzeSettings:function(e){W.publish("ensureOpened");this._settingsPopover.openBy(e.getSource());},onDownloadReport:function(){var d=this._getReportData();W.publish("onDownloadReportPressed",d);},onNavConAfterNavigate:function(e){var t=e.getParameter("to");if(t===this.getView().byId("analysis")){setTimeout(function(){t.getController().markLIBAsSelected();},250);}},_getReportData:function(){return{executionScopes:this.model.getProperty("/executionScopes"),executionScopeTitle:this.model.getProperty("/executionScopeTitle"),analysisDurationTitle:this.model.getProperty("/analysisDurationTitle")};},_getExecutionContext:function(){var c={type:this.model.getProperty("/analyzeContext/key")};if(c.type==="parent"){c.parentId=this.model.getProperty("/parentExecutionContextId");}if(c.type==="components"){var s=sap.ui.getCore().byId("componentsSelectionContainer"),a=s.getContent();c.components=[];a.forEach(function(b){if(b.getSelected()){c.components.push(b.getText());}});}return c;},_getSelectedRules:function(){var l=this.model.getProperty("/libraries"),s=[];l.forEach(function(a,b){a.rules.forEach(function(r){if(r.selected){s.push({libName:a.title,ruleId:r.id});}});});return s;},goToAnalysis:function(e){var n=this.getView().byId("navCon");n.to(this.getView().byId("analysis"),"show");this.ensureOpened();},goToIssues:function(){var n=this.getView().byId("navCon");n.to(this.getView().byId("issues"),"show");this.ensureOpened();},goToWiki:function(){window.open('https://uacp2.hana.ondemand.com/viewer/DRAFT/SAPUI5_Internal/57ccd7d7103640e3a187ed55e1d2c163.html','_blank');},clearProgressIndicator:function(){var p=this.getView().byId("progressIndicator");p.setDisplayValue("None");this.model.setProperty("/progress",0.1);},setRulesLabel:function(l){var s=0;if(l===null){return"Manage Rules ("+s+")";}else{l.forEach(function(a,b){s+=a.rules.length;});return"Manage Rules ("+s+")";}},updateShowButton:function(){this.getView().byId("sapSTShowButtonBar").setVisible(this.hidden);},toggleHide:function(){this.hidden=!this.hidden;this.updateShowButton();W.publish("toggleFrameHidden",this.hidden);}});});};if(!jQuery.sap.isDeclared('sap.ui.support.Bootstrap')){jQuery.sap.declare('sap.ui.support.Bootstrap');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/support/Bootstrap",["jquery.sap.global","./library","sap/ui/support/supportRules/Main"],function(q,l,M){"use strict";var B={initSupportRules:function(s){if(s[0].toLowerCase()==="true"||s[0].toLowerCase()==="silent"){M.startPlugin();q.sap.log.logSupportInfo(true);}}};return B;});};
